var dc=Object.defineProperty;var pc=(n,t,e)=>t in n?dc(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ye=(n,t,e)=>pc(n,typeof t!="symbol"?t+"":t,e);import{g as as,c as Ye,a as Dn}from"./jotai-qPROf-aN.js";var ge={},$n={};$n.byteLength=mc;$n.toByteArray=bc;$n.fromByteArray=Sc;var tr=[],qe=[],gc=typeof Uint8Array<"u"?Uint8Array:Array,Bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Wr=0,yc=Bi.length;Wr<yc;++Wr)tr[Wr]=Bi[Wr],qe[Bi.charCodeAt(Wr)]=Wr;qe[45]=62;qe[95]=63;function Oo(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function mc(n){var t=Oo(n),e=t[0],r=t[1];return(e+r)*3/4-r}function wc(n,t,e){return(t+e)*3/4-e}function bc(n){var t,e=Oo(n),r=e[0],s=e[1],i=new gc(wc(n,r,s)),o=0,u=s>0?r-4:r,f;for(f=0;f<u;f+=4)t=qe[n.charCodeAt(f)]<<18|qe[n.charCodeAt(f+1)]<<12|qe[n.charCodeAt(f+2)]<<6|qe[n.charCodeAt(f+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=qe[n.charCodeAt(f)]<<2|qe[n.charCodeAt(f+1)]>>4,i[o++]=t&255),s===1&&(t=qe[n.charCodeAt(f)]<<10|qe[n.charCodeAt(f+1)]<<4|qe[n.charCodeAt(f+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function kc(n){return tr[n>>18&63]+tr[n>>12&63]+tr[n>>6&63]+tr[n&63]}function vc(n,t,e){for(var r,s=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(kc(r));return s.join("")}function Sc(n){for(var t,e=n.length,r=e%3,s=[],i=16383,o=0,u=e-r;o<u;o+=i)s.push(vc(n,o,o+i>u?u:o+i));return r===1?(t=n[e-1],s.push(tr[t>>2]+tr[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],s.push(tr[t>>10]+tr[t>>4&63]+tr[t<<2&63]+"=")),s.join("")}var cs={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */cs.read=function(n,t,e,r,s){var i,o,u=s*8-r-1,f=(1<<u)-1,w=f>>1,p=-7,I=e?s-1:0,B=e?-1:1,_=n[t+I];for(I+=B,i=_&(1<<-p)-1,_>>=-p,p+=u;p>0;i=i*256+n[t+I],I+=B,p-=8);for(o=i&(1<<-p)-1,i>>=-p,p+=r;p>0;o=o*256+n[t+I],I+=B,p-=8);if(i===0)i=1-w;else{if(i===f)return o?NaN:(_?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-w}return(_?-1:1)*o*Math.pow(2,i-r)};cs.write=function(n,t,e,r,s,i){var o,u,f,w=i*8-s-1,p=(1<<w)-1,I=p>>1,B=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=r?0:i-1,P=r?1:-1,M=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=p):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+I>=1?t+=B/f:t+=B*Math.pow(2,1-I),t*f>=2&&(o++,f/=2),o+I>=p?(u=0,o=p):o+I>=1?(u=(t*f-1)*Math.pow(2,s),o=o+I):(u=t*Math.pow(2,I-1)*Math.pow(2,s),o=0));s>=8;n[e+_]=u&255,_+=P,u/=256,s-=8);for(o=o<<s|u,w+=s;w>0;n[e+_]=o&255,_+=P,o/=256,w-=8);n[e+_-P]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=$n,e=cs,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=p,n.SlowBuffer=Z,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:u}=globalThis;p.TYPED_ARRAY_SUPPORT=f(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const y=new i(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,i.prototype),Object.setPrototypeOf(y,c),y.foo()===42}catch{return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}});function w(y){if(y>s)throw new RangeError('The value "'+y+'" is invalid for option "size"');const c=new i(y);return Object.setPrototypeOf(c,p.prototype),c}function p(y,c,l){if(typeof y=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return P(y)}return I(y,c,l)}p.poolSize=8192;function I(y,c,l){if(typeof y=="string")return M(y,c);if(o.isView(y))return U(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(_e(y,o)||y&&_e(y.buffer,o)||typeof u<"u"&&(_e(y,u)||y&&_e(y.buffer,u)))return K(y,c,l);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=y.valueOf&&y.valueOf();if(v!=null&&v!==y)return p.from(v,c,l);const T=O(y);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return p.from(y[Symbol.toPrimitive]("string"),c,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}p.from=function(y,c,l){return I(y,c,l)},Object.setPrototypeOf(p.prototype,i.prototype),Object.setPrototypeOf(p,i);function B(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function _(y,c,l){return B(y),y<=0?w(y):c!==void 0?typeof l=="string"?w(y).fill(c,l):w(y).fill(c):w(y)}p.alloc=function(y,c,l){return _(y,c,l)};function P(y){return B(y),w(y<0?0:q(y)|0)}p.allocUnsafe=function(y){return P(y)},p.allocUnsafeSlow=function(y){return P(y)};function M(y,c){if((typeof c!="string"||c==="")&&(c="utf8"),!p.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const l=$(y,c)|0;let v=w(l);const T=v.write(y,c);return T!==l&&(v=v.slice(0,T)),v}function x(y){const c=y.length<0?0:q(y.length)|0,l=w(c);for(let v=0;v<c;v+=1)l[v]=y[v]&255;return l}function U(y){if(_e(y,i)){const c=new i(y);return K(c.buffer,c.byteOffset,c.byteLength)}return x(y)}function K(y,c,l){if(c<0||y.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<c+(l||0))throw new RangeError('"length" is outside of buffer bounds');let v;return c===void 0&&l===void 0?v=new i(y):l===void 0?v=new i(y,c):v=new i(y,c,l),Object.setPrototypeOf(v,p.prototype),v}function O(y){if(p.isBuffer(y)){const c=q(y.length)|0,l=w(c);return l.length===0||y.copy(l,0,0,c),l}if(y.length!==void 0)return typeof y.length!="number"||Lt(y.length)?w(0):x(y);if(y.type==="Buffer"&&Array.isArray(y.data))return x(y.data)}function q(y){if(y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return y|0}function Z(y){return+y!=y&&(y=0),p.alloc(+y)}p.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==p.prototype},p.compare=function(c,l){if(_e(c,i)&&(c=p.from(c,c.offset,c.byteLength)),_e(l,i)&&(l=p.from(l,l.offset,l.byteLength)),!p.isBuffer(c)||!p.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===l)return 0;let v=c.length,T=l.length;for(let L=0,z=Math.min(v,T);L<z;++L)if(c[L]!==l[L]){v=c[L],T=l[L];break}return v<T?-1:T<v?1:0},p.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return p.alloc(0);let v;if(l===void 0)for(l=0,v=0;v<c.length;++v)l+=c[v].length;const T=p.allocUnsafe(l);let L=0;for(v=0;v<c.length;++v){let z=c[v];if(_e(z,i))L+z.length>T.length?(p.isBuffer(z)||(z=p.from(z)),z.copy(T,L)):i.prototype.set.call(T,z,L);else if(p.isBuffer(z))z.copy(T,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=z.length}return T};function $(y,c){if(p.isBuffer(y))return y.length;if(o.isView(y)||_e(y,o))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const l=y.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&l===0)return 0;let T=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return Pt(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Ot(y).length;default:if(T)return v?-1:Pt(y).length;c=(""+c).toLowerCase(),T=!0}}p.byteLength=$;function G(y,c,l){let v=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(y||(y="utf8");;)switch(y){case"hex":return h(this,c,l);case"utf8":case"utf-8":return m(this,c,l);case"ascii":return R(this,c,l);case"latin1":case"binary":return k(this,c,l);case"base64":return g(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,c,l);default:if(v)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),v=!0}}p.prototype._isBuffer=!0;function J(y,c,l){const v=y[c];y[c]=y[l],y[l]=v}p.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<c;l+=2)J(this,l,l+1);return this},p.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<c;l+=4)J(this,l,l+3),J(this,l+1,l+2);return this},p.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<c;l+=8)J(this,l,l+7),J(this,l+1,l+6),J(this,l+2,l+5),J(this,l+3,l+4);return this},p.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?m(this,0,c):G.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(c){if(!p.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:p.compare(this,c)===0},p.prototype.inspect=function(){let c="";const l=n.INSPECT_MAX_BYTES;return c=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(c+=" ... "),"<Buffer "+c+">"},r&&(p.prototype[r]=p.prototype.inspect),p.prototype.compare=function(c,l,v,T,L){if(_e(c,i)&&(c=p.from(c,c.offset,c.byteLength)),!p.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(l===void 0&&(l=0),v===void 0&&(v=c?c.length:0),T===void 0&&(T=0),L===void 0&&(L=this.length),l<0||v>c.length||T<0||L>this.length)throw new RangeError("out of range index");if(T>=L&&l>=v)return 0;if(T>=L)return-1;if(l>=v)return 1;if(l>>>=0,v>>>=0,T>>>=0,L>>>=0,this===c)return 0;let z=L-T,gt=v-l;const pt=Math.min(z,gt),lt=this.slice(T,L),Wt=c.slice(l,v);for(let at=0;at<pt;++at)if(lt[at]!==Wt[at]){z=lt[at],gt=Wt[at];break}return z<gt?-1:gt<z?1:0};function nt(y,c,l,v,T){if(y.length===0)return-1;if(typeof l=="string"?(v=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Lt(l)&&(l=T?0:y.length-1),l<0&&(l=y.length+l),l>=y.length){if(T)return-1;l=y.length-1}else if(l<0)if(T)l=0;else return-1;if(typeof c=="string"&&(c=p.from(c,v)),p.isBuffer(c))return c.length===0?-1:Ut(y,c,l,v,T);if(typeof c=="number")return c=c&255,typeof i.prototype.indexOf=="function"?T?i.prototype.indexOf.call(y,c,l):i.prototype.lastIndexOf.call(y,c,l):Ut(y,[c],l,v,T);throw new TypeError("val must be string, number or Buffer")}function Ut(y,c,l,v,T){let L=1,z=y.length,gt=c.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(y.length<2||c.length<2)return-1;L=2,z/=2,gt/=2,l/=2}function pt(Wt,at){return L===1?Wt[at]:Wt.readUInt16BE(at*L)}let lt;if(T){let Wt=-1;for(lt=l;lt<z;lt++)if(pt(y,lt)===pt(c,Wt===-1?0:lt-Wt)){if(Wt===-1&&(Wt=lt),lt-Wt+1===gt)return Wt*L}else Wt!==-1&&(lt-=lt-Wt),Wt=-1}else for(l+gt>z&&(l=z-gt),lt=l;lt>=0;lt--){let Wt=!0;for(let at=0;at<gt;at++)if(pt(y,lt+at)!==pt(c,at)){Wt=!1;break}if(Wt)return lt}return-1}p.prototype.includes=function(c,l,v){return this.indexOf(c,l,v)!==-1},p.prototype.indexOf=function(c,l,v){return nt(this,c,l,v,!0)},p.prototype.lastIndexOf=function(c,l,v){return nt(this,c,l,v,!1)};function it(y,c,l,v){l=Number(l)||0;const T=y.length-l;v?(v=Number(v),v>T&&(v=T)):v=T;const L=c.length;v>L/2&&(v=L/2);let z;for(z=0;z<v;++z){const gt=parseInt(c.substr(z*2,2),16);if(Lt(gt))return z;y[l+z]=gt}return z}function ut(y,c,l,v){return Tt(Pt(c,y.length-l),y,l,v)}function A(y,c,l,v){return Tt(Kt(c),y,l,v)}function a(y,c,l,v){return Tt(Ot(c),y,l,v)}function d(y,c,l,v){return Tt(yr(c,y.length-l),y,l,v)}p.prototype.write=function(c,l,v,T){if(l===void 0)T="utf8",v=this.length,l=0;else if(v===void 0&&typeof l=="string")T=l,v=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(v)?(v=v>>>0,T===void 0&&(T="utf8")):(T=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-l;if((v===void 0||v>L)&&(v=L),c.length>0&&(v<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");let z=!1;for(;;)switch(T){case"hex":return it(this,c,l,v);case"utf8":case"utf-8":return ut(this,c,l,v);case"ascii":case"latin1":case"binary":return A(this,c,l,v);case"base64":return a(this,c,l,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,c,l,v);default:if(z)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),z=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g(y,c,l){return c===0&&l===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(c,l))}function m(y,c,l){l=Math.min(y.length,l);const v=[];let T=c;for(;T<l;){const L=y[T];let z=null,gt=L>239?4:L>223?3:L>191?2:1;if(T+gt<=l){let pt,lt,Wt,at;switch(gt){case 1:L<128&&(z=L);break;case 2:pt=y[T+1],(pt&192)===128&&(at=(L&31)<<6|pt&63,at>127&&(z=at));break;case 3:pt=y[T+1],lt=y[T+2],(pt&192)===128&&(lt&192)===128&&(at=(L&15)<<12|(pt&63)<<6|lt&63,at>2047&&(at<55296||at>57343)&&(z=at));break;case 4:pt=y[T+1],lt=y[T+2],Wt=y[T+3],(pt&192)===128&&(lt&192)===128&&(Wt&192)===128&&(at=(L&15)<<18|(pt&63)<<12|(lt&63)<<6|Wt&63,at>65535&&at<1114112&&(z=at))}}z===null?(z=65533,gt=1):z>65535&&(z-=65536,v.push(z>>>10&1023|55296),z=56320|z&1023),v.push(z),T+=gt}return E(v)}const b=4096;function E(y){const c=y.length;if(c<=b)return String.fromCharCode.apply(String,y);let l="",v=0;for(;v<c;)l+=String.fromCharCode.apply(String,y.slice(v,v+=b));return l}function R(y,c,l){let v="";l=Math.min(y.length,l);for(let T=c;T<l;++T)v+=String.fromCharCode(y[T]&127);return v}function k(y,c,l){let v="";l=Math.min(y.length,l);for(let T=c;T<l;++T)v+=String.fromCharCode(y[T]);return v}function h(y,c,l){const v=y.length;(!c||c<0)&&(c=0),(!l||l<0||l>v)&&(l=v);let T="";for(let L=c;L<l;++L)T+=Ft[y[L]];return T}function S(y,c,l){const v=y.slice(c,l);let T="";for(let L=0;L<v.length-1;L+=2)T+=String.fromCharCode(v[L]+v[L+1]*256);return T}p.prototype.slice=function(c,l){const v=this.length;c=~~c,l=l===void 0?v:~~l,c<0?(c+=v,c<0&&(c=0)):c>v&&(c=v),l<0?(l+=v,l<0&&(l=0)):l>v&&(l=v),l<c&&(l=c);const T=this.subarray(c,l);return Object.setPrototypeOf(T,p.prototype),T};function W(y,c,l){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+c>l)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(c,l,v){c=c>>>0,l=l>>>0,v||W(c,l,this.length);let T=this[c],L=1,z=0;for(;++z<l&&(L*=256);)T+=this[c+z]*L;return T},p.prototype.readUintBE=p.prototype.readUIntBE=function(c,l,v){c=c>>>0,l=l>>>0,v||W(c,l,this.length);let T=this[c+--l],L=1;for(;l>0&&(L*=256);)T+=this[c+--l]*L;return T},p.prototype.readUint8=p.prototype.readUInt8=function(c,l){return c=c>>>0,l||W(c,1,this.length),this[c]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||W(c,2,this.length),this[c]|this[c+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||W(c,2,this.length),this[c]<<8|this[c+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||W(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||W(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},p.prototype.readBigUInt64LE=ze(function(c){c=c>>>0,Ve(c,"offset");const l=this[c],v=this[c+7];(l===void 0||v===void 0)&&Mt(c,this.length-8);const T=l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,L=this[++c]+this[++c]*2**8+this[++c]*2**16+v*2**24;return BigInt(T)+(BigInt(L)<<BigInt(32))}),p.prototype.readBigUInt64BE=ze(function(c){c=c>>>0,Ve(c,"offset");const l=this[c],v=this[c+7];(l===void 0||v===void 0)&&Mt(c,this.length-8);const T=l*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],L=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+v;return(BigInt(T)<<BigInt(32))+BigInt(L)}),p.prototype.readIntLE=function(c,l,v){c=c>>>0,l=l>>>0,v||W(c,l,this.length);let T=this[c],L=1,z=0;for(;++z<l&&(L*=256);)T+=this[c+z]*L;return L*=128,T>=L&&(T-=Math.pow(2,8*l)),T},p.prototype.readIntBE=function(c,l,v){c=c>>>0,l=l>>>0,v||W(c,l,this.length);let T=l,L=1,z=this[c+--T];for(;T>0&&(L*=256);)z+=this[c+--T]*L;return L*=128,z>=L&&(z-=Math.pow(2,8*l)),z},p.prototype.readInt8=function(c,l){return c=c>>>0,l||W(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},p.prototype.readInt16LE=function(c,l){c=c>>>0,l||W(c,2,this.length);const v=this[c]|this[c+1]<<8;return v&32768?v|4294901760:v},p.prototype.readInt16BE=function(c,l){c=c>>>0,l||W(c,2,this.length);const v=this[c+1]|this[c]<<8;return v&32768?v|4294901760:v},p.prototype.readInt32LE=function(c,l){return c=c>>>0,l||W(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},p.prototype.readInt32BE=function(c,l){return c=c>>>0,l||W(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},p.prototype.readBigInt64LE=ze(function(c){c=c>>>0,Ve(c,"offset");const l=this[c],v=this[c+7];(l===void 0||v===void 0)&&Mt(c,this.length-8);const T=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(v<<24);return(BigInt(T)<<BigInt(32))+BigInt(l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),p.prototype.readBigInt64BE=ze(function(c){c=c>>>0,Ve(c,"offset");const l=this[c],v=this[c+7];(l===void 0||v===void 0)&&Mt(c,this.length-8);const T=(l<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(T)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+v)}),p.prototype.readFloatLE=function(c,l){return c=c>>>0,l||W(c,4,this.length),e.read(this,c,!0,23,4)},p.prototype.readFloatBE=function(c,l){return c=c>>>0,l||W(c,4,this.length),e.read(this,c,!1,23,4)},p.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||W(c,8,this.length),e.read(this,c,!0,52,8)},p.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||W(c,8,this.length),e.read(this,c,!1,52,8)};function D(y,c,l,v,T,L){if(!p.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>T||c<L)throw new RangeError('"value" argument is out of bounds');if(l+v>y.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(c,l,v,T){if(c=+c,l=l>>>0,v=v>>>0,!T){const gt=Math.pow(2,8*v)-1;D(this,c,l,v,gt,0)}let L=1,z=0;for(this[l]=c&255;++z<v&&(L*=256);)this[l+z]=c/L&255;return l+v},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(c,l,v,T){if(c=+c,l=l>>>0,v=v>>>0,!T){const gt=Math.pow(2,8*v)-1;D(this,c,l,v,gt,0)}let L=v-1,z=1;for(this[l+L]=c&255;--L>=0&&(z*=256);)this[l+L]=c/z&255;return l+v},p.prototype.writeUint8=p.prototype.writeUInt8=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,1,255,0),this[l]=c&255,l+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function X(y,c,l,v,T){_t(c,v,T,y,l,7);let L=Number(c&BigInt(4294967295));y[l++]=L,L=L>>8,y[l++]=L,L=L>>8,y[l++]=L,L=L>>8,y[l++]=L;let z=Number(c>>BigInt(32)&BigInt(4294967295));return y[l++]=z,z=z>>8,y[l++]=z,z=z>>8,y[l++]=z,z=z>>8,y[l++]=z,l}function bt(y,c,l,v,T){_t(c,v,T,y,l,7);let L=Number(c&BigInt(4294967295));y[l+7]=L,L=L>>8,y[l+6]=L,L=L>>8,y[l+5]=L,L=L>>8,y[l+4]=L;let z=Number(c>>BigInt(32)&BigInt(4294967295));return y[l+3]=z,z=z>>8,y[l+2]=z,z=z>>8,y[l+1]=z,z=z>>8,y[l]=z,l+8}p.prototype.writeBigUInt64LE=ze(function(c,l=0){return X(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=ze(function(c,l=0){return bt(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(c,l,v,T){if(c=+c,l=l>>>0,!T){const pt=Math.pow(2,8*v-1);D(this,c,l,v,pt-1,-pt)}let L=0,z=1,gt=0;for(this[l]=c&255;++L<v&&(z*=256);)c<0&&gt===0&&this[l+L-1]!==0&&(gt=1),this[l+L]=(c/z>>0)-gt&255;return l+v},p.prototype.writeIntBE=function(c,l,v,T){if(c=+c,l=l>>>0,!T){const pt=Math.pow(2,8*v-1);D(this,c,l,v,pt-1,-pt)}let L=v-1,z=1,gt=0;for(this[l+L]=c&255;--L>=0&&(z*=256);)c<0&&gt===0&&this[l+L+1]!==0&&(gt=1),this[l+L]=(c/z>>0)-gt&255;return l+v},p.prototype.writeInt8=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},p.prototype.writeInt16LE=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},p.prototype.writeInt16BE=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},p.prototype.writeInt32LE=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},p.prototype.writeInt32BE=function(c,l,v){return c=+c,l=l>>>0,v||D(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},p.prototype.writeBigInt64LE=ze(function(c,l=0){return X(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=ze(function(c,l=0){return bt(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ct(y,c,l,v,T,L){if(l+v>y.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function ht(y,c,l,v,T){return c=+c,l=l>>>0,T||ct(y,c,l,4),e.write(y,c,l,v,23,4),l+4}p.prototype.writeFloatLE=function(c,l,v){return ht(this,c,l,!0,v)},p.prototype.writeFloatBE=function(c,l,v){return ht(this,c,l,!1,v)};function Jt(y,c,l,v,T){return c=+c,l=l>>>0,T||ct(y,c,l,8),e.write(y,c,l,v,52,8),l+8}p.prototype.writeDoubleLE=function(c,l,v){return Jt(this,c,l,!0,v)},p.prototype.writeDoubleBE=function(c,l,v){return Jt(this,c,l,!1,v)},p.prototype.copy=function(c,l,v,T){if(!p.isBuffer(c))throw new TypeError("argument should be a Buffer");if(v||(v=0),!T&&T!==0&&(T=this.length),l>=c.length&&(l=c.length),l||(l=0),T>0&&T<v&&(T=v),T===v||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),c.length-l<T-v&&(T=c.length-l+v);const L=T-v;return this===c&&typeof i.prototype.copyWithin=="function"?this.copyWithin(l,v,T):i.prototype.set.call(c,this.subarray(v,T),l),L},p.prototype.fill=function(c,l,v,T){if(typeof c=="string"){if(typeof l=="string"?(T=l,l=0,v=this.length):typeof v=="string"&&(T=v,v=this.length),T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!p.isEncoding(T))throw new TypeError("Unknown encoding: "+T);if(c.length===1){const z=c.charCodeAt(0);(T==="utf8"&&z<128||T==="latin1")&&(c=z)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(l<0||this.length<l||this.length<v)throw new RangeError("Out of range index");if(v<=l)return this;l=l>>>0,v=v===void 0?this.length:v>>>0,c||(c=0);let L;if(typeof c=="number")for(L=l;L<v;++L)this[L]=c;else{const z=p.isBuffer(c)?c:p.from(c,T),gt=z.length;if(gt===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(L=0;L<v-l;++L)this[L+l]=z[L%gt]}return this};const dt={};function ft(y,c,l){dt[y]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(T){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:T,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}ft("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ft("ERR_INVALID_ARG_TYPE",function(y,c){return`The "${y}" argument must be of type number. Received type ${typeof c}`},TypeError),ft("ERR_OUT_OF_RANGE",function(y,c,l){let v=`The value of "${y}" is out of range.`,T=l;return Number.isInteger(l)&&Math.abs(l)>2**32?T=ve(String(l)):typeof l=="bigint"&&(T=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(T=ve(T)),T+="n"),v+=` It must be ${c}. Received ${T}`,v},RangeError);function ve(y){let c="",l=y.length;const v=y[0]==="-"?1:0;for(;l>=v+4;l-=3)c=`_${y.slice(l-3,l)}${c}`;return`${y.slice(0,l)}${c}`}function Rt(y,c,l){Ve(c,"offset"),(y[c]===void 0||y[c+l]===void 0)&&Mt(c,y.length-(l+1))}function _t(y,c,l,v,T,L){if(y>l||y<c){const z=typeof c=="bigint"?"n":"";let gt;throw c===0||c===BigInt(0)?gt=`>= 0${z} and < 2${z} ** ${(L+1)*8}${z}`:gt=`>= -(2${z} ** ${(L+1)*8-1}${z}) and < 2 ** ${(L+1)*8-1}${z}`,new dt.ERR_OUT_OF_RANGE("value",gt,y)}Rt(v,T,L)}function Ve(y,c){if(typeof y!="number")throw new dt.ERR_INVALID_ARG_TYPE(c,"number",y)}function Mt(y,c,l){throw Math.floor(y)!==y?(Ve(y,l),new dt.ERR_OUT_OF_RANGE("offset","an integer",y)):c<0?new dt.ERR_BUFFER_OUT_OF_BOUNDS:new dt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${c}`,y)}const Dt=/[^+/0-9A-Za-z-_]/g;function Fr(y){if(y=y.split("=")[0],y=y.trim().replace(Dt,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function Pt(y,c){c=c||1/0;let l;const v=y.length;let T=null;const L=[];for(let z=0;z<v;++z){if(l=y.charCodeAt(z),l>55295&&l<57344){if(!T){if(l>56319){(c-=3)>-1&&L.push(239,191,189);continue}else if(z+1===v){(c-=3)>-1&&L.push(239,191,189);continue}T=l;continue}if(l<56320){(c-=3)>-1&&L.push(239,191,189),T=l;continue}l=(T-55296<<10|l-56320)+65536}else T&&(c-=3)>-1&&L.push(239,191,189);if(T=null,l<128){if((c-=1)<0)break;L.push(l)}else if(l<2048){if((c-=2)<0)break;L.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;L.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;L.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return L}function Kt(y){const c=[];for(let l=0;l<y.length;++l)c.push(y.charCodeAt(l)&255);return c}function yr(y,c){let l,v,T;const L=[];for(let z=0;z<y.length&&!((c-=2)<0);++z)l=y.charCodeAt(z),v=l>>8,T=l%256,L.push(T),L.push(v);return L}function Ot(y){return t.toByteArray(Fr(y))}function Tt(y,c,l,v){let T;for(T=0;T<v&&!(T+l>=c.length||T>=y.length);++T)c[T+l]=y[T];return T}function _e(y,c){return y instanceof c||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===c.name}function Lt(y){return y!==y}const Ft=function(){const y="0123456789abcdef",c=new Array(256);for(let l=0;l<16;++l){const v=l*16;for(let T=0;T<16;++T)c[v+T]=y[l]+y[T]}return c}();function ze(y){return typeof BigInt>"u"?$t:y}function $t(){throw new Error("BigInt not supported")}})(ge);const de=ge.Buffer,Ic=ge.Blob,Ec=ge.BlobOptions,st=ge.Buffer,xc=ge.File,Ac=ge.FileOptions,_c=ge.INSPECT_MAX_BYTES,Bc=ge.SlowBuffer,Rc=ge.TranscodeEncoding,Mc=ge.atob,Tc=ge.btoa,Pc=ge.constants,Lc=ge.isAscii,Cc=ge.isUtf8,Uc=ge.kMaxLength,Oc=ge.kStringMaxLength,Nc=ge.resolveObjectURL,zc=ge.transcode,Kc=Object.freeze(Object.defineProperty({__proto__:null,Blob:Ic,BlobOptions:Ec,Buffer:st,File:xc,FileOptions:Ac,INSPECT_MAX_BYTES:_c,SlowBuffer:Bc,TranscodeEncoding:Rc,atob:Mc,btoa:Tc,constants:Pc,default:de,isAscii:Lc,isUtf8:Cc,kMaxLength:Uc,kStringMaxLength:Oc,resolveObjectURL:Nc,transcode:zc},Symbol.toStringTag,{value:"Module"}));function Cn(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function Fc(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function bn(n,...t){if(!Fc(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}function Wc(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Cn(n.outputLen),Cn(n.blockLen)}function Yr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function No(n,t){bn(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const qr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qc=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Ri=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Xe=(n,t)=>n<<32-t|n>>>t,Xs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Dc=n=>n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255;function Qs(n){for(let t=0;t<n.length;t++)n[t]=Dc(n[t])}function $c(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Hn(n){return typeof n=="string"&&(n=$c(n)),bn(n),n}function Hc(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];bn(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class us{clone(){return this._cloneInto()}}function ls(n){const t=r=>n().update(Hn(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function zo(n=32){if(qr&&typeof qr.getRandomValues=="function")return qr.getRandomValues(new Uint8Array(n));if(qr&&typeof qr.randomBytes=="function")return qr.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function Vc(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),u=Number(e&i),f=r?4:0,w=r?0:4;n.setUint32(t+f,o,r),n.setUint32(t+w,u,r)}const Gc=(n,t,e)=>n&t^~n&e,jc=(n,t,e)=>n&t^n&e^t&e;class Ko extends us{constructor(t,e,r,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ri(this.buffer)}update(t){Yr(this);const{view:e,buffer:r,blockLen:s}=this;t=Hn(t);const i=t.length;for(let o=0;o<i;){const u=Math.min(s-this.pos,i-o);if(u===s){const f=Ri(t);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(t.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Yr(this),No(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let I=o;I<s;I++)e[I]=0;Vc(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=Ri(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=f/4,p=this.get();if(w>p.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<w;I++)u.setUint32(4*I,p[I],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:u}=this;return t.length=s,t.pos=u,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(r),t}}const An=BigInt(2**32-1),Gi=BigInt(32);function Fo(n,t=!1){return t?{h:Number(n&An),l:Number(n>>Gi&An)}:{h:Number(n>>Gi&An)|0,l:Number(n&An)|0}}function Wo(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=Fo(n[s],t);[e[s],r[s]]=[i,o]}return[e,r]}const Yc=(n,t)=>BigInt(n>>>0)<<Gi|BigInt(t>>>0),Zc=(n,t,e)=>n>>>e,Jc=(n,t,e)=>n<<32-e|t>>>e,Xc=(n,t,e)=>n>>>e|t<<32-e,Qc=(n,t,e)=>n<<32-e|t>>>e,tu=(n,t,e)=>n<<64-e|t>>>e-32,eu=(n,t,e)=>n>>>e-32|t<<64-e,ru=(n,t)=>t,nu=(n,t)=>n,qo=(n,t,e)=>n<<e|t>>>32-e,Do=(n,t,e)=>t<<e|n>>>32-e,$o=(n,t,e)=>t<<e-32|n>>>64-e,Ho=(n,t,e)=>n<<e-32|t>>>64-e;function iu(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const su=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),ou=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,au=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),cu=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,uu=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),lu=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,yt={fromBig:Fo,split:Wo,toBig:Yc,shrSH:Zc,shrSL:Jc,rotrSH:Xc,rotrSL:Qc,rotrBH:tu,rotrBL:eu,rotr32H:ru,rotr32L:nu,rotlSH:qo,rotlSL:Do,rotlBH:$o,rotlBL:Ho,add:iu,add3L:su,add3H:ou,add4L:au,add4H:cu,add5H:lu,add5L:uu},[hu,fu]=yt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),mr=new Uint32Array(80),wr=new Uint32Array(80);class du extends Ko{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:u,Dl:f,Eh:w,El:p,Fh:I,Fl:B,Gh:_,Gl:P,Hh:M,Hl:x}=this;return[t,e,r,s,i,o,u,f,w,p,I,B,_,P,M,x]}set(t,e,r,s,i,o,u,f,w,p,I,B,_,P,M,x){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=u|0,this.Dl=f|0,this.Eh=w|0,this.El=p|0,this.Fh=I|0,this.Fl=B|0,this.Gh=_|0,this.Gl=P|0,this.Hh=M|0,this.Hl=x|0}process(t,e){for(let O=0;O<16;O++,e+=4)mr[O]=t.getUint32(e),wr[O]=t.getUint32(e+=4);for(let O=16;O<80;O++){const q=mr[O-15]|0,Z=wr[O-15]|0,$=yt.rotrSH(q,Z,1)^yt.rotrSH(q,Z,8)^yt.shrSH(q,Z,7),G=yt.rotrSL(q,Z,1)^yt.rotrSL(q,Z,8)^yt.shrSL(q,Z,7),J=mr[O-2]|0,nt=wr[O-2]|0,Ut=yt.rotrSH(J,nt,19)^yt.rotrBH(J,nt,61)^yt.shrSH(J,nt,6),it=yt.rotrSL(J,nt,19)^yt.rotrBL(J,nt,61)^yt.shrSL(J,nt,6),ut=yt.add4L(G,it,wr[O-7],wr[O-16]),A=yt.add4H(ut,$,Ut,mr[O-7],mr[O-16]);mr[O]=A|0,wr[O]=ut|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:u,Cl:f,Dh:w,Dl:p,Eh:I,El:B,Fh:_,Fl:P,Gh:M,Gl:x,Hh:U,Hl:K}=this;for(let O=0;O<80;O++){const q=yt.rotrSH(I,B,14)^yt.rotrSH(I,B,18)^yt.rotrBH(I,B,41),Z=yt.rotrSL(I,B,14)^yt.rotrSL(I,B,18)^yt.rotrBL(I,B,41),$=I&_^~I&M,G=B&P^~B&x,J=yt.add5L(K,Z,G,fu[O],wr[O]),nt=yt.add5H(J,U,q,$,hu[O],mr[O]),Ut=J|0,it=yt.rotrSH(r,s,28)^yt.rotrBH(r,s,34)^yt.rotrBH(r,s,39),ut=yt.rotrSL(r,s,28)^yt.rotrBL(r,s,34)^yt.rotrBL(r,s,39),A=r&i^r&u^i&u,a=s&o^s&f^o&f;U=M|0,K=x|0,M=_|0,x=P|0,_=I|0,P=B|0,{h:I,l:B}=yt.add(w|0,p|0,nt|0,Ut|0),w=u|0,p=f|0,u=i|0,f=o|0,i=r|0,o=s|0;const d=yt.add3L(Ut,ut,a);r=yt.add3H(d,nt,it,A),s=d|0}({h:r,l:s}=yt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=yt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:u,l:f}=yt.add(this.Ch|0,this.Cl|0,u|0,f|0),{h:w,l:p}=yt.add(this.Dh|0,this.Dl|0,w|0,p|0),{h:I,l:B}=yt.add(this.Eh|0,this.El|0,I|0,B|0),{h:_,l:P}=yt.add(this.Fh|0,this.Fl|0,_|0,P|0),{h:M,l:x}=yt.add(this.Gh|0,this.Gl|0,M|0,x|0),{h:U,l:K}=yt.add(this.Hh|0,this.Hl|0,U|0,K|0),this.set(r,s,i,o,u,f,w,p,I,B,_,P,M,x,U,K)}roundClean(){mr.fill(0),wr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const pu=ls(()=>new du);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hs=BigInt(0),Vn=BigInt(1),gu=BigInt(2);function Tr(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function kn(n){if(!Tr(n))throw new Error("Uint8Array expected")}function gr(n,t){if(typeof t!="boolean")throw new Error(`${n} must be valid boolean, got "${t}".`)}const yu=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Pr(n){kn(n);let t="";for(let e=0;e<n.length;e++)t+=yu[n[e]];return t}function $r(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function fs(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const ur={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function to(n){if(n>=ur._0&&n<=ur._9)return n-ur._0;if(n>=ur._A&&n<=ur._F)return n-(ur._A-10);if(n>=ur._a&&n<=ur._f)return n-(ur._a-10)}function Zr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=to(n.charCodeAt(i)),u=to(n.charCodeAt(i+1));if(o===void 0||u===void 0){const f=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}r[s]=o*16+u}return r}function Mr(n){return fs(Pr(n))}function Vr(n){return kn(n),fs(Pr(Uint8Array.from(n).reverse()))}function Jr(n,t){return Zr(n.toString(16).padStart(t*2,"0"))}function fn(n,t){return Jr(n,t).reverse()}function mu(n){return Zr($r(n))}function pe(n,t,e){let r;if(typeof t=="string")try{r=Zr(t)}catch(i){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Tr(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(`${n} expected ${e} bytes, got ${s}`);return r}function Lr(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];kn(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}function wu(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}function bu(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}const Mi=n=>typeof n=="bigint"&&hs<=n;function Gn(n,t,e){return Mi(n)&&Mi(t)&&Mi(e)&&t<=n&&n<e}function $e(n,t,e,r){if(!Gn(t,e,r))throw new Error(`expected valid ${n}: ${e} <= n < ${r}, got ${typeof t} ${t}`)}function Vo(n){let t;for(t=0;n>hs;n>>=Vn,t+=1);return t}function ku(n,t){return n>>BigInt(t)&Vn}function vu(n,t,e){return n|(e?Vn:hs)<<BigInt(t)}const ds=n=>(gu<<BigInt(n-1))-Vn,Ti=n=>new Uint8Array(n),eo=n=>Uint8Array.from(n);function Go(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Ti(n),s=Ti(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},u=(...I)=>e(s,r,...I),f=(I=Ti())=>{s=u(eo([0]),I),r=u(),I.length!==0&&(s=u(eo([1]),I),r=u())},w=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let I=0;const B=[];for(;I<t;){r=u();const _=r.slice();B.push(_),I+=r.length}return Lr(...B)};return(I,B)=>{o(),f(I);let _;for(;!(_=B(w()));)f();return o(),_}}const Su={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Tr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function en(n,t,e={}){const r=(s,i,o)=>{const u=Su[i];if(typeof u!="function")throw new Error(`Invalid validator "${i}", expected function`);const f=n[s];if(!(o&&f===void 0)&&!u(f,n))throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${i}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(e))r(s,i,!0);return n}const Iu=()=>{throw new Error("not implemented")};function dn(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}const Eu=Object.freeze(Object.defineProperty({__proto__:null,aInRange:$e,abool:gr,abytes:kn,bitGet:ku,bitLen:Vo,bitMask:ds,bitSet:vu,bytesToHex:Pr,bytesToNumberBE:Mr,bytesToNumberLE:Vr,concatBytes:Lr,createHmacDrbg:Go,ensureBytes:pe,equalBytes:wu,hexToBytes:Zr,hexToNumber:fs,inRange:Gn,isBytes:Tr,memoized:dn,notImplemented:Iu,numberToBytesBE:Jr,numberToBytesLE:fn,numberToHexUnpadded:$r,numberToVarBytesBE:mu,utf8ToBytes:bu,validateObject:en},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ke=BigInt(0),Gt=BigInt(1),xr=BigInt(2),xu=BigInt(3),ji=BigInt(4),ro=BigInt(5),no=BigInt(8);BigInt(9);BigInt(16);function Ht(n,t){const e=n%t;return e>=ke?e:t+e}function Au(n,t,e){if(e<=ke||t<ke)throw new Error("Expected power/modulo > 0");if(e===Gt)return ke;let r=Gt;for(;t>ke;)t&Gt&&(r=r*n%e),n=n*n%e,t>>=Gt;return r}function Yt(n,t,e){let r=n;for(;t-- >ke;)r*=r,r%=e;return r}function Yi(n,t){if(n===ke||t<=ke)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=Ht(n,t),r=t,s=ke,i=Gt;for(;e!==ke;){const u=r/e,f=r%e,w=s-i*u;r=e,e=f,s=i,i=w}if(r!==Gt)throw new Error("invert: does not exist");return Ht(s,t)}function _u(n){const t=(n-Gt)/xr;let e,r,s;for(e=n-Gt,r=0;e%xr===ke;e/=xr,r++);for(s=xr;s<n&&Au(s,t,n)!==n-Gt;s++);if(r===1){const o=(n+Gt)/ji;return function(f,w){const p=f.pow(w,o);if(!f.eql(f.sqr(p),w))throw new Error("Cannot find square root");return p}}const i=(e+Gt)/xr;return function(u,f){if(u.pow(f,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let w=r,p=u.pow(u.mul(u.ONE,s),e),I=u.pow(f,i),B=u.pow(f,e);for(;!u.eql(B,u.ONE);){if(u.eql(B,u.ZERO))return u.ZERO;let _=1;for(let M=u.sqr(B);_<w&&!u.eql(M,u.ONE);_++)M=u.sqr(M);const P=u.pow(p,Gt<<BigInt(w-_-1));p=u.sqr(P),I=u.mul(I,P),B=u.mul(B,p),w=_}return I}}function Bu(n){if(n%ji===xu){const t=(n+Gt)/ji;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%no===ro){const t=(n-ro)/no;return function(r,s){const i=r.mul(s,xr),o=r.pow(i,t),u=r.mul(s,o),f=r.mul(r.mul(u,xr),o),w=r.mul(u,r.sub(f,r.ONE));if(!r.eql(r.sqr(w),s))throw new Error("Cannot find square root");return w}}return _u(n)}const Ru=(n,t)=>(Ht(n,t)&Gt)===Gt,Mu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Tu(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Mu.reduce((r,s)=>(r[s]="function",r),t);return en(n,e)}function Pu(n,t,e){if(e<ke)throw new Error("Expected power > 0");if(e===ke)return n.ONE;if(e===Gt)return t;let r=n.ONE,s=t;for(;e>ke;)e&Gt&&(r=n.mul(r,s)),s=n.sqr(s),e>>=Gt;return r}function Lu(n,t){const e=new Array(t.length),r=t.reduce((i,o,u)=>n.is0(o)?i:(e[u]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return t.reduceRight((i,o,u)=>n.is0(o)?i:(e[u]=n.mul(i,e[u]),n.mul(i,o)),s),e}function jo(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function jn(n,t,e=!1,r={}){if(n<=ke)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:i}=jo(n,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Bu(n),u=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:ds(s),ZERO:ke,ONE:Gt,create:f=>Ht(f,n),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return ke<=f&&f<n},is0:f=>f===ke,isOdd:f=>(f&Gt)===Gt,neg:f=>Ht(-f,n),eql:(f,w)=>f===w,sqr:f=>Ht(f*f,n),add:(f,w)=>Ht(f+w,n),sub:(f,w)=>Ht(f-w,n),mul:(f,w)=>Ht(f*w,n),pow:(f,w)=>Pu(u,f,w),div:(f,w)=>Ht(f*Yi(w,n),n),sqrN:f=>f*f,addN:(f,w)=>f+w,subN:(f,w)=>f-w,mulN:(f,w)=>f*w,inv:f=>Yi(f,n),sqrt:r.sqrt||(f=>o(u,f)),invertBatch:f=>Lu(u,f),cmov:(f,w,p)=>p?w:f,toBytes:f=>e?fn(f,i):Jr(f,i),fromBytes:f=>{if(f.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);return e?Vr(f):Mr(f)}});return Object.freeze(u)}function Yo(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Zo(n){const t=Yo(n);return t+Math.ceil(t/2)}function Cu(n,t,e=!1){const r=n.length,s=Yo(t),i=Zo(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=e?Mr(n):Vr(n),u=Ht(o,t-Gt)+Gt;return e?fn(u,s):Jr(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uu=BigInt(0),Pi=BigInt(1),Li=new WeakMap,io=new WeakMap;function Jo(n,t){const e=(i,o)=>{const u=o.negate();return i?u:o},r=i=>{if(!Number.isSafeInteger(i)||i<=0||i>t)throw new Error(`Wrong window size=${i}, should be [1..${t}]`)},s=i=>{r(i);const o=Math.ceil(t/i)+1,u=2**(i-1);return{windows:o,windowSize:u}};return{constTimeNegate:e,unsafeLadder(i,o){let u=n.ZERO,f=i;for(;o>Uu;)o&Pi&&(u=u.add(f)),f=f.double(),o>>=Pi;return u},precomputeWindow(i,o){const{windows:u,windowSize:f}=s(o),w=[];let p=i,I=p;for(let B=0;B<u;B++){I=p,w.push(I);for(let _=1;_<f;_++)I=I.add(p),w.push(I);p=I.double()}return w},wNAF(i,o,u){const{windows:f,windowSize:w}=s(i);let p=n.ZERO,I=n.BASE;const B=BigInt(2**i-1),_=2**i,P=BigInt(i);for(let M=0;M<f;M++){const x=M*w;let U=Number(u&B);u>>=P,U>w&&(U-=_,u+=Pi);const K=x,O=x+Math.abs(U)-1,q=M%2!==0,Z=U<0;U===0?I=I.add(e(q,o[K])):p=p.add(e(Z,o[O]))}return{p,f:I}},wNAFCached(i,o,u){const f=io.get(i)||1;let w=Li.get(i);return w||(w=this.precomputeWindow(i,f),f!==1&&Li.set(i,u(w))),this.wNAF(f,w,o)},setWindowSize(i,o){r(o),io.set(i,o),Li.delete(i)}}}function Xo(n,t,e,r){if(!Array.isArray(e)||!Array.isArray(r)||r.length!==e.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((p,I)=>{if(!t.isValid(p))throw new Error(`wrong scalar at index ${I}`)}),e.forEach((p,I)=>{if(!(p instanceof n))throw new Error(`wrong point at index ${I}`)});const s=Vo(BigInt(e.length)),i=s>12?s-3:s>4?s-2:s?2:1,o=(1<<i)-1,u=new Array(o+1).fill(n.ZERO),f=Math.floor((t.BITS-1)/i)*i;let w=n.ZERO;for(let p=f;p>=0;p-=i){u.fill(n.ZERO);for(let B=0;B<r.length;B++){const _=r[B],P=Number(_>>BigInt(p)&BigInt(o));u[P]=u[P].add(e[B])}let I=n.ZERO;for(let B=u.length-1,_=n.ZERO;B>0;B--)_=_.add(u[B]),I=I.add(_);if(w=w.add(I),p!==0)for(let B=0;B<i;B++)w=w.double()}return w}function ps(n){return Tu(n.Fp),en(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jo(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ge=BigInt(0),Ce=BigInt(1),_n=BigInt(2),Ou=BigInt(8),Nu={zip215:!0};function zu(n){const t=ps(n);return en(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Ku(n){const t=zu(n),{Fp:e,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:u,h:f}=t,w=_n<<BigInt(u*8)-Ce,p=e.create,I=jn(t.n,t.nBitLength),B=t.uvRatio||((g,m)=>{try{return{isValid:!0,value:e.sqrt(g*e.inv(m))}}catch{return{isValid:!1,value:Ge}}}),_=t.adjustScalarBytes||(g=>g),P=t.domain||((g,m,b)=>{if(gr("phflag",b),m.length||b)throw new Error("Contexts/pre-hash are not supported");return g});function M(g,m){$e("coordinate "+g,m,Ge,w)}function x(g){if(!(g instanceof O))throw new Error("ExtendedPoint expected")}const U=dn((g,m)=>{const{ex:b,ey:E,ez:R}=g,k=g.is0();m==null&&(m=k?Ou:e.inv(R));const h=p(b*m),S=p(E*m),W=p(R*m);if(k)return{x:Ge,y:Ce};if(W!==Ce)throw new Error("invZ was invalid");return{x:h,y:S}}),K=dn(g=>{const{a:m,d:b}=t;if(g.is0())throw new Error("bad point: ZERO");const{ex:E,ey:R,ez:k,et:h}=g,S=p(E*E),W=p(R*R),D=p(k*k),X=p(D*D),bt=p(S*m),ct=p(D*p(bt+W)),ht=p(X+p(b*p(S*W)));if(ct!==ht)throw new Error("bad point: equation left != right (1)");const Jt=p(E*R),dt=p(k*h);if(Jt!==dt)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(m,b,E,R){this.ex=m,this.ey=b,this.ez=E,this.et=R,M("x",m),M("y",b),M("z",E),M("t",R),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof O)throw new Error("extended point not allowed");const{x:b,y:E}=m||{};return M("x",b),M("y",E),new O(b,E,Ce,p(b*E))}static normalizeZ(m){const b=e.invertBatch(m.map(E=>E.ez));return m.map((E,R)=>E.toAffine(b[R])).map(O.fromAffine)}static msm(m,b){return Xo(O,I,m,b)}_setWindowSize(m){$.setWindowSize(this,m)}assertValidity(){K(this)}equals(m){x(m);const{ex:b,ey:E,ez:R}=this,{ex:k,ey:h,ez:S}=m,W=p(b*S),D=p(k*R),X=p(E*S),bt=p(h*R);return W===D&&X===bt}is0(){return this.equals(O.ZERO)}negate(){return new O(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:m}=t,{ex:b,ey:E,ez:R}=this,k=p(b*b),h=p(E*E),S=p(_n*p(R*R)),W=p(m*k),D=b+E,X=p(p(D*D)-k-h),bt=W+h,ct=bt-S,ht=W-h,Jt=p(X*ct),dt=p(bt*ht),ft=p(X*ht),ve=p(ct*bt);return new O(Jt,dt,ve,ft)}add(m){x(m);const{a:b,d:E}=t,{ex:R,ey:k,ez:h,et:S}=this,{ex:W,ey:D,ez:X,et:bt}=m;if(b===BigInt(-1)){const Pt=p((k-R)*(D+W)),Kt=p((k+R)*(D-W)),yr=p(Kt-Pt);if(yr===Ge)return this.double();const Ot=p(h*_n*bt),Tt=p(S*_n*X),_e=Tt+Ot,Lt=Kt+Pt,Ft=Tt-Ot,ze=p(_e*yr),$t=p(Lt*Ft),y=p(_e*Ft),c=p(yr*Lt);return new O(ze,$t,c,y)}const ct=p(R*W),ht=p(k*D),Jt=p(S*E*bt),dt=p(h*X),ft=p((R+k)*(W+D)-ct-ht),ve=dt-Jt,Rt=dt+Jt,_t=p(ht-b*ct),Ve=p(ft*ve),Mt=p(Rt*_t),Dt=p(ft*_t),Fr=p(ve*Rt);return new O(Ve,Mt,Fr,Dt)}subtract(m){return this.add(m.negate())}wNAF(m){return $.wNAFCached(this,m,O.normalizeZ)}multiply(m){const b=m;$e("scalar",b,Ce,r);const{p:E,f:R}=this.wNAF(b);return O.normalizeZ([E,R])[0]}multiplyUnsafe(m){const b=m;return $e("scalar",b,Ge,r),b===Ge?Z:this.equals(Z)||b===Ce?this:this.equals(q)?this.wNAF(b).p:$.unsafeLadder(this,b)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return $.unsafeLadder(this,r).is0()}toAffine(m){return U(this,m)}clearCofactor(){const{h:m}=t;return m===Ce?this:this.multiplyUnsafe(m)}static fromHex(m,b=!1){const{d:E,a:R}=t,k=e.BYTES;m=pe("pointHex",m,k),gr("zip215",b);const h=m.slice(),S=m[k-1];h[k-1]=S&-129;const W=Vr(h),D=b?w:e.ORDER;$e("pointHex.y",W,Ge,D);const X=p(W*W),bt=p(X-Ce),ct=p(E*X-R);let{isValid:ht,value:Jt}=B(bt,ct);if(!ht)throw new Error("Point.fromHex: invalid y coordinate");const dt=(Jt&Ce)===Ce,ft=(S&128)!==0;if(!b&&Jt===Ge&&ft)throw new Error("Point.fromHex: x=0 and x_0=1");return ft!==dt&&(Jt=p(-Jt)),O.fromAffine({x:Jt,y:W})}static fromPrivateKey(m){return nt(m).point}toRawBytes(){const{x:m,y:b}=this.toAffine(),E=fn(b,e.BYTES);return E[E.length-1]|=m&Ce?128:0,E}toHex(){return Pr(this.toRawBytes())}}O.BASE=new O(t.Gx,t.Gy,Ce,p(t.Gx*t.Gy)),O.ZERO=new O(Ge,Ce,Ce,Ge);const{BASE:q,ZERO:Z}=O,$=Jo(O,u*8);function G(g){return Ht(g,r)}function J(g){return G(Vr(g))}function nt(g){const m=u;g=pe("private key",g,m);const b=pe("hashed private key",i(g),2*m),E=_(b.slice(0,m)),R=b.slice(m,2*m),k=J(E),h=q.multiply(k),S=h.toRawBytes();return{head:E,prefix:R,scalar:k,point:h,pointBytes:S}}function Ut(g){return nt(g).pointBytes}function it(g=new Uint8Array,...m){const b=Lr(...m);return J(i(P(b,pe("context",g),!!s)))}function ut(g,m,b={}){g=pe("message",g),s&&(g=s(g));const{prefix:E,scalar:R,pointBytes:k}=nt(m),h=it(b.context,E,g),S=q.multiply(h).toRawBytes(),W=it(b.context,S,k,g),D=G(h+W*R);$e("signature.s",D,Ge,r);const X=Lr(S,fn(D,e.BYTES));return pe("result",X,u*2)}const A=Nu;function a(g,m,b,E=A){const{context:R,zip215:k}=E,h=e.BYTES;g=pe("signature",g,2*h),m=pe("message",m),k!==void 0&&gr("zip215",k),s&&(m=s(m));const S=Vr(g.slice(h,2*h));let W,D,X;try{W=O.fromHex(b,k),D=O.fromHex(g.slice(0,h),k),X=q.multiplyUnsafe(S)}catch{return!1}if(!k&&W.isSmallOrder())return!1;const bt=it(R,D.toRawBytes(),W.toRawBytes(),m);return D.add(W.multiplyUnsafe(bt)).subtract(X).clearCofactor().equals(O.ZERO)}return q._setWindowSize(8),{CURVE:t,getPublicKey:Ut,sign:ut,verify:a,ExtendedPoint:O,utils:{getExtendedPublicKey:nt,randomPrivateKey:()=>o(e.BYTES),precompute(g=8,m=O.BASE){return m._setWindowSize(g),m.multiply(BigInt(3)),m}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gs=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),so=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Fu=BigInt(1),oo=BigInt(2);BigInt(3);const Wu=BigInt(5),qu=BigInt(8);function Du(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=gs,u=n*n%i*n%i,f=Yt(u,oo,i)*u%i,w=Yt(f,Fu,i)*n%i,p=Yt(w,Wu,i)*w%i,I=Yt(p,t,i)*p%i,B=Yt(I,e,i)*I%i,_=Yt(B,r,i)*B%i,P=Yt(_,s,i)*_%i,M=Yt(P,s,i)*_%i,x=Yt(M,t,i)*p%i;return{pow_p_5_8:Yt(x,oo,i)*n%i,b2:u}}function $u(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Hu(n,t){const e=gs,r=Ht(t*t*t,e),s=Ht(r*r*t,e),i=Du(n*s).pow_p_5_8;let o=Ht(n*r*i,e);const u=Ht(t*o*o,e),f=o,w=Ht(o*so,e),p=u===n,I=u===Ht(-n,e),B=u===Ht(-n*so,e);return p&&(o=f),(I||B)&&(o=w),Ru(o,e)&&(o=Ht(-o,e)),{isValid:p||I,value:o}}const Vu=jn(gs,void 0,!0),Gu={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Vu,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:qu,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:pu,randomBytes:zo,adjustScalarBytes:$u,uvRatio:Hu},rn=Ku(Gu);var ys={exports:{}};const ms=as(Kc);ys.exports;(function(n){(function(t,e){function r(A,a){if(!A)throw new Error(a||"Assertion failed")}function s(A,a){A.super_=a;var d=function(){};d.prototype=a.prototype,A.prototype=new d,A.prototype.constructor=A}function i(A,a,d){if(i.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((a==="le"||a==="be")&&(d=a,a=10),this._init(A||0,a||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=ms.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,d){return a.cmp(d)>0?a:d},i.min=function(a,d){return a.cmp(d)<0?a:d},i.prototype._init=function(a,d,g){if(typeof a=="number")return this._initNumber(a,d,g);if(typeof a=="object")return this._initArray(a,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),a=a.toString().replace(/\s+/g,"");var m=0;a[0]==="-"&&(m++,this.negative=1),m<a.length&&(d===16?this._parseHex(a,m,g):(this._parseBase(a,d,m),g==="le"&&this._initArray(this.toArray(),d,g)))},i.prototype._initNumber=function(a,d,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},i.prototype._initArray=function(a,d,g){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b,E,R=0;if(g==="be")for(m=a.length-1,b=0;m>=0;m-=3)E=a[m]|a[m-1]<<8|a[m-2]<<16,this.words[b]|=E<<R&67108863,this.words[b+1]=E>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(g==="le")for(m=0,b=0;m<a.length;m+=3)E=a[m]|a[m+1]<<8|a[m+2]<<16,this.words[b]|=E<<R&67108863,this.words[b+1]=E>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this._strip()};function u(A,a){var d=A.charCodeAt(a);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;r(!1,"Invalid character in "+A)}function f(A,a,d){var g=u(A,d);return d-1>=a&&(g|=u(A,d-1)<<4),g}i.prototype._parseHex=function(a,d,g){this.length=Math.ceil((a.length-d)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var b=0,E=0,R;if(g==="be")for(m=a.length-1;m>=d;m-=2)R=f(a,d,m)<<b,this.words[E]|=R&67108863,b>=18?(b-=18,E+=1,this.words[E]|=R>>>26):b+=8;else{var k=a.length-d;for(m=k%2===0?d+1:d;m<a.length;m+=2)R=f(a,d,m)<<b,this.words[E]|=R&67108863,b>=18?(b-=18,E+=1,this.words[E]|=R>>>26):b+=8}this._strip()};function w(A,a,d,g){for(var m=0,b=0,E=Math.min(A.length,d),R=a;R<E;R++){var k=A.charCodeAt(R)-48;m*=g,k>=49?b=k-49+10:k>=17?b=k-17+10:b=k,r(k>=0&&b<g,"Invalid character"),m+=b}return m}i.prototype._parseBase=function(a,d,g){this.words=[0],this.length=1;for(var m=0,b=1;b<=67108863;b*=d)m++;m--,b=b/d|0;for(var E=a.length-g,R=E%m,k=Math.min(E,E-R)+g,h=0,S=g;S<k;S+=m)h=w(a,S,S+m,d),this.imuln(b),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(R!==0){var W=1;for(h=w(a,S,a.length,d),S=0;S<R;S++)W*=d;this.imuln(W),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var d=0;d<this.length;d++)a.words[d]=this.words[d];a.length=this.length,a.negative=this.negative,a.red=this.red};function p(A,a){A.words=a.words,A.length=a.length,A.negative=a.negative,A.red=a.red}if(i.prototype._move=function(a){p(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{i.prototype.inspect=I}else i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,d){a=a||10,d=d|0||1;var g;if(a===16||a==="hex"){g="";for(var m=0,b=0,E=0;E<this.length;E++){var R=this.words[E],k=((R<<m|b)&16777215).toString(16);b=R>>>24-m&16777215,m+=2,m>=26&&(m-=26,E--),b!==0||E!==this.length-1?g=B[6-k.length]+k+g:g=k+g}for(b!==0&&(g=b.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var h=_[a],S=P[a];g="";var W=this.clone();for(W.negative=0;!W.isZero();){var D=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?g=D+g:g=B[h-D.length]+D+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,d){return this.toArrayLike(o,a,d)}),i.prototype.toArray=function(a,d){return this.toArrayLike(Array,a,d)};var M=function(a,d){return a.allocUnsafe?a.allocUnsafe(d):new a(d)};i.prototype.toArrayLike=function(a,d,g){this._strip();var m=this.byteLength(),b=g||Math.max(1,m);r(m<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0");var E=M(a,b),R=d==="le"?"LE":"BE";return this["_toArrayLike"+R](E,m),E},i.prototype._toArrayLikeLE=function(a,d){for(var g=0,m=0,b=0,E=0;b<this.length;b++){var R=this.words[b]<<E|m;a[g++]=R&255,g<a.length&&(a[g++]=R>>8&255),g<a.length&&(a[g++]=R>>16&255),E===6?(g<a.length&&(a[g++]=R>>24&255),m=0,E=0):(m=R>>>24,E+=2)}if(g<a.length)for(a[g++]=m;g<a.length;)a[g++]=0},i.prototype._toArrayLikeBE=function(a,d){for(var g=a.length-1,m=0,b=0,E=0;b<this.length;b++){var R=this.words[b]<<E|m;a[g--]=R&255,g>=0&&(a[g--]=R>>8&255),g>=0&&(a[g--]=R>>16&255),E===6?(g>=0&&(a[g--]=R>>24&255),m=0,E=0):(m=R>>>24,E+=2)}if(g>=0)for(a[g--]=m;g>=0;)a[g--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var d=a,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},i.prototype._zeroBits=function(a){if(a===0)return 26;var d=a,g=0;return d&8191||(g+=13,d>>>=13),d&127||(g+=7,d>>>=7),d&15||(g+=4,d>>>=4),d&3||(g+=2,d>>>=2),d&1||g++,g},i.prototype.bitLength=function(){var a=this.words[this.length-1],d=this._countBits(a);return(this.length-1)*26+d};function x(A){for(var a=new Array(A.bitLength()),d=0;d<a.length;d++){var g=d/26|0,m=d%26;a[d]=A.words[g]>>>m&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(a+=g,g!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var d=0;d<a.length;d++)this.words[d]=this.words[d]|a.words[d];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var d;this.length>a.length?d=a:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=d.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var d,g;this.length>a.length?(d=this,g=a):(d=a,g=this);for(var m=0;m<g.length;m++)this.words[m]=d.words[m]^g.words[m];if(this!==d)for(;m<d.length;m++)this.words[m]=d.words[m];return this.length=d.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var d=Math.ceil(a/26)|0,g=a%26;this._expand(d),g>0&&d--;for(var m=0;m<d;m++)this.words[m]=~this.words[m]&67108863;return g>0&&(this.words[m]=~this.words[m]&67108863>>26-g),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,d){r(typeof a=="number"&&a>=0);var g=a/26|0,m=a%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<m:this.words[g]=this.words[g]&~(1<<m),this._strip()},i.prototype.iadd=function(a){var d;if(this.negative!==0&&a.negative===0)return this.negative=0,d=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,d=this.isub(a),a.negative=1,d._normSign();var g,m;this.length>a.length?(g=this,m=a):(g=a,m=this);for(var b=0,E=0;E<m.length;E++)d=(g.words[E]|0)+(m.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;for(;b!==0&&E<g.length;E++)d=(g.words[E]|0)+b,this.words[E]=d&67108863,b=d>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this},i.prototype.add=function(a){var d;return a.negative!==0&&this.negative===0?(a.negative=0,d=this.sub(a),a.negative^=1,d):a.negative===0&&this.negative!==0?(this.negative=0,d=a.sub(this),this.negative=1,d):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var d=this.iadd(a);return a.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,b;g>0?(m=this,b=a):(m=a,b=this);for(var E=0,R=0;R<b.length;R++)d=(m.words[R]|0)-(b.words[R]|0)+E,E=d>>26,this.words[R]=d&67108863;for(;E!==0&&R<m.length;R++)d=(m.words[R]|0)+E,E=d>>26,this.words[R]=d&67108863;if(E===0&&R<m.length&&m!==this)for(;R<m.length;R++)this.words[R]=m.words[R];return this.length=Math.max(this.length,R),m!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function U(A,a,d){d.negative=a.negative^A.negative;var g=A.length+a.length|0;d.length=g,g=g-1|0;var m=A.words[0]|0,b=a.words[0]|0,E=m*b,R=E&67108863,k=E/67108864|0;d.words[0]=R;for(var h=1;h<g;h++){for(var S=k>>>26,W=k&67108863,D=Math.min(h,a.length-1),X=Math.max(0,h-A.length+1);X<=D;X++){var bt=h-X|0;m=A.words[bt]|0,b=a.words[X]|0,E=m*b+W,S+=E/67108864|0,W=E&67108863}d.words[h]=W|0,k=S|0}return k!==0?d.words[h]=k|0:d.length--,d._strip()}var K=function(a,d,g){var m=a.words,b=d.words,E=g.words,R=0,k,h,S,W=m[0]|0,D=W&8191,X=W>>>13,bt=m[1]|0,ct=bt&8191,ht=bt>>>13,Jt=m[2]|0,dt=Jt&8191,ft=Jt>>>13,ve=m[3]|0,Rt=ve&8191,_t=ve>>>13,Ve=m[4]|0,Mt=Ve&8191,Dt=Ve>>>13,Fr=m[5]|0,Pt=Fr&8191,Kt=Fr>>>13,yr=m[6]|0,Ot=yr&8191,Tt=yr>>>13,_e=m[7]|0,Lt=_e&8191,Ft=_e>>>13,ze=m[8]|0,$t=ze&8191,y=ze>>>13,c=m[9]|0,l=c&8191,v=c>>>13,T=b[0]|0,L=T&8191,z=T>>>13,gt=b[1]|0,pt=gt&8191,lt=gt>>>13,Wt=b[2]|0,at=Wt&8191,Xt=Wt>>>13,Hs=b[3]|0,Qt=Hs&8191,te=Hs>>>13,Vs=b[4]|0,ee=Vs&8191,re=Vs>>>13,Gs=b[5]|0,ne=Gs&8191,ie=Gs>>>13,js=b[6]|0,se=js&8191,oe=js>>>13,Ys=b[7]|0,ae=Ys&8191,ce=Ys>>>13,Zs=b[8]|0,ue=Zs&8191,le=Zs>>>13,Js=b[9]|0,he=Js&8191,fe=Js>>>13;g.negative=a.negative^d.negative,g.length=19,k=Math.imul(D,L),h=Math.imul(D,z),h=h+Math.imul(X,L)|0,S=Math.imul(X,z);var ui=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(ui>>>26)|0,ui&=67108863,k=Math.imul(ct,L),h=Math.imul(ct,z),h=h+Math.imul(ht,L)|0,S=Math.imul(ht,z),k=k+Math.imul(D,pt)|0,h=h+Math.imul(D,lt)|0,h=h+Math.imul(X,pt)|0,S=S+Math.imul(X,lt)|0;var li=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(li>>>26)|0,li&=67108863,k=Math.imul(dt,L),h=Math.imul(dt,z),h=h+Math.imul(ft,L)|0,S=Math.imul(ft,z),k=k+Math.imul(ct,pt)|0,h=h+Math.imul(ct,lt)|0,h=h+Math.imul(ht,pt)|0,S=S+Math.imul(ht,lt)|0,k=k+Math.imul(D,at)|0,h=h+Math.imul(D,Xt)|0,h=h+Math.imul(X,at)|0,S=S+Math.imul(X,Xt)|0;var hi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(hi>>>26)|0,hi&=67108863,k=Math.imul(Rt,L),h=Math.imul(Rt,z),h=h+Math.imul(_t,L)|0,S=Math.imul(_t,z),k=k+Math.imul(dt,pt)|0,h=h+Math.imul(dt,lt)|0,h=h+Math.imul(ft,pt)|0,S=S+Math.imul(ft,lt)|0,k=k+Math.imul(ct,at)|0,h=h+Math.imul(ct,Xt)|0,h=h+Math.imul(ht,at)|0,S=S+Math.imul(ht,Xt)|0,k=k+Math.imul(D,Qt)|0,h=h+Math.imul(D,te)|0,h=h+Math.imul(X,Qt)|0,S=S+Math.imul(X,te)|0;var fi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(fi>>>26)|0,fi&=67108863,k=Math.imul(Mt,L),h=Math.imul(Mt,z),h=h+Math.imul(Dt,L)|0,S=Math.imul(Dt,z),k=k+Math.imul(Rt,pt)|0,h=h+Math.imul(Rt,lt)|0,h=h+Math.imul(_t,pt)|0,S=S+Math.imul(_t,lt)|0,k=k+Math.imul(dt,at)|0,h=h+Math.imul(dt,Xt)|0,h=h+Math.imul(ft,at)|0,S=S+Math.imul(ft,Xt)|0,k=k+Math.imul(ct,Qt)|0,h=h+Math.imul(ct,te)|0,h=h+Math.imul(ht,Qt)|0,S=S+Math.imul(ht,te)|0,k=k+Math.imul(D,ee)|0,h=h+Math.imul(D,re)|0,h=h+Math.imul(X,ee)|0,S=S+Math.imul(X,re)|0;var di=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(di>>>26)|0,di&=67108863,k=Math.imul(Pt,L),h=Math.imul(Pt,z),h=h+Math.imul(Kt,L)|0,S=Math.imul(Kt,z),k=k+Math.imul(Mt,pt)|0,h=h+Math.imul(Mt,lt)|0,h=h+Math.imul(Dt,pt)|0,S=S+Math.imul(Dt,lt)|0,k=k+Math.imul(Rt,at)|0,h=h+Math.imul(Rt,Xt)|0,h=h+Math.imul(_t,at)|0,S=S+Math.imul(_t,Xt)|0,k=k+Math.imul(dt,Qt)|0,h=h+Math.imul(dt,te)|0,h=h+Math.imul(ft,Qt)|0,S=S+Math.imul(ft,te)|0,k=k+Math.imul(ct,ee)|0,h=h+Math.imul(ct,re)|0,h=h+Math.imul(ht,ee)|0,S=S+Math.imul(ht,re)|0,k=k+Math.imul(D,ne)|0,h=h+Math.imul(D,ie)|0,h=h+Math.imul(X,ne)|0,S=S+Math.imul(X,ie)|0;var pi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(pi>>>26)|0,pi&=67108863,k=Math.imul(Ot,L),h=Math.imul(Ot,z),h=h+Math.imul(Tt,L)|0,S=Math.imul(Tt,z),k=k+Math.imul(Pt,pt)|0,h=h+Math.imul(Pt,lt)|0,h=h+Math.imul(Kt,pt)|0,S=S+Math.imul(Kt,lt)|0,k=k+Math.imul(Mt,at)|0,h=h+Math.imul(Mt,Xt)|0,h=h+Math.imul(Dt,at)|0,S=S+Math.imul(Dt,Xt)|0,k=k+Math.imul(Rt,Qt)|0,h=h+Math.imul(Rt,te)|0,h=h+Math.imul(_t,Qt)|0,S=S+Math.imul(_t,te)|0,k=k+Math.imul(dt,ee)|0,h=h+Math.imul(dt,re)|0,h=h+Math.imul(ft,ee)|0,S=S+Math.imul(ft,re)|0,k=k+Math.imul(ct,ne)|0,h=h+Math.imul(ct,ie)|0,h=h+Math.imul(ht,ne)|0,S=S+Math.imul(ht,ie)|0,k=k+Math.imul(D,se)|0,h=h+Math.imul(D,oe)|0,h=h+Math.imul(X,se)|0,S=S+Math.imul(X,oe)|0;var gi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(gi>>>26)|0,gi&=67108863,k=Math.imul(Lt,L),h=Math.imul(Lt,z),h=h+Math.imul(Ft,L)|0,S=Math.imul(Ft,z),k=k+Math.imul(Ot,pt)|0,h=h+Math.imul(Ot,lt)|0,h=h+Math.imul(Tt,pt)|0,S=S+Math.imul(Tt,lt)|0,k=k+Math.imul(Pt,at)|0,h=h+Math.imul(Pt,Xt)|0,h=h+Math.imul(Kt,at)|0,S=S+Math.imul(Kt,Xt)|0,k=k+Math.imul(Mt,Qt)|0,h=h+Math.imul(Mt,te)|0,h=h+Math.imul(Dt,Qt)|0,S=S+Math.imul(Dt,te)|0,k=k+Math.imul(Rt,ee)|0,h=h+Math.imul(Rt,re)|0,h=h+Math.imul(_t,ee)|0,S=S+Math.imul(_t,re)|0,k=k+Math.imul(dt,ne)|0,h=h+Math.imul(dt,ie)|0,h=h+Math.imul(ft,ne)|0,S=S+Math.imul(ft,ie)|0,k=k+Math.imul(ct,se)|0,h=h+Math.imul(ct,oe)|0,h=h+Math.imul(ht,se)|0,S=S+Math.imul(ht,oe)|0,k=k+Math.imul(D,ae)|0,h=h+Math.imul(D,ce)|0,h=h+Math.imul(X,ae)|0,S=S+Math.imul(X,ce)|0;var yi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(yi>>>26)|0,yi&=67108863,k=Math.imul($t,L),h=Math.imul($t,z),h=h+Math.imul(y,L)|0,S=Math.imul(y,z),k=k+Math.imul(Lt,pt)|0,h=h+Math.imul(Lt,lt)|0,h=h+Math.imul(Ft,pt)|0,S=S+Math.imul(Ft,lt)|0,k=k+Math.imul(Ot,at)|0,h=h+Math.imul(Ot,Xt)|0,h=h+Math.imul(Tt,at)|0,S=S+Math.imul(Tt,Xt)|0,k=k+Math.imul(Pt,Qt)|0,h=h+Math.imul(Pt,te)|0,h=h+Math.imul(Kt,Qt)|0,S=S+Math.imul(Kt,te)|0,k=k+Math.imul(Mt,ee)|0,h=h+Math.imul(Mt,re)|0,h=h+Math.imul(Dt,ee)|0,S=S+Math.imul(Dt,re)|0,k=k+Math.imul(Rt,ne)|0,h=h+Math.imul(Rt,ie)|0,h=h+Math.imul(_t,ne)|0,S=S+Math.imul(_t,ie)|0,k=k+Math.imul(dt,se)|0,h=h+Math.imul(dt,oe)|0,h=h+Math.imul(ft,se)|0,S=S+Math.imul(ft,oe)|0,k=k+Math.imul(ct,ae)|0,h=h+Math.imul(ct,ce)|0,h=h+Math.imul(ht,ae)|0,S=S+Math.imul(ht,ce)|0,k=k+Math.imul(D,ue)|0,h=h+Math.imul(D,le)|0,h=h+Math.imul(X,ue)|0,S=S+Math.imul(X,le)|0;var mi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(mi>>>26)|0,mi&=67108863,k=Math.imul(l,L),h=Math.imul(l,z),h=h+Math.imul(v,L)|0,S=Math.imul(v,z),k=k+Math.imul($t,pt)|0,h=h+Math.imul($t,lt)|0,h=h+Math.imul(y,pt)|0,S=S+Math.imul(y,lt)|0,k=k+Math.imul(Lt,at)|0,h=h+Math.imul(Lt,Xt)|0,h=h+Math.imul(Ft,at)|0,S=S+Math.imul(Ft,Xt)|0,k=k+Math.imul(Ot,Qt)|0,h=h+Math.imul(Ot,te)|0,h=h+Math.imul(Tt,Qt)|0,S=S+Math.imul(Tt,te)|0,k=k+Math.imul(Pt,ee)|0,h=h+Math.imul(Pt,re)|0,h=h+Math.imul(Kt,ee)|0,S=S+Math.imul(Kt,re)|0,k=k+Math.imul(Mt,ne)|0,h=h+Math.imul(Mt,ie)|0,h=h+Math.imul(Dt,ne)|0,S=S+Math.imul(Dt,ie)|0,k=k+Math.imul(Rt,se)|0,h=h+Math.imul(Rt,oe)|0,h=h+Math.imul(_t,se)|0,S=S+Math.imul(_t,oe)|0,k=k+Math.imul(dt,ae)|0,h=h+Math.imul(dt,ce)|0,h=h+Math.imul(ft,ae)|0,S=S+Math.imul(ft,ce)|0,k=k+Math.imul(ct,ue)|0,h=h+Math.imul(ct,le)|0,h=h+Math.imul(ht,ue)|0,S=S+Math.imul(ht,le)|0,k=k+Math.imul(D,he)|0,h=h+Math.imul(D,fe)|0,h=h+Math.imul(X,he)|0,S=S+Math.imul(X,fe)|0;var wi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(wi>>>26)|0,wi&=67108863,k=Math.imul(l,pt),h=Math.imul(l,lt),h=h+Math.imul(v,pt)|0,S=Math.imul(v,lt),k=k+Math.imul($t,at)|0,h=h+Math.imul($t,Xt)|0,h=h+Math.imul(y,at)|0,S=S+Math.imul(y,Xt)|0,k=k+Math.imul(Lt,Qt)|0,h=h+Math.imul(Lt,te)|0,h=h+Math.imul(Ft,Qt)|0,S=S+Math.imul(Ft,te)|0,k=k+Math.imul(Ot,ee)|0,h=h+Math.imul(Ot,re)|0,h=h+Math.imul(Tt,ee)|0,S=S+Math.imul(Tt,re)|0,k=k+Math.imul(Pt,ne)|0,h=h+Math.imul(Pt,ie)|0,h=h+Math.imul(Kt,ne)|0,S=S+Math.imul(Kt,ie)|0,k=k+Math.imul(Mt,se)|0,h=h+Math.imul(Mt,oe)|0,h=h+Math.imul(Dt,se)|0,S=S+Math.imul(Dt,oe)|0,k=k+Math.imul(Rt,ae)|0,h=h+Math.imul(Rt,ce)|0,h=h+Math.imul(_t,ae)|0,S=S+Math.imul(_t,ce)|0,k=k+Math.imul(dt,ue)|0,h=h+Math.imul(dt,le)|0,h=h+Math.imul(ft,ue)|0,S=S+Math.imul(ft,le)|0,k=k+Math.imul(ct,he)|0,h=h+Math.imul(ct,fe)|0,h=h+Math.imul(ht,he)|0,S=S+Math.imul(ht,fe)|0;var bi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(bi>>>26)|0,bi&=67108863,k=Math.imul(l,at),h=Math.imul(l,Xt),h=h+Math.imul(v,at)|0,S=Math.imul(v,Xt),k=k+Math.imul($t,Qt)|0,h=h+Math.imul($t,te)|0,h=h+Math.imul(y,Qt)|0,S=S+Math.imul(y,te)|0,k=k+Math.imul(Lt,ee)|0,h=h+Math.imul(Lt,re)|0,h=h+Math.imul(Ft,ee)|0,S=S+Math.imul(Ft,re)|0,k=k+Math.imul(Ot,ne)|0,h=h+Math.imul(Ot,ie)|0,h=h+Math.imul(Tt,ne)|0,S=S+Math.imul(Tt,ie)|0,k=k+Math.imul(Pt,se)|0,h=h+Math.imul(Pt,oe)|0,h=h+Math.imul(Kt,se)|0,S=S+Math.imul(Kt,oe)|0,k=k+Math.imul(Mt,ae)|0,h=h+Math.imul(Mt,ce)|0,h=h+Math.imul(Dt,ae)|0,S=S+Math.imul(Dt,ce)|0,k=k+Math.imul(Rt,ue)|0,h=h+Math.imul(Rt,le)|0,h=h+Math.imul(_t,ue)|0,S=S+Math.imul(_t,le)|0,k=k+Math.imul(dt,he)|0,h=h+Math.imul(dt,fe)|0,h=h+Math.imul(ft,he)|0,S=S+Math.imul(ft,fe)|0;var ki=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(ki>>>26)|0,ki&=67108863,k=Math.imul(l,Qt),h=Math.imul(l,te),h=h+Math.imul(v,Qt)|0,S=Math.imul(v,te),k=k+Math.imul($t,ee)|0,h=h+Math.imul($t,re)|0,h=h+Math.imul(y,ee)|0,S=S+Math.imul(y,re)|0,k=k+Math.imul(Lt,ne)|0,h=h+Math.imul(Lt,ie)|0,h=h+Math.imul(Ft,ne)|0,S=S+Math.imul(Ft,ie)|0,k=k+Math.imul(Ot,se)|0,h=h+Math.imul(Ot,oe)|0,h=h+Math.imul(Tt,se)|0,S=S+Math.imul(Tt,oe)|0,k=k+Math.imul(Pt,ae)|0,h=h+Math.imul(Pt,ce)|0,h=h+Math.imul(Kt,ae)|0,S=S+Math.imul(Kt,ce)|0,k=k+Math.imul(Mt,ue)|0,h=h+Math.imul(Mt,le)|0,h=h+Math.imul(Dt,ue)|0,S=S+Math.imul(Dt,le)|0,k=k+Math.imul(Rt,he)|0,h=h+Math.imul(Rt,fe)|0,h=h+Math.imul(_t,he)|0,S=S+Math.imul(_t,fe)|0;var vi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(vi>>>26)|0,vi&=67108863,k=Math.imul(l,ee),h=Math.imul(l,re),h=h+Math.imul(v,ee)|0,S=Math.imul(v,re),k=k+Math.imul($t,ne)|0,h=h+Math.imul($t,ie)|0,h=h+Math.imul(y,ne)|0,S=S+Math.imul(y,ie)|0,k=k+Math.imul(Lt,se)|0,h=h+Math.imul(Lt,oe)|0,h=h+Math.imul(Ft,se)|0,S=S+Math.imul(Ft,oe)|0,k=k+Math.imul(Ot,ae)|0,h=h+Math.imul(Ot,ce)|0,h=h+Math.imul(Tt,ae)|0,S=S+Math.imul(Tt,ce)|0,k=k+Math.imul(Pt,ue)|0,h=h+Math.imul(Pt,le)|0,h=h+Math.imul(Kt,ue)|0,S=S+Math.imul(Kt,le)|0,k=k+Math.imul(Mt,he)|0,h=h+Math.imul(Mt,fe)|0,h=h+Math.imul(Dt,he)|0,S=S+Math.imul(Dt,fe)|0;var Si=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(Si>>>26)|0,Si&=67108863,k=Math.imul(l,ne),h=Math.imul(l,ie),h=h+Math.imul(v,ne)|0,S=Math.imul(v,ie),k=k+Math.imul($t,se)|0,h=h+Math.imul($t,oe)|0,h=h+Math.imul(y,se)|0,S=S+Math.imul(y,oe)|0,k=k+Math.imul(Lt,ae)|0,h=h+Math.imul(Lt,ce)|0,h=h+Math.imul(Ft,ae)|0,S=S+Math.imul(Ft,ce)|0,k=k+Math.imul(Ot,ue)|0,h=h+Math.imul(Ot,le)|0,h=h+Math.imul(Tt,ue)|0,S=S+Math.imul(Tt,le)|0,k=k+Math.imul(Pt,he)|0,h=h+Math.imul(Pt,fe)|0,h=h+Math.imul(Kt,he)|0,S=S+Math.imul(Kt,fe)|0;var Ii=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,k=Math.imul(l,se),h=Math.imul(l,oe),h=h+Math.imul(v,se)|0,S=Math.imul(v,oe),k=k+Math.imul($t,ae)|0,h=h+Math.imul($t,ce)|0,h=h+Math.imul(y,ae)|0,S=S+Math.imul(y,ce)|0,k=k+Math.imul(Lt,ue)|0,h=h+Math.imul(Lt,le)|0,h=h+Math.imul(Ft,ue)|0,S=S+Math.imul(Ft,le)|0,k=k+Math.imul(Ot,he)|0,h=h+Math.imul(Ot,fe)|0,h=h+Math.imul(Tt,he)|0,S=S+Math.imul(Tt,fe)|0;var Ei=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,k=Math.imul(l,ae),h=Math.imul(l,ce),h=h+Math.imul(v,ae)|0,S=Math.imul(v,ce),k=k+Math.imul($t,ue)|0,h=h+Math.imul($t,le)|0,h=h+Math.imul(y,ue)|0,S=S+Math.imul(y,le)|0,k=k+Math.imul(Lt,he)|0,h=h+Math.imul(Lt,fe)|0,h=h+Math.imul(Ft,he)|0,S=S+Math.imul(Ft,fe)|0;var xi=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(xi>>>26)|0,xi&=67108863,k=Math.imul(l,ue),h=Math.imul(l,le),h=h+Math.imul(v,ue)|0,S=Math.imul(v,le),k=k+Math.imul($t,he)|0,h=h+Math.imul($t,fe)|0,h=h+Math.imul(y,he)|0,S=S+Math.imul(y,fe)|0;var Ai=(R+k|0)+((h&8191)<<13)|0;R=(S+(h>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,k=Math.imul(l,he),h=Math.imul(l,fe),h=h+Math.imul(v,he)|0,S=Math.imul(v,fe);var _i=(R+k|0)+((h&8191)<<13)|0;return R=(S+(h>>>13)|0)+(_i>>>26)|0,_i&=67108863,E[0]=ui,E[1]=li,E[2]=hi,E[3]=fi,E[4]=di,E[5]=pi,E[6]=gi,E[7]=yi,E[8]=mi,E[9]=wi,E[10]=bi,E[11]=ki,E[12]=vi,E[13]=Si,E[14]=Ii,E[15]=Ei,E[16]=xi,E[17]=Ai,E[18]=_i,R!==0&&(E[19]=R,g.length++),g};Math.imul||(K=U);function O(A,a,d){d.negative=a.negative^A.negative,d.length=A.length+a.length;for(var g=0,m=0,b=0;b<d.length-1;b++){var E=m;m=0;for(var R=g&67108863,k=Math.min(b,a.length-1),h=Math.max(0,b-A.length+1);h<=k;h++){var S=b-h,W=A.words[S]|0,D=a.words[h]|0,X=W*D,bt=X&67108863;E=E+(X/67108864|0)|0,bt=bt+R|0,R=bt&67108863,E=E+(bt>>>26)|0,m+=E>>>26,E&=67108863}d.words[b]=R,g=E,E=m}return g!==0?d.words[b]=g:d.length--,d._strip()}function q(A,a,d){return O(A,a,d)}i.prototype.mulTo=function(a,d){var g,m=this.length+a.length;return this.length===10&&a.length===10?g=K(this,a,d):m<63?g=U(this,a,d):m<1024?g=O(this,a,d):g=q(this,a,d),g},i.prototype.mul=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),this.mulTo(a,d)},i.prototype.mulf=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),q(this,a,d)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var d=a<0;d&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var g=0,m=0;m<this.length;m++){var b=(this.words[m]|0)*a,E=(b&67108863)+(g&67108863);g>>=26,g+=b/67108864|0,g+=E>>>26,this.words[m]=E&67108863}return g!==0&&(this.words[m]=g,this.length++),d?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var d=x(a);if(d.length===0)return new i(1);for(var g=this,m=0;m<d.length&&d[m]===0;m++,g=g.sqr());if(++m<d.length)for(var b=g.sqr();m<d.length;m++,b=b.sqr())d[m]!==0&&(g=g.mul(b));return g},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26,m=67108863>>>26-d<<26-d,b;if(d!==0){var E=0;for(b=0;b<this.length;b++){var R=this.words[b]&m,k=(this.words[b]|0)-R<<d;this.words[b]=k|E,E=R>>>26-d}E&&(this.words[b]=E,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,d,g){r(typeof a=="number"&&a>=0);var m;d?m=(d-d%26)/26:m=0;var b=a%26,E=Math.min((a-b)/26,this.length),R=67108863^67108863>>>b<<b,k=g;if(m-=E,m=Math.max(0,m),k){for(var h=0;h<E;h++)k.words[h]=this.words[h];k.length=E}if(E!==0)if(this.length>E)for(this.length-=E,h=0;h<this.length;h++)this.words[h]=this.words[h+E];else this.words[0]=0,this.length=1;var S=0;for(h=this.length-1;h>=0&&(S!==0||h>=m);h--){var W=this.words[h]|0;this.words[h]=S<<26-b|W>>>b,S=W&R}return k&&S!==0&&(k.words[k.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,d,g){return r(this.negative===0),this.iushrn(a,d,g)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26,m=1<<d;if(this.length<=g)return!1;var b=this.words[g];return!!(b&m)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var m=67108863^67108863>>>d<<d;this.words[this.length-1]&=m}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,d,g){var m=a.length+g,b;this._expand(m);var E,R=0;for(b=0;b<a.length;b++){E=(this.words[b+g]|0)+R;var k=(a.words[b]|0)*d;E-=k&67108863,R=(E>>26)-(k/67108864|0),this.words[b+g]=E&67108863}for(;b<this.length-g;b++)E=(this.words[b+g]|0)+R,R=E>>26,this.words[b+g]=E&67108863;if(R===0)return this._strip();for(r(R===-1),R=0,b=0;b<this.length;b++)E=-(this.words[b]|0)+R,R=E>>26,this.words[b]=E&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,d){var g=this.length-a.length,m=this.clone(),b=a,E=b.words[b.length-1]|0,R=this._countBits(E);g=26-R,g!==0&&(b=b.ushln(g),m.iushln(g),E=b.words[b.length-1]|0);var k=m.length-b.length,h;if(d!=="mod"){h=new i(null),h.length=k+1,h.words=new Array(h.length);for(var S=0;S<h.length;S++)h.words[S]=0}var W=m.clone()._ishlnsubmul(b,1,k);W.negative===0&&(m=W,h&&(h.words[k]=1));for(var D=k-1;D>=0;D--){var X=(m.words[b.length+D]|0)*67108864+(m.words[b.length+D-1]|0);for(X=Math.min(X/E|0,67108863),m._ishlnsubmul(b,X,D);m.negative!==0;)X--,m.negative=0,m._ishlnsubmul(b,1,D),m.isZero()||(m.negative^=1);h&&(h.words[D]=X)}return h&&h._strip(),m._strip(),d!=="div"&&g!==0&&m.iushrn(g),{div:h||null,mod:m}},i.prototype.divmod=function(a,d,g){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,b,E;return this.negative!==0&&a.negative===0?(E=this.neg().divmod(a,d),d!=="mod"&&(m=E.div.neg()),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.iadd(a)),{div:m,mod:b}):this.negative===0&&a.negative!==0?(E=this.divmod(a.neg(),d),d!=="mod"&&(m=E.div.neg()),{div:m,mod:E.mod}):this.negative&a.negative?(E=this.neg().divmod(a.neg(),d),d!=="div"&&(b=E.mod.neg(),g&&b.negative!==0&&b.isub(a)),{div:E.div,mod:b}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?d==="div"?{div:this.divn(a.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,d)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var d=this.divmod(a);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(a):d.mod,m=a.ushrn(1),b=a.andln(1),E=g.cmp(m);return E<0||b===1&&E===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(a){var d=a<0;d&&(a=-a),r(a<=67108863);for(var g=(1<<26)%a,m=0,b=this.length-1;b>=0;b--)m=(g*m+(this.words[b]|0))%a;return d?-m:m},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var d=a<0;d&&(a=-a),r(a<=67108863);for(var g=0,m=this.length-1;m>=0;m--){var b=(this.words[m]|0)+g*67108864;this.words[m]=b/a|0,g=b%a}return this._strip(),d?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var d=this,g=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var m=new i(1),b=new i(0),E=new i(0),R=new i(1),k=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++k;for(var h=g.clone(),S=d.clone();!d.isZero();){for(var W=0,D=1;!(d.words[0]&D)&&W<26;++W,D<<=1);if(W>0)for(d.iushrn(W);W-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(h),b.isub(S)),m.iushrn(1),b.iushrn(1);for(var X=0,bt=1;!(g.words[0]&bt)&&X<26;++X,bt<<=1);if(X>0)for(g.iushrn(X);X-- >0;)(E.isOdd()||R.isOdd())&&(E.iadd(h),R.isub(S)),E.iushrn(1),R.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(E),b.isub(R)):(g.isub(d),E.isub(m),R.isub(b))}return{a:E,b:R,gcd:g.iushln(k)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var d=this,g=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var m=new i(1),b=new i(0),E=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var R=0,k=1;!(d.words[0]&k)&&R<26;++R,k<<=1);if(R>0)for(d.iushrn(R);R-- >0;)m.isOdd()&&m.iadd(E),m.iushrn(1);for(var h=0,S=1;!(g.words[0]&S)&&h<26;++h,S<<=1);if(h>0)for(g.iushrn(h);h-- >0;)b.isOdd()&&b.iadd(E),b.iushrn(1);d.cmp(g)>=0?(d.isub(g),m.isub(b)):(g.isub(d),b.isub(m))}var W;return d.cmpn(1)===0?W=m:W=b,W.cmpn(0)<0&&W.iadd(a),W},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var d=this.clone(),g=a.clone();d.negative=0,g.negative=0;for(var m=0;d.isEven()&&g.isEven();m++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=d.cmp(g);if(b<0){var E=d;d=g,g=E}else if(b===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(m)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var d=a%26,g=(a-d)/26,m=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=m,this;for(var b=m,E=g;b!==0&&E<this.length;E++){var R=this.words[E]|0;R+=b,b=R>>>26,R&=67108863,this.words[E]=R}return b!==0&&(this.words[E]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var d=a<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var g;if(this.length>1)g=1;else{d&&(a=-a),r(a<=67108863,"Number is too big");var m=this.words[0]|0;g=m===a?0:m<a?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var d=this.ucmp(a);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var m=this.words[g]|0,b=a.words[g]|0;if(m!==b){m<b?d=-1:m>b&&(d=1);break}}return d},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new it(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Z={k256:null,p224:null,p192:null,p25519:null};function $(A,a){this.name=A,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},$.prototype.ireduce=function(a){var d=a,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var m=g<this.n?-1:d.ucmp(this.p);return m===0?(d.words[0]=0,d.length=1):m>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},$.prototype.split=function(a,d){a.iushrn(this.n,0,d)},$.prototype.imulK=function(a){return a.imul(this.k)};function G(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(G,$),G.prototype.split=function(a,d){for(var g=4194303,m=Math.min(a.length,9),b=0;b<m;b++)d.words[b]=a.words[b];if(d.length=m,a.length<=9){a.words[0]=0,a.length=1;return}var E=a.words[9];for(d.words[d.length++]=E&g,b=10;b<a.length;b++){var R=a.words[b]|0;a.words[b-10]=(R&g)<<4|E>>>22,E=R}E>>>=22,a.words[b-10]=E,E===0&&a.length>10?a.length-=10:a.length-=9},G.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var d=0,g=0;g<a.length;g++){var m=a.words[g]|0;d+=m*977,a.words[g]=d&67108863,d=m*64+(d/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function J(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(J,$);function nt(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(nt,$);function Ut(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Ut,$),Ut.prototype.imulK=function(a){for(var d=0,g=0;g<a.length;g++){var m=(a.words[g]|0)*19+d,b=m&67108863;m>>>=26,a.words[g]=b,d=m}return d!==0&&(a.words[a.length++]=d),a},i._prime=function(a){if(Z[a])return Z[a];var d;if(a==="k256")d=new G;else if(a==="p224")d=new J;else if(a==="p192")d=new nt;else if(a==="p25519")d=new Ut;else throw new Error("Unknown prime "+a);return Z[a]=d,d};function it(A){if(typeof A=="string"){var a=i._prime(A);this.m=a.p,this.prime=a}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}it.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},it.prototype._verify2=function(a,d){r((a.negative|d.negative)===0,"red works only with positives"),r(a.red&&a.red===d.red,"red works only with red numbers")},it.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(p(a,a.umod(this.m)._forceRed(this)),a)},it.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},it.prototype.add=function(a,d){this._verify2(a,d);var g=a.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},it.prototype.iadd=function(a,d){this._verify2(a,d);var g=a.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},it.prototype.sub=function(a,d){this._verify2(a,d);var g=a.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},it.prototype.isub=function(a,d){this._verify2(a,d);var g=a.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},it.prototype.shl=function(a,d){return this._verify1(a),this.imod(a.ushln(d))},it.prototype.imul=function(a,d){return this._verify2(a,d),this.imod(a.imul(d))},it.prototype.mul=function(a,d){return this._verify2(a,d),this.imod(a.mul(d))},it.prototype.isqr=function(a){return this.imul(a,a.clone())},it.prototype.sqr=function(a){return this.mul(a,a)},it.prototype.sqrt=function(a){if(a.isZero())return a.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var m=this.m.subn(1),b=0;!m.isZero()&&m.andln(1)===0;)b++,m.iushrn(1);r(!m.isZero());var E=new i(1).toRed(this),R=E.redNeg(),k=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);this.pow(h,k).cmp(R)!==0;)h.redIAdd(R);for(var S=this.pow(h,m),W=this.pow(a,m.addn(1).iushrn(1)),D=this.pow(a,m),X=b;D.cmp(E)!==0;){for(var bt=D,ct=0;bt.cmp(E)!==0;ct++)bt=bt.redSqr();r(ct<X);var ht=this.pow(S,new i(1).iushln(X-ct-1));W=W.redMul(ht),S=ht.redSqr(),D=D.redMul(S),X=ct}return W},it.prototype.invm=function(a){var d=a._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},it.prototype.pow=function(a,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return a.clone();var g=4,m=new Array(1<<g);m[0]=new i(1).toRed(this),m[1]=a;for(var b=2;b<m.length;b++)m[b]=this.mul(m[b-1],a);var E=m[0],R=0,k=0,h=d.bitLength()%26;for(h===0&&(h=26),b=d.length-1;b>=0;b--){for(var S=d.words[b],W=h-1;W>=0;W--){var D=S>>W&1;if(E!==m[0]&&(E=this.sqr(E)),D===0&&R===0){k=0;continue}R<<=1,R|=D,k++,!(k!==g&&(b!==0||W!==0))&&(E=this.mul(E,m[R]),k=0,R=0)}h=26}return E},it.prototype.convertTo=function(a){var d=a.umod(this.m);return d===a?d.clone():d},it.prototype.convertFrom=function(a){var d=a.clone();return d.red=null,d},i.mont=function(a){return new ut(a)};function ut(A){it.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(ut,it),ut.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},ut.prototype.convertFrom=function(a){var d=this.imod(a.mul(this.rinv));return d.red=null,d},ut.prototype.imul=function(a,d){if(a.isZero()||d.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},ut.prototype.mul=function(a,d){if(a.isZero()||d.isZero())return new i(0)._forceRed(this);var g=a.mul(d),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(m).iushrn(this.shift),E=b;return b.cmp(this.m)>=0?E=b.isub(this.m):b.cmpn(0)<0&&(E=b.iadd(this.m)),E._forceRed(this)},ut.prototype.invm=function(a){var d=this.imod(a._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(n,Ye)})(ys);var Qo=ys.exports;const ao=Dn(Qo);var Zi={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=ms,r=e.Buffer;function s(o,u){for(var f in o)u[f]=o[f]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,u,f){return r(o,u,f)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,u,f){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,u,f)},i.alloc=function(o,u,f){if(typeof o!="number")throw new TypeError("Argument must be a number");var w=r(o);return u!==void 0?typeof f=="string"?w.fill(u,f):w.fill(u):w.fill(0),w},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Zi,Zi.exports);var ta=Zi.exports,Bn=ta.Buffer;function ju(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=n.length,u=n.charAt(0),f=Math.log(o)/Math.log(256),w=Math.log(256)/Math.log(o);function p(_){if((Array.isArray(_)||_ instanceof Uint8Array)&&(_=Bn.from(_)),!Bn.isBuffer(_))throw new TypeError("Expected Buffer");if(_.length===0)return"";for(var P=0,M=0,x=0,U=_.length;x!==U&&_[x]===0;)x++,P++;for(var K=(U-x)*w+1>>>0,O=new Uint8Array(K);x!==U;){for(var q=_[x],Z=0,$=K-1;(q!==0||Z<M)&&$!==-1;$--,Z++)q+=256*O[$]>>>0,O[$]=q%o>>>0,q=q/o>>>0;if(q!==0)throw new Error("Non-zero carry");M=Z,x++}for(var G=K-M;G!==K&&O[G]===0;)G++;for(var J=u.repeat(P);G<K;++G)J+=n.charAt(O[G]);return J}function I(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return Bn.alloc(0);for(var P=0,M=0,x=0;_[P]===u;)M++,P++;for(var U=(_.length-P)*f+1>>>0,K=new Uint8Array(U);P<_.length;){var O=t[_.charCodeAt(P)];if(O===255)return;for(var q=0,Z=U-1;(O!==0||q<x)&&Z!==-1;Z--,q++)O+=o*K[Z]>>>0,K[Z]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");x=q,P++}for(var $=U-x;$!==U&&K[$]===0;)$++;var G=Bn.allocUnsafe(M+(U-$));G.fill(0,0,M);for(var J=M;$!==U;)G[J++]=K[$++];return G}function B(_){var P=I(_);if(P)return P;throw new Error("Non-base"+o+" character")}return{encode:p,decodeUnsafe:I,decode:B}}var Yu=ju,Zu=Yu,Ju="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Xu=Zu(Ju);const xe=Dn(Xu),Qu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),br=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),kr=new Uint32Array(64);class tl extends Ko{constructor(){super(64,32,8,!1),this.A=br[0]|0,this.B=br[1]|0,this.C=br[2]|0,this.D=br[3]|0,this.E=br[4]|0,this.F=br[5]|0,this.G=br[6]|0,this.H=br[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:u,H:f}=this;return[t,e,r,s,i,o,u,f]}set(t,e,r,s,i,o,u,f){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=u|0,this.H=f|0}process(t,e){for(let I=0;I<16;I++,e+=4)kr[I]=t.getUint32(e,!1);for(let I=16;I<64;I++){const B=kr[I-15],_=kr[I-2],P=Xe(B,7)^Xe(B,18)^B>>>3,M=Xe(_,17)^Xe(_,19)^_>>>10;kr[I]=M+kr[I-7]+P+kr[I-16]|0}let{A:r,B:s,C:i,D:o,E:u,F:f,G:w,H:p}=this;for(let I=0;I<64;I++){const B=Xe(u,6)^Xe(u,11)^Xe(u,25),_=p+B+Gc(u,f,w)+Qu[I]+kr[I]|0,M=(Xe(r,2)^Xe(r,13)^Xe(r,22))+jc(r,s,i)|0;p=w,w=f,f=u,u=o+_|0,o=i,i=s,s=r,r=_+M|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,u=u+this.E|0,f=f+this.F|0,w=w+this.G|0,p=p+this.H|0,this.set(r,s,i,o,u,f,w,p)}roundClean(){kr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ji=ls(()=>new tl);var Ee={},Rn=ta.Buffer;function el(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=n.length,u=n.charAt(0),f=Math.log(o)/Math.log(256),w=Math.log(256)/Math.log(o);function p(_){if((Array.isArray(_)||_ instanceof Uint8Array)&&(_=Rn.from(_)),!Rn.isBuffer(_))throw new TypeError("Expected Buffer");if(_.length===0)return"";for(var P=0,M=0,x=0,U=_.length;x!==U&&_[x]===0;)x++,P++;for(var K=(U-x)*w+1>>>0,O=new Uint8Array(K);x!==U;){for(var q=_[x],Z=0,$=K-1;(q!==0||Z<M)&&$!==-1;$--,Z++)q+=256*O[$]>>>0,O[$]=q%o>>>0,q=q/o>>>0;if(q!==0)throw new Error("Non-zero carry");M=Z,x++}for(var G=K-M;G!==K&&O[G]===0;)G++;for(var J=u.repeat(P);G<K;++G)J+=n.charAt(O[G]);return J}function I(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return Rn.alloc(0);for(var P=0,M=0,x=0;_[P]===u;)M++,P++;for(var U=(_.length-P)*f+1>>>0,K=new Uint8Array(U);P<_.length;){var O=t[_.charCodeAt(P)];if(O===255)return;for(var q=0,Z=U-1;(O!==0||q<x)&&Z!==-1;Z--,q++)O+=o*K[Z]>>>0,K[Z]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");x=q,P++}for(var $=U-x;$!==U&&K[$]===0;)$++;var G=Rn.allocUnsafe(M+(U-$));G.fill(0,0,M);for(var J=M;$!==U;)G[J++]=K[$++];return G}function B(_){var P=I(_);if(P)return P;throw new Error("Non-base"+o+" character")}return{encode:p,decodeUnsafe:I,decode:B}}var rl=el,nl=rl,il="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",sl=nl(il);function fr(n,t,e){return t<=n&&n<=e}function Yn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function ol(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var u=i&1023,f=o&1023;s.push(65536+(u<<10)+f),r+=1}else s.push(65533)}r+=1}return s}function al(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Un=-1;function ws(n){this.tokens=[].slice.call(n)}ws.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Un},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Xr=-1;function Ci(n,t){if(n)throw TypeError("Decoder error");return t||65533}var On="utf-8";function Nn(n,t){if(!(this instanceof Nn))return new Nn(n,t);if(n=n!==void 0?String(n).toLowerCase():On,n!==On)throw new Error("Encoding not supported. Only utf-8 is supported");t=Yn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Nn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Yn(e),this._streaming||(this._decoder=new cl({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new ws(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Xr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Xr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),al(i)}};function zn(n,t){if(!(this instanceof zn))return new zn(n,t);if(n=n!==void 0?String(n).toLowerCase():On,n!==On)throw new Error("Encoding not supported. Only utf-8 is supported");t=Yn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}zn.prototype={encode:function(t,e){t=t?String(t):"",e=Yn(e),this._streaming||(this._encoder=new ul(this._options)),this._streaming=!!e.stream;for(var r=[],s=new ws(ol(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Xr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Xr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function cl(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(u,f){if(f===Un&&s!==0)return s=0,Ci(t);if(f===Un)return Xr;if(s===0){if(fr(f,0,127))return f;if(fr(f,194,223))s=1,e=f-192;else if(fr(f,224,239))f===224&&(i=160),f===237&&(o=159),s=2,e=f-224;else if(fr(f,240,244))f===240&&(i=144),f===244&&(o=143),s=3,e=f-240;else return Ci(t);return e=e<<6*s,null}if(!fr(f,i,o))return e=s=r=0,i=128,o=191,u.prepend(f),Ci(t);if(i=128,o=191,r+=1,e+=f-128<<6*(s-r),r!==s)return null;var w=e;return e=s=r=0,w}}function ul(n){n.fatal,this.handler=function(t,e){if(e===Un)return Xr;if(fr(e,0,127))return e;var r,s;fr(e,128,2047)?(r=1,s=192):fr(e,2048,65535)?(r=2,s=224):fr(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const ll=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Nn,TextEncoder:zn},Symbol.toStringTag,{value:"Module"})),hl=as(ll);var fl=Ye&&Ye.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),dl=Ye&&Ye.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),or=Ye&&Ye.__decorate||function(n,t,e,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},pl=Ye&&Ye.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&fl(t,n,e);return dl(t,n),t},ea=Ye&&Ye.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ee,"__esModule",{value:!0});var ra=Ee.deserializeUnchecked=ca=Ee.deserialize=aa=Ee.serialize=Ee.BinaryReader=Ee.BinaryWriter=Ee.BorshError=Ee.baseDecode=Ee.baseEncode=void 0;const vr=ea(Qo),na=ea(sl),gl=pl(hl),yl=typeof TextDecoder!="function"?gl.TextDecoder:TextDecoder,ml=new yl("utf-8",{fatal:!0});function wl(n){return typeof n=="string"&&(n=de.from(n,"utf8")),na.default.encode(de.from(n))}Ee.baseEncode=wl;function bl(n){return de.from(na.default.decode(n))}Ee.baseDecode=bl;const Ui=1024;class Pe extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ee.BorshError=Pe;class ia{constructor(){this.buf=de.alloc(Ui),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=de.concat([this.buf,de.alloc(Ui)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(de.from(new vr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(de.from(new vr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(de.from(new vr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(de.from(new vr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=de.concat([de.from(this.buf.subarray(0,this.length)),t,de.alloc(Ui)]),this.length+=t.length}writeString(t){this.maybeResize();const e=de.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(de.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}Ee.BinaryWriter=ia;function ar(n,t,e){const r=e.value;e.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Pe("Reached the end of buffer when deserializing")}throw i}}}class We{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new vr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new vr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new vr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new vr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Pe(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return ml.decode(e)}catch(r){throw new Pe(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let s=0;s<e;++s)r.push(t());return r}}or([ar],We.prototype,"readU8",null);or([ar],We.prototype,"readU16",null);or([ar],We.prototype,"readU32",null);or([ar],We.prototype,"readU64",null);or([ar],We.prototype,"readU128",null);or([ar],We.prototype,"readU256",null);or([ar],We.prototype,"readU512",null);or([ar],We.prototype,"readString",null);or([ar],We.prototype,"readFixedArray",null);or([ar],We.prototype,"readArray",null);Ee.BinaryReader=We;function sa(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Ar(n,t,e,r,s){try{if(typeof r=="string")s[`write${sa(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Pe(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Pe(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)Ar(n,null,e[i],r[0],s)}else s.writeArray(e,i=>{Ar(n,t,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),Ar(n,t,e,r.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{Ar(n,t,o,r.key,s),Ar(n,t,i,r.value,s)});break}default:throw new Pe(`FieldType ${r} unrecognized`)}else oa(n,e,s)}catch(i){throw i instanceof Pe&&i.addToFieldPath(t),i}}function oa(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new Pe(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{Ar(n,s,t[s],i,e)});else if(r.kind==="enum"){const s=t[r.field];for(let i=0;i<r.values.length;++i){const[o,u]=r.values[i];if(o===s){e.writeU8(i),Ar(n,o,t[o],u,e);break}}}else throw new Pe(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function kl(n,t,e=ia){const r=new e;return oa(n,t,r),r.toArray()}var aa=Ee.serialize=kl;function _r(n,t,e,r){try{if(typeof e=="string")return r[`read${sa(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(_r(n,null,e[0],r));return s}else return r.readArray(()=>_r(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?_r(n,t,e.type,r):void 0;if(e.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const u=_r(n,t,e.key,r),f=_r(n,t,e.value,r);s.set(u,f)}return s}return bs(n,e,r)}catch(s){throw s instanceof Pe&&s.addToFieldPath(t),s}}function bs(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new Pe(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of n.get(t).fields)s[i]=_r(n,i,o,e);return new t(s)}if(r.kind==="enum"){const s=e.readU8();if(s>=r.values.length)throw new Pe(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],u=_r(n,i,o,e);return new t({[i]:u})}throw new Pe(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function vl(n,t,e,r=We){const s=new r(e),i=bs(n,t,s);if(s.offset<e.length)throw new Pe(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var ca=Ee.deserialize=vl;function Sl(n,t,e,r=We){const s=new r(e);return bs(n,t,s)}ra=Ee.deserializeUnchecked=Sl;var N={};Object.defineProperty(N,"__esModule",{value:!0});N.s16=N.s8=N.nu64be=N.u48be=N.u40be=N.u32be=N.u24be=N.u16be=Ie=N.nu64=N.u48=N.u40=tt=N.u32=N.u24=De=N.u16=St=N.u8=Ir=N.offset=N.greedy=N.Constant=N.UTF8=N.CString=N.Blob=N.Boolean=N.BitField=N.BitStructure=N.VariantLayout=N.Union=N.UnionLayoutDiscriminator=N.UnionDiscriminator=N.Structure=N.Sequence=N.DoubleBE=N.Double=N.FloatBE=N.Float=N.NearInt64BE=N.NearInt64=N.NearUInt64BE=N.NearUInt64=N.IntBE=N.Int=N.UIntBE=N.UInt=N.OffsetLayout=N.GreedyCount=N.ExternalLayout=N.bindConstructorLayout=N.nameWithProperty=N.Layout=N.uint8ArrayToBuffer=N.checkUint8Array=void 0;N.constant=N.utf8=N.cstr=qt=N.blob=N.unionLayoutDiscriminator=N.union=Ae=N.seq=N.bits=et=N.struct=N.f64be=N.f64=N.f32be=N.f32=N.ns64be=N.s48be=N.s40be=N.s32be=N.s24be=N.s16be=Ke=N.ns64=N.s48=N.s40=N.s32=N.s24=void 0;const ks=ms;function nn(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}N.checkUint8Array=nn;function Et(n){return nn(n),ks.Buffer.from(n.buffer,n.byteOffset,n.length)}N.uint8ArrayToBuffer=Et;class Bt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}N.Layout=Bt;function vs(n,t){return t.property?n+"["+t.property+"]":n}N.nameWithProperty=vs;function Il(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Bt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}N.bindConstructorLayout=Il;class Ne extends Bt{isCount(){throw new Error("ExternalLayout is abstract")}}N.ExternalLayout=Ne;class ua extends Ne{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){nn(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}N.GreedyCount=ua;class Ss extends Ne{constructor(t,e=0,r){if(!(t instanceof Bt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof He||this.layout instanceof je}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}N.OffsetLayout=Ss;class He extends Bt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Et(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Et(e).writeUIntLE(t,r,this.span),this.span}}N.UInt=He;class je extends Bt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Et(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Et(e).writeUIntBE(t,r,this.span),this.span}}N.UIntBE=je;class Or extends Bt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Et(t).readIntLE(e,this.span)}encode(t,e,r=0){return Et(e).writeIntLE(t,r,this.span),this.span}}N.Int=Or;class sn extends Bt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Et(t).readIntBE(e,this.span)}encode(t,e,r=0){return Et(e).writeIntBE(t,r,this.span),this.span}}N.IntBE=sn;const Xi=Math.pow(2,32);function Zn(n){const t=Math.floor(n/Xi),e=n-t*Xi;return{hi32:t,lo32:e}}function Jn(n,t){return n*Xi+t}class la extends Bt{constructor(t){super(8,t)}decode(t,e=0){const r=Et(t),s=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Jn(i,s)}encode(t,e,r=0){const s=Zn(t),i=Et(e);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}N.NearUInt64=la;class ha extends Bt{constructor(t){super(8,t)}decode(t,e=0){const r=Et(t),s=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Jn(s,i)}encode(t,e,r=0){const s=Zn(t),i=Et(e);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}N.NearUInt64BE=ha;class fa extends Bt{constructor(t){super(8,t)}decode(t,e=0){const r=Et(t),s=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Jn(i,s)}encode(t,e,r=0){const s=Zn(t),i=Et(e);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}N.NearInt64=fa;class da extends Bt{constructor(t){super(8,t)}decode(t,e=0){const r=Et(t),s=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Jn(s,i)}encode(t,e,r=0){const s=Zn(t),i=Et(e);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}N.NearInt64BE=da;class pa extends Bt{constructor(t){super(4,t)}decode(t,e=0){return Et(t).readFloatLE(e)}encode(t,e,r=0){return Et(e).writeFloatLE(t,r),4}}N.Float=pa;class ga extends Bt{constructor(t){super(4,t)}decode(t,e=0){return Et(t).readFloatBE(e)}encode(t,e,r=0){return Et(e).writeFloatBE(t,r),4}}N.FloatBE=ga;class ya extends Bt{constructor(t){super(8,t)}decode(t,e=0){return Et(t).readDoubleLE(e)}encode(t,e,r=0){return Et(e).writeDoubleLE(t,r),8}}N.Double=ya;class ma extends Bt{constructor(t){super(8,t)}decode(t,e=0){return Et(t).readDoubleBE(e)}encode(t,e,r=0){return Et(e).writeDoubleBE(t,r),8}}N.DoubleBE=ma;class wa extends Bt{constructor(t,e,r){if(!(t instanceof Bt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Ne&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof Ne)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Ne&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let s=0,i=this.count;for(i instanceof Ne&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r=0){const s=this.elementLayout,i=t.reduce((o,u)=>o+s.encode(u,e,r+o),0);return this.count instanceof Ne&&this.count.encode(t.length,e,r),i}}N.Sequence=wa;class ba extends Bt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof Bt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){nn(t);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const s=r;let i=0,o=0;for(const u of this.fields){let f=u.span;if(o=0<f?f:0,u.property!==void 0){const w=t[u.property];w!==void 0&&(o=u.encode(w,e,r),0>f&&(f=u.getSpan(e,r)))}i=r,r+=f}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}N.Structure=ba;class Is{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}N.UnionDiscriminator=Is;class Kn extends Is{constructor(t,e){if(!(t instanceof Ne&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}N.UnionLayoutDiscriminator=Kn;class Es extends Bt{constructor(t,e,r){let s;if(t instanceof He||t instanceof je)s=new Kn(new Ss(t));else if(t instanceof Ne&&t.isCount())s=new Kn(t);else if(t instanceof Is)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Bt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof He||t instanceof je)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof He||t instanceof je,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return o(u)},this.configGetSourceVariant=function(u){o=u.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const u=this.defaultLayout;let f=0;this.usesPrefixDiscriminator&&(f=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[u.property]=u.decode(t,e+f)}else r=o.decode(t,e);return r}encode(t,e,r=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=i.layout.span),i.encode(t[i.property],e,r),u+o.encode(t[o.property],e,r+u)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new ka(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}N.Union=Es;class ka extends Bt{constructor(t,e,r,s){if(!(t instanceof Es))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Bt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+r)),r+s}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}N.VariantLayout=ka;function Dr(n){return 0>n&&(n+=4294967296),n}class xs extends Bt{constructor(t,e,r){if(!(t instanceof He||t instanceof je))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Dr(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const r=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new As(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new va(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}N.BitStructure=xs;class As{constructor(t,e,r){if(!(t instanceof xs))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,u)=>o+u.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=Dr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Dr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Dr(t&this.valueMask))throw new TypeError(vs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Dr(t<<this.start);this.container._packedSetValue(Dr(e&~this.wordMask)|r)}}N.BitField=As;let va=class extends As{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};N.Boolean=va;class Sa extends Bt{constructor(t,e){if(!(t instanceof Ne&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Ne||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Et(t).slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof Ne&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(vs("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Et(t);return Et(e).write(i.toString("hex"),r,s,"hex"),this.length instanceof Ne&&this.length.encode(s,e,r),s}}N.Blob=Sa;class Ia extends Bt{constructor(t){super(-1,t)}getSpan(t,e=0){nn(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Et(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=ks.Buffer.from(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const o=Et(e);return s.copy(o,r),o[r+i]=0,i+1}}N.CString=Ia;class Ea extends Bt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return nn(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Et(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=ks.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(Et(e),r),i}}N.UTF8=Ea;class xa extends Bt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}N.Constant=xa;N.greedy=(n,t)=>new ua(n,t);var Ir=N.offset=(n,t,e)=>new Ss(n,t,e),St=N.u8=n=>new He(1,n),De=N.u16=n=>new He(2,n);N.u24=n=>new He(3,n);var tt=N.u32=n=>new He(4,n);N.u40=n=>new He(5,n);N.u48=n=>new He(6,n);var Ie=N.nu64=n=>new la(n);N.u16be=n=>new je(2,n);N.u24be=n=>new je(3,n);N.u32be=n=>new je(4,n);N.u40be=n=>new je(5,n);N.u48be=n=>new je(6,n);N.nu64be=n=>new ha(n);N.s8=n=>new Or(1,n);N.s16=n=>new Or(2,n);N.s24=n=>new Or(3,n);N.s32=n=>new Or(4,n);N.s40=n=>new Or(5,n);N.s48=n=>new Or(6,n);var Ke=N.ns64=n=>new fa(n);N.s16be=n=>new sn(2,n);N.s24be=n=>new sn(3,n);N.s32be=n=>new sn(4,n);N.s40be=n=>new sn(5,n);N.s48be=n=>new sn(6,n);N.ns64be=n=>new da(n);N.f32=n=>new pa(n);N.f32be=n=>new ga(n);N.f64=n=>new ya(n);N.f64be=n=>new ma(n);var et=N.struct=(n,t,e)=>new ba(n,t,e);N.bits=(n,t,e)=>new xs(n,t,e);var Ae=N.seq=(n,t,e)=>new wa(n,t,e);N.union=(n,t,e)=>new Es(n,t,e);N.unionLayoutDiscriminator=(n,t)=>new Kn(n,t);var qt=N.blob=(n,t)=>new Sa(n,t);N.cstr=n=>new Ia(n);N.utf8=(n,t)=>new Ea(n,t);N.constant=(n,t)=>new xa(n,t);var vn={};Object.defineProperty(vn,"__esModule",{value:!0});function El(n){{const t=de.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var xl=vn.toBigIntLE=El;function Al(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}vn.toBigIntBE=Al;function _l(n,t){{const e=n.toString(16),r=de.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Aa=vn.toBufferLE=_l;function Bl(n,t){{const e=n.toString(16);return de.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}vn.toBufferBE=Bl;class Rl extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:u}=t,f=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(i??f),i!=null&&(this.cause=f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Ml(n){return Sn(n)&&typeof n[Symbol.iterator]=="function"}function Sn(n){return typeof n=="object"&&n!=null}function Fn(n){return Sn(n)&&!Array.isArray(n)}function Ze(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Tl(n){const{done:t,value:e}=n.next();return t?void 0:e}function Pl(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:u,message:f=`Expected a value of type \`${o}\`${u?` with refinement \`${u}\``:""}, but received: \`${Ze(r)}\``}=n;return{value:r,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...n,message:f}}function*co(n,t,e,r){Ml(n)||(n=[n]);for(const s of n){const i=Pl(s,t,e,r);i&&(yield i)}}function*_s(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,u={path:r,branch:s,mask:o};i&&(n=t.coercer(n,u));let f="valid";for(const w of t.validator(n,u))w.explanation=e.message,f="not_valid",yield[w,void 0];for(let[w,p,I]of t.entries(n,u)){const B=_s(p,I,{path:w===void 0?r:[...r,w],branch:w===void 0?s:[...s,p],coerce:i,mask:o,message:e.message});for(const _ of B)_[0]?(f=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):i&&(p=_[1],w===void 0?n=p:n instanceof Map?n.set(w,p):n instanceof Set?n.add(p):Sn(n)&&(p!==void 0||w in n)&&(n[w]=p))}if(f!=="not_valid")for(const w of t.refiner(n,u))w.explanation=e.message,f="not_refined",yield[w,void 0];f==="valid"&&(yield[void 0,n])}let cr=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=f=>f,entries:u=function*(){}}=t;this.type=e,this.schema=r,this.entries=u,this.coercer=o,s?this.validator=(f,w)=>{const p=s(f,w);return co(p,w,this,f)}:this.validator=()=>[],i?this.refiner=(f,w)=>{const p=i(f,w);return co(p,w,this,f)}:this.refiner=()=>[]}assert(t,e){return _a(t,this,e)}create(t,e){return j(t,this,e)}is(t){return Ba(t,this)}mask(t,e){return Ll(t,this,e)}validate(t,e={}){return In(t,this,e)}};function _a(n,t,e){const r=In(n,t,{message:e});if(r[0])throw r[0]}function j(n,t,e){const r=In(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Ll(n,t,e){const r=In(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Ba(n,t){return!In(n,t)[0]}function In(n,t,e={}){const r=_s(n,t,e),s=Tl(r);return s[0]?[new Rl(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Nr(n,t){return new cr({type:n,schema:null,validator:t})}function Cl(){return Nr("any",()=>!0)}function Y(n){return new cr({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ze(t)}`}})}function sr(){return Nr("boolean",n=>typeof n=="boolean")}function Bs(n){return Nr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ze(t)}`)}function Vt(n){const t=Ze(n),e=typeof n;return new cr({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ze(r)}`}})}function Ul(){return Nr("never",()=>!1)}function Q(n){return new cr({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function C(){return Nr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ze(n)}`)}function ot(n){return new cr({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Ra(n,t){return new cr({type:"record",schema:null,*entries(e){if(Sn(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return Fn(e)||`Expected an object, but received: ${Ze(e)}`},coercer(e){return Fn(e)?{...e}:e}})}function H(){return Nr("string",n=>typeof n=="string"||`Expected a string, but received: ${Ze(n)}`)}function Rs(n){const t=Ul();return new cr({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ze(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function F(n){const t=Object.keys(n);return new cr({type:"type",schema:n,*entries(e){if(Sn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Fn(e)||`Expected an object, but received: ${Ze(e)}`},coercer(e){return Fn(e)?{...e}:e}})}function Le(n){const t=n.map(e=>e.type).join(" | ");return new cr({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=_s(e,i,r),[u]=o;if(u[0])for(const[f]of o)f&&s.push(f);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ze(e)}`,...s]}})}function on(){return Nr("unknown",()=>!0)}function En(n,t,e){return new cr({...n,coercer:(r,s)=>Ba(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var Mn,Ol=new Uint8Array(16);function Ma(){if(!Mn&&(Mn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Mn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mn(Ol)}const Nl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Xn(n){return typeof n=="string"&&Nl.test(n)}var Se=[];for(var Oi=0;Oi<256;++Oi)Se.push((Oi+256).toString(16).substr(1));function Qn(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Se[n[t+0]]+Se[n[t+1]]+Se[n[t+2]]+Se[n[t+3]]+"-"+Se[n[t+4]]+Se[n[t+5]]+"-"+Se[n[t+6]]+Se[n[t+7]]+"-"+Se[n[t+8]]+Se[n[t+9]]+"-"+Se[n[t+10]]+Se[n[t+11]]+Se[n[t+12]]+Se[n[t+13]]+Se[n[t+14]]+Se[n[t+15]]).toLowerCase();if(!Xn(e))throw TypeError("Stringified UUID is invalid");return e}var uo,Ni,zi=0,Ki=0;function zl(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||uo,o=n.clockseq!==void 0?n.clockseq:Ni;if(i==null||o==null){var u=n.random||(n.rng||Ma)();i==null&&(i=uo=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=Ni=(u[6]<<8|u[7])&16383)}var f=n.msecs!==void 0?n.msecs:Date.now(),w=n.nsecs!==void 0?n.nsecs:Ki+1,p=f-zi+(w-Ki)/1e4;if(p<0&&n.clockseq===void 0&&(o=o+1&16383),(p<0||f>zi)&&n.nsecs===void 0&&(w=0),w>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");zi=f,Ki=w,Ni=o,f+=122192928e5;var I=((f&268435455)*1e4+w)%4294967296;s[r++]=I>>>24&255,s[r++]=I>>>16&255,s[r++]=I>>>8&255,s[r++]=I&255;var B=f/4294967296*1e4&268435455;s[r++]=B>>>8&255,s[r++]=B&255,s[r++]=B>>>24&15|16,s[r++]=B>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var _=0;_<6;++_)s[r+_]=i[_];return t||Qn(s)}function Ta(n){if(!Xn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Kl(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Fl="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Wl="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Pa(n,t,e){function r(s,i,o,u){if(typeof s=="string"&&(s=Kl(s)),typeof i=="string"&&(i=Ta(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+s.length);if(f.set(i),f.set(s,i.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,o){u=u||0;for(var w=0;w<16;++w)o[u+w]=f[w];return o}return Qn(f)}try{r.name=n}catch{}return r.DNS=Fl,r.URL=Wl,r}function ql(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Dl($l(Hl(n),n.length*8))}function Dl(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function La(n){return(n+64>>>9<<4)+14+1}function $l(n,t){n[t>>5]|=128<<t%32,n[La(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var u=e,f=r,w=s,p=i;e=Be(e,r,s,i,n[o],7,-680876936),i=Be(i,e,r,s,n[o+1],12,-389564586),s=Be(s,i,e,r,n[o+2],17,606105819),r=Be(r,s,i,e,n[o+3],22,-1044525330),e=Be(e,r,s,i,n[o+4],7,-176418897),i=Be(i,e,r,s,n[o+5],12,1200080426),s=Be(s,i,e,r,n[o+6],17,-1473231341),r=Be(r,s,i,e,n[o+7],22,-45705983),e=Be(e,r,s,i,n[o+8],7,1770035416),i=Be(i,e,r,s,n[o+9],12,-1958414417),s=Be(s,i,e,r,n[o+10],17,-42063),r=Be(r,s,i,e,n[o+11],22,-1990404162),e=Be(e,r,s,i,n[o+12],7,1804603682),i=Be(i,e,r,s,n[o+13],12,-40341101),s=Be(s,i,e,r,n[o+14],17,-1502002290),r=Be(r,s,i,e,n[o+15],22,1236535329),e=Re(e,r,s,i,n[o+1],5,-165796510),i=Re(i,e,r,s,n[o+6],9,-1069501632),s=Re(s,i,e,r,n[o+11],14,643717713),r=Re(r,s,i,e,n[o],20,-373897302),e=Re(e,r,s,i,n[o+5],5,-701558691),i=Re(i,e,r,s,n[o+10],9,38016083),s=Re(s,i,e,r,n[o+15],14,-660478335),r=Re(r,s,i,e,n[o+4],20,-405537848),e=Re(e,r,s,i,n[o+9],5,568446438),i=Re(i,e,r,s,n[o+14],9,-1019803690),s=Re(s,i,e,r,n[o+3],14,-187363961),r=Re(r,s,i,e,n[o+8],20,1163531501),e=Re(e,r,s,i,n[o+13],5,-1444681467),i=Re(i,e,r,s,n[o+2],9,-51403784),s=Re(s,i,e,r,n[o+7],14,1735328473),r=Re(r,s,i,e,n[o+12],20,-1926607734),e=Me(e,r,s,i,n[o+5],4,-378558),i=Me(i,e,r,s,n[o+8],11,-2022574463),s=Me(s,i,e,r,n[o+11],16,1839030562),r=Me(r,s,i,e,n[o+14],23,-35309556),e=Me(e,r,s,i,n[o+1],4,-1530992060),i=Me(i,e,r,s,n[o+4],11,1272893353),s=Me(s,i,e,r,n[o+7],16,-155497632),r=Me(r,s,i,e,n[o+10],23,-1094730640),e=Me(e,r,s,i,n[o+13],4,681279174),i=Me(i,e,r,s,n[o],11,-358537222),s=Me(s,i,e,r,n[o+3],16,-722521979),r=Me(r,s,i,e,n[o+6],23,76029189),e=Me(e,r,s,i,n[o+9],4,-640364487),i=Me(i,e,r,s,n[o+12],11,-421815835),s=Me(s,i,e,r,n[o+15],16,530742520),r=Me(r,s,i,e,n[o+2],23,-995338651),e=Te(e,r,s,i,n[o],6,-198630844),i=Te(i,e,r,s,n[o+7],10,1126891415),s=Te(s,i,e,r,n[o+14],15,-1416354905),r=Te(r,s,i,e,n[o+5],21,-57434055),e=Te(e,r,s,i,n[o+12],6,1700485571),i=Te(i,e,r,s,n[o+3],10,-1894986606),s=Te(s,i,e,r,n[o+10],15,-1051523),r=Te(r,s,i,e,n[o+1],21,-2054922799),e=Te(e,r,s,i,n[o+8],6,1873313359),i=Te(i,e,r,s,n[o+15],10,-30611744),s=Te(s,i,e,r,n[o+6],15,-1560198380),r=Te(r,s,i,e,n[o+13],21,1309151649),e=Te(e,r,s,i,n[o+4],6,-145523070),i=Te(i,e,r,s,n[o+11],10,-1120210379),s=Te(s,i,e,r,n[o+2],15,718787259),r=Te(r,s,i,e,n[o+9],21,-343485551),e=Sr(e,u),r=Sr(r,f),s=Sr(s,w),i=Sr(i,p)}return[e,r,s,i]}function Hl(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(La(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function Sr(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Vl(n,t){return n<<t|n>>>32-t}function ti(n,t,e,r,s,i){return Sr(Vl(Sr(Sr(t,n),Sr(r,i)),s),e)}function Be(n,t,e,r,s,i,o){return ti(t&e|~t&r,n,t,s,i,o)}function Re(n,t,e,r,s,i,o){return ti(t&r|e&~r,n,t,s,i,o)}function Me(n,t,e,r,s,i,o){return ti(t^e^r,n,t,s,i,o)}function Te(n,t,e,r,s,i,o){return ti(e^(t|~r),n,t,s,i,o)}var Gl=Pa("v3",48,ql);function jl(n,t,e){n=n||{};var r=n.random||(n.rng||Ma)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Qn(r)}function Yl(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Fi(n,t){return n<<t|n>>>32-t}function Zl(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),u=new Array(o),f=0;f<o;++f){for(var w=new Uint32Array(16),p=0;p<16;++p)w[p]=n[f*64+p*4]<<24|n[f*64+p*4+1]<<16|n[f*64+p*4+2]<<8|n[f*64+p*4+3];u[f]=w}u[o-1][14]=(n.length-1)*8/Math.pow(2,32),u[o-1][14]=Math.floor(u[o-1][14]),u[o-1][15]=(n.length-1)*8&4294967295;for(var I=0;I<o;++I){for(var B=new Uint32Array(80),_=0;_<16;++_)B[_]=u[I][_];for(var P=16;P<80;++P)B[P]=Fi(B[P-3]^B[P-8]^B[P-14]^B[P-16],1);for(var M=e[0],x=e[1],U=e[2],K=e[3],O=e[4],q=0;q<80;++q){var Z=Math.floor(q/20),$=Fi(M,5)+Yl(Z,x,U,K)+O+t[Z]+B[q]>>>0;O=K,K=U,U=Fi(x,30)>>>0,x=M,M=$}e[0]=e[0]+M>>>0,e[1]=e[1]+x>>>0,e[2]=e[2]+U>>>0,e[3]=e[3]+K>>>0,e[4]=e[4]+O>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Jl=Pa("v5",80,Zl);const Xl="00000000-0000-0000-0000-000000000000";function Ql(n){if(!Xn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const th=Object.freeze(Object.defineProperty({__proto__:null,NIL:Xl,parse:Ta,stringify:Qn,v1:zl,v3:Gl,v4:jl,v5:Jl,validate:Xn,version:Ql},Symbol.toStringTag,{value:"Module"})),Ca=as(th),eh=Ca.v4,rh=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:n};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof r.generator=="function"?r.generator:function(){return eh()};i.id=o(i,r)}else s===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var nh=rh;const ih=Ca.v4,sh=nh,pn=function(n,t){if(!(this instanceof pn))return new pn(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return ih()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var oh=pn;pn.prototype.request=function(n,t,e,r){const s=this;let i=null;const o=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const w=typeof r=="function";try{i=sh(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(p){if(w)return r(p);throw p}if(!w)return i}let f;try{f=JSON.stringify(i,this.options.replacer)}catch(w){return r(w)}return this.callServer(f,function(w,p){s._parseResponse(w,p,r)}),i};pn.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,r.filter(s),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const ah=Dn(oh);var Ua={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(f,w,p){this.fn=f,this.context=w,this.once=p||!1}function i(f,w,p,I,B){if(typeof p!="function")throw new TypeError("The listener must be a function");var _=new s(p,I||f,B),P=e?e+w:w;return f._events[P]?f._events[P].fn?f._events[P]=[f._events[P],_]:f._events[P].push(_):(f._events[P]=_,f._eventsCount++),f}function o(f,w){--f._eventsCount===0?f._events=new r:delete f._events[w]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var w=[],p,I;if(this._eventsCount===0)return w;for(I in p=this._events)t.call(p,I)&&w.push(e?I.slice(1):I);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(p)):w},u.prototype.listeners=function(w){var p=e?e+w:w,I=this._events[p];if(!I)return[];if(I.fn)return[I.fn];for(var B=0,_=I.length,P=new Array(_);B<_;B++)P[B]=I[B].fn;return P},u.prototype.listenerCount=function(w){var p=e?e+w:w,I=this._events[p];return I?I.fn?1:I.length:0},u.prototype.emit=function(w,p,I,B,_,P){var M=e?e+w:w;if(!this._events[M])return!1;var x=this._events[M],U=arguments.length,K,O;if(x.fn){switch(x.once&&this.removeListener(w,x.fn,void 0,!0),U){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,p),!0;case 3:return x.fn.call(x.context,p,I),!0;case 4:return x.fn.call(x.context,p,I,B),!0;case 5:return x.fn.call(x.context,p,I,B,_),!0;case 6:return x.fn.call(x.context,p,I,B,_,P),!0}for(O=1,K=new Array(U-1);O<U;O++)K[O-1]=arguments[O];x.fn.apply(x.context,K)}else{var q=x.length,Z;for(O=0;O<q;O++)switch(x[O].once&&this.removeListener(w,x[O].fn,void 0,!0),U){case 1:x[O].fn.call(x[O].context);break;case 2:x[O].fn.call(x[O].context,p);break;case 3:x[O].fn.call(x[O].context,p,I);break;case 4:x[O].fn.call(x[O].context,p,I,B);break;default:if(!K)for(Z=1,K=new Array(U-1);Z<U;Z++)K[Z-1]=arguments[Z];x[O].fn.apply(x[O].context,K)}}return!0},u.prototype.on=function(w,p,I){return i(this,w,p,I,!1)},u.prototype.once=function(w,p,I){return i(this,w,p,I,!0)},u.prototype.removeListener=function(w,p,I,B){var _=e?e+w:w;if(!this._events[_])return this;if(!p)return o(this,_),this;var P=this._events[_];if(P.fn)P.fn===p&&(!B||P.once)&&(!I||P.context===I)&&o(this,_);else{for(var M=0,x=[],U=P.length;M<U;M++)(P[M].fn!==p||B&&!P[M].once||I&&P[M].context!==I)&&x.push(P[M]);x.length?this._events[_]=x.length===1?x[0]:x:o(this,_)}return this},u.prototype.removeAllListeners=function(w){var p;return w?(p=e?e+w:w,this._events[p]&&o(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u})(Ua);var ch=Ua.exports;const Oa=Dn(ch);var uh=class extends Oa{constructor(t,e,r){super();ye(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,r){const s=r||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function lh(n,t){return new uh(n,t)}var hh=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},fh=class extends Oa{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...u}={},f,w){super();ye(this,"address");ye(this,"rpc_id");ye(this,"queue");ye(this,"options");ye(this,"autoconnect");ye(this,"ready");ye(this,"reconnect");ye(this,"reconnect_timer_id");ye(this,"reconnect_interval");ye(this,"max_reconnects");ye(this,"rest_options");ye(this,"current_reconnects");ye(this,"generate_request_id");ye(this,"socket");ye(this,"webSocketFactory");ye(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=u,this.current_reconnects=0,this.generate_request_id=f||(()=>++this.rpc_id),w?this.dataPack=w:this.dataPack=new hh,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const u=this.generate_request_id(t,e),f={jsonrpc:"2.0",method:t,params:e||void 0,id:u};this.socket.send(this.dataPack.encode(f),s,w=>{if(w)return o(w);this.queue[u]={promise:[i,o]},r&&(this.queue[u].timeout=setTimeout(()=>{delete this.queue[u],o(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=st.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};const Na=[],za=[],Ka=[],dh=BigInt(0),un=BigInt(1),ph=BigInt(2),gh=BigInt(7),yh=BigInt(256),mh=BigInt(113);for(let n=0,t=un,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],Na.push(2*(5*r+e)),za.push((n+1)*(n+2)/2%64);let s=dh;for(let i=0;i<7;i++)t=(t<<un^(t>>gh)*mh)%yh,t&ph&&(s^=un<<(un<<BigInt(i))-un);Ka.push(s)}const[wh,bh]=Wo(Ka,!0),lo=(n,t,e)=>e>32?$o(n,t,e):qo(n,t,e),ho=(n,t,e)=>e>32?Ho(n,t,e):Do(n,t,e);function kh(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const u=(o+8)%10,f=(o+2)%10,w=e[f],p=e[f+1],I=lo(w,p,1)^e[u],B=ho(w,p,1)^e[u+1];for(let _=0;_<50;_+=10)n[o+_]^=I,n[o+_+1]^=B}let s=n[2],i=n[3];for(let o=0;o<24;o++){const u=za[o],f=lo(s,i,u),w=ho(s,i,u),p=Na[o];s=n[p],i=n[p+1],n[p]=f,n[p+1]=w}for(let o=0;o<50;o+=10){for(let u=0;u<10;u++)e[u]=n[o+u];for(let u=0;u<10;u++)n[o+u]^=~e[(u+2)%10]&e[(u+4)%10]}n[0]^=wh[r],n[1]^=bh[r]}e.fill(0)}class Ms extends us{constructor(t,e,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Cn(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=qc(this.state)}keccak(){Xs||Qs(this.state32),kh(this.state32,this.rounds),Xs||Qs(this.state32),this.posOut=0,this.pos=0}update(t){Yr(this);const{blockLen:e,state:r}=this;t=Hn(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let u=0;u<o;u++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,e&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Yr(this,!1),bn(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Cn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(No(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Ms(e,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const vh=(n,t,e)=>ls(()=>new Ms(t,n,e)),fo=vh(1,136,256/8);class Fa extends us{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Wc(t);const r=Hn(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Yr(this),this.iHash.update(t),this}digestInto(t){Yr(this),bn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=u,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Wa=(n,t,e)=>new Fa(n,t).update(e).digest();Wa.create=(n,t)=>new Fa(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function po(n){n.lowS!==void 0&&gr("lowS",n.lowS),n.prehash!==void 0&&gr("prehash",n.prehash)}function Sh(n){const t=ps(n);en(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:s}=t;if(e){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Ih,hexToBytes:Eh}=Eu,hr={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(n,t)=>{const{Err:e}=hr;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=$r(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?$r(s.length/2|128):"";return`${$r(n)}${i}${s}${t}`},decode(n,t){const{Err:e}=hr;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const f=s&127;if(!f)throw new e("tlv.decode(long): indefinite length not supported");if(f>4)throw new e("tlv.decode(long): byte length is too big");const w=t.subarray(r,r+f);if(w.length!==f)throw new e("tlv.decode: length bytes not complete");if(w[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const p of w)o=o<<8|p;if(r+=f,o<128)throw new e("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+o);if(u.length!==o)throw new e("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=hr;if(n<dr)throw new t("integer: negative integers are not allowed");let e=$r(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected assertion");return e},decode(n){const{Err:t}=hr;if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return Ih(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=hr,s=typeof n=="string"?Eh(n):n;kn(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("Invalid signature: left bytes after parsing");const{v:u,l:f}=r.decode(2,i),{v:w,l:p}=r.decode(2,f);if(p.length)throw new t("Invalid signature: left bytes after parsing");return{r:e.decode(u),s:e.decode(w)}},hexFromSig(n){const{_tlv:t,_int:e}=hr,r=`${t.encode(2,e.encode(n.r))}${t.encode(2,e.encode(n.s))}`;return t.encode(48,r)}},dr=BigInt(0),me=BigInt(1);BigInt(2);const go=BigInt(3);BigInt(4);function xh(n){const t=Sh(n),{Fp:e}=t,r=jn(t.n,t.nBitLength),s=t.toBytes||((M,x,U)=>{const K=x.toAffine();return Lr(Uint8Array.from([4]),e.toBytes(K.x),e.toBytes(K.y))}),i=t.fromBytes||(M=>{const x=M.subarray(1),U=e.fromBytes(x.subarray(0,e.BYTES)),K=e.fromBytes(x.subarray(e.BYTES,2*e.BYTES));return{x:U,y:K}});function o(M){const{a:x,b:U}=t,K=e.sqr(M),O=e.mul(K,M);return e.add(e.add(O,e.mul(M,x)),U)}if(!e.eql(e.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function u(M){return Gn(M,me,t.n)}function f(M){const{allowedPrivateKeyLengths:x,nByteLength:U,wrapPrivateKey:K,n:O}=t;if(x&&typeof M!="bigint"){if(Tr(M)&&(M=Pr(M)),typeof M!="string"||!x.includes(M.length))throw new Error("Invalid key");M=M.padStart(U*2,"0")}let q;try{q=typeof M=="bigint"?M:Mr(pe("private key",M,U))}catch{throw new Error(`private key must be ${U} bytes, hex or bigint, not ${typeof M}`)}return K&&(q=Ht(q,O)),$e("private key",q,me,O),q}function w(M){if(!(M instanceof B))throw new Error("ProjectivePoint expected")}const p=dn((M,x)=>{const{px:U,py:K,pz:O}=M;if(e.eql(O,e.ONE))return{x:U,y:K};const q=M.is0();x==null&&(x=q?e.ONE:e.inv(O));const Z=e.mul(U,x),$=e.mul(K,x),G=e.mul(O,x);if(q)return{x:e.ZERO,y:e.ZERO};if(!e.eql(G,e.ONE))throw new Error("invZ was invalid");return{x:Z,y:$}}),I=dn(M=>{if(M.is0()){if(t.allowInfinityPoint&&!e.is0(M.py))return;throw new Error("bad point: ZERO")}const{x,y:U}=M.toAffine();if(!e.isValid(x)||!e.isValid(U))throw new Error("bad point: x or y not FE");const K=e.sqr(U),O=o(x);if(!e.eql(K,O))throw new Error("bad point: equation left != right");if(!M.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class B{constructor(x,U,K){if(this.px=x,this.py=U,this.pz=K,x==null||!e.isValid(x))throw new Error("x required");if(U==null||!e.isValid(U))throw new Error("y required");if(K==null||!e.isValid(K))throw new Error("z required");Object.freeze(this)}static fromAffine(x){const{x:U,y:K}=x||{};if(!x||!e.isValid(U)||!e.isValid(K))throw new Error("invalid affine point");if(x instanceof B)throw new Error("projective point not allowed");const O=q=>e.eql(q,e.ZERO);return O(U)&&O(K)?B.ZERO:new B(U,K,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const U=e.invertBatch(x.map(K=>K.pz));return x.map((K,O)=>K.toAffine(U[O])).map(B.fromAffine)}static fromHex(x){const U=B.fromAffine(i(pe("pointHex",x)));return U.assertValidity(),U}static fromPrivateKey(x){return B.BASE.multiply(f(x))}static msm(x,U){return Xo(B,r,x,U)}_setWindowSize(x){P.setWindowSize(this,x)}assertValidity(){I(this)}hasEvenY(){const{y:x}=this.toAffine();if(e.isOdd)return!e.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){w(x);const{px:U,py:K,pz:O}=this,{px:q,py:Z,pz:$}=x,G=e.eql(e.mul(U,$),e.mul(q,O)),J=e.eql(e.mul(K,$),e.mul(Z,O));return G&&J}negate(){return new B(this.px,e.neg(this.py),this.pz)}double(){const{a:x,b:U}=t,K=e.mul(U,go),{px:O,py:q,pz:Z}=this;let $=e.ZERO,G=e.ZERO,J=e.ZERO,nt=e.mul(O,O),Ut=e.mul(q,q),it=e.mul(Z,Z),ut=e.mul(O,q);return ut=e.add(ut,ut),J=e.mul(O,Z),J=e.add(J,J),$=e.mul(x,J),G=e.mul(K,it),G=e.add($,G),$=e.sub(Ut,G),G=e.add(Ut,G),G=e.mul($,G),$=e.mul(ut,$),J=e.mul(K,J),it=e.mul(x,it),ut=e.sub(nt,it),ut=e.mul(x,ut),ut=e.add(ut,J),J=e.add(nt,nt),nt=e.add(J,nt),nt=e.add(nt,it),nt=e.mul(nt,ut),G=e.add(G,nt),it=e.mul(q,Z),it=e.add(it,it),nt=e.mul(it,ut),$=e.sub($,nt),J=e.mul(it,Ut),J=e.add(J,J),J=e.add(J,J),new B($,G,J)}add(x){w(x);const{px:U,py:K,pz:O}=this,{px:q,py:Z,pz:$}=x;let G=e.ZERO,J=e.ZERO,nt=e.ZERO;const Ut=t.a,it=e.mul(t.b,go);let ut=e.mul(U,q),A=e.mul(K,Z),a=e.mul(O,$),d=e.add(U,K),g=e.add(q,Z);d=e.mul(d,g),g=e.add(ut,A),d=e.sub(d,g),g=e.add(U,O);let m=e.add(q,$);return g=e.mul(g,m),m=e.add(ut,a),g=e.sub(g,m),m=e.add(K,O),G=e.add(Z,$),m=e.mul(m,G),G=e.add(A,a),m=e.sub(m,G),nt=e.mul(Ut,g),G=e.mul(it,a),nt=e.add(G,nt),G=e.sub(A,nt),nt=e.add(A,nt),J=e.mul(G,nt),A=e.add(ut,ut),A=e.add(A,ut),a=e.mul(Ut,a),g=e.mul(it,g),A=e.add(A,a),a=e.sub(ut,a),a=e.mul(Ut,a),g=e.add(g,a),ut=e.mul(A,g),J=e.add(J,ut),ut=e.mul(m,g),G=e.mul(d,G),G=e.sub(G,ut),ut=e.mul(d,A),nt=e.mul(m,nt),nt=e.add(nt,ut),new B(G,J,nt)}subtract(x){return this.add(x.negate())}is0(){return this.equals(B.ZERO)}wNAF(x){return P.wNAFCached(this,x,B.normalizeZ)}multiplyUnsafe(x){$e("scalar",x,dr,t.n);const U=B.ZERO;if(x===dr)return U;if(x===me)return this;const{endo:K}=t;if(!K)return P.unsafeLadder(this,x);let{k1neg:O,k1:q,k2neg:Z,k2:$}=K.splitScalar(x),G=U,J=U,nt=this;for(;q>dr||$>dr;)q&me&&(G=G.add(nt)),$&me&&(J=J.add(nt)),nt=nt.double(),q>>=me,$>>=me;return O&&(G=G.negate()),Z&&(J=J.negate()),J=new B(e.mul(J.px,K.beta),J.py,J.pz),G.add(J)}multiply(x){const{endo:U,n:K}=t;$e("scalar",x,me,K);let O,q;if(U){const{k1neg:Z,k1:$,k2neg:G,k2:J}=U.splitScalar(x);let{p:nt,f:Ut}=this.wNAF($),{p:it,f:ut}=this.wNAF(J);nt=P.constTimeNegate(Z,nt),it=P.constTimeNegate(G,it),it=new B(e.mul(it.px,U.beta),it.py,it.pz),O=nt.add(it),q=Ut.add(ut)}else{const{p:Z,f:$}=this.wNAF(x);O=Z,q=$}return B.normalizeZ([O,q])[0]}multiplyAndAddUnsafe(x,U,K){const O=B.BASE,q=($,G)=>G===dr||G===me||!$.equals(O)?$.multiplyUnsafe(G):$.multiply(G),Z=q(this,U).add(q(x,K));return Z.is0()?void 0:Z}toAffine(x){return p(this,x)}isTorsionFree(){const{h:x,isTorsionFree:U}=t;if(x===me)return!0;if(U)return U(B,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:U}=t;return x===me?this:U?U(B,this):this.multiplyUnsafe(t.h)}toRawBytes(x=!0){return gr("isCompressed",x),this.assertValidity(),s(B,this,x)}toHex(x=!0){return gr("isCompressed",x),Pr(this.toRawBytes(x))}}B.BASE=new B(t.Gx,t.Gy,e.ONE),B.ZERO=new B(e.ZERO,e.ONE,e.ZERO);const _=t.nBitLength,P=Jo(B,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:B,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:u}}function Ah(n){const t=ps(n);return en(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function _h(n){const t=Ah(n),{Fp:e,n:r}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(a){return Ht(a,r)}function u(a){return Yi(a,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:w,weierstrassEquation:p,isWithinCurveOrder:I}=xh({...t,toBytes(a,d,g){const m=d.toAffine(),b=e.toBytes(m.x),E=Lr;return gr("isCompressed",g),g?E(Uint8Array.from([d.hasEvenY()?2:3]),b):E(Uint8Array.from([4]),b,e.toBytes(m.y))},fromBytes(a){const d=a.length,g=a[0],m=a.subarray(1);if(d===s&&(g===2||g===3)){const b=Mr(m);if(!Gn(b,me,e.ORDER))throw new Error("Point is not on curve");const E=p(b);let R;try{R=e.sqrt(E)}catch(S){const W=S instanceof Error?": "+S.message:"";throw new Error("Point is not on curve"+W)}const k=(R&me)===me;return(g&1)===1!==k&&(R=e.neg(R)),{x:b,y:R}}else if(d===i&&g===4){const b=e.fromBytes(m.subarray(0,e.BYTES)),E=e.fromBytes(m.subarray(e.BYTES,2*e.BYTES));return{x:b,y:E}}else throw new Error(`Point of length ${d} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),B=a=>Pr(Jr(a,t.nByteLength));function _(a){const d=r>>me;return a>d}function P(a){return _(a)?o(-a):a}const M=(a,d,g)=>Mr(a.slice(d,g));class x{constructor(d,g,m){this.r=d,this.s=g,this.recovery=m,this.assertValidity()}static fromCompact(d){const g=t.nByteLength;return d=pe("compactSignature",d,g*2),new x(M(d,0,g),M(d,g,2*g))}static fromDER(d){const{r:g,s:m}=hr.toSig(pe("DER",d));return new x(g,m)}assertValidity(){$e("r",this.r,me,r),$e("s",this.s,me,r)}addRecoveryBit(d){return new x(this.r,this.s,d)}recoverPublicKey(d){const{r:g,s:m,recovery:b}=this,E=$(pe("msgHash",d));if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");const R=b===2||b===3?g+t.n:g;if(R>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const k=b&1?"03":"02",h=f.fromHex(k+B(R)),S=u(R),W=o(-E*S),D=o(m*S),X=f.BASE.multiplyAndAddUnsafe(h,W,D);if(!X)throw new Error("point at infinify");return X.assertValidity(),X}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Zr(this.toDERHex())}toDERHex(){return hr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Zr(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const U={isValidPrivateKey(a){try{return w(a),!0}catch{return!1}},normPrivateKeyToScalar:w,randomPrivateKey:()=>{const a=Zo(t.n);return Cu(t.randomBytes(a),t.n)},precompute(a=8,d=f.BASE){return d._setWindowSize(a),d.multiply(BigInt(3)),d}};function K(a,d=!0){return f.fromPrivateKey(a).toRawBytes(d)}function O(a){const d=Tr(a),g=typeof a=="string",m=(d||g)&&a.length;return d?m===s||m===i:g?m===2*s||m===2*i:a instanceof f}function q(a,d,g=!0){if(O(a))throw new Error("first arg must be private key");if(!O(d))throw new Error("second arg must be public key");return f.fromHex(d).multiply(w(a)).toRawBytes(g)}const Z=t.bits2int||function(a){const d=Mr(a),g=a.length*8-t.nBitLength;return g>0?d>>BigInt(g):d},$=t.bits2int_modN||function(a){return o(Z(a))},G=ds(t.nBitLength);function J(a){return $e(`num < 2^${t.nBitLength}`,a,dr,G),Jr(a,t.nByteLength)}function nt(a,d,g=Ut){if(["recovered","canonical"].some(ct=>ct in g))throw new Error("sign() legacy options not supported");const{hash:m,randomBytes:b}=t;let{lowS:E,prehash:R,extraEntropy:k}=g;E==null&&(E=!0),a=pe("msgHash",a),po(g),R&&(a=pe("prehashed msgHash",m(a)));const h=$(a),S=w(d),W=[J(S),J(h)];if(k!=null&&k!==!1){const ct=k===!0?b(e.BYTES):k;W.push(pe("extraEntropy",ct))}const D=Lr(...W),X=h;function bt(ct){const ht=Z(ct);if(!I(ht))return;const Jt=u(ht),dt=f.BASE.multiply(ht).toAffine(),ft=o(dt.x);if(ft===dr)return;const ve=o(Jt*o(X+ft*S));if(ve===dr)return;let Rt=(dt.x===ft?0:2)|Number(dt.y&me),_t=ve;return E&&_(ve)&&(_t=P(ve),Rt^=1),new x(ft,_t,Rt)}return{seed:D,k2sig:bt}}const Ut={lowS:t.lowS,prehash:!1},it={lowS:t.lowS,prehash:!1};function ut(a,d,g=Ut){const{seed:m,k2sig:b}=nt(a,d,g),E=t;return Go(E.hash.outputLen,E.nByteLength,E.hmac)(m,b)}f.BASE._setWindowSize(8);function A(a,d,g,m=it){var dt;const b=a;if(d=pe("msgHash",d),g=pe("publicKey",g),"strict"in m)throw new Error("options.strict was renamed to lowS");po(m);const{lowS:E,prehash:R}=m;let k,h;try{if(typeof b=="string"||Tr(b))try{k=x.fromDER(b)}catch(ft){if(!(ft instanceof hr.Err))throw ft;k=x.fromCompact(b)}else if(typeof b=="object"&&typeof b.r=="bigint"&&typeof b.s=="bigint"){const{r:ft,s:ve}=b;k=new x(ft,ve)}else throw new Error("PARSE");h=f.fromHex(g)}catch(ft){if(ft.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(E&&k.hasHighS())return!1;R&&(d=t.hash(d));const{r:S,s:W}=k,D=$(d),X=u(W),bt=o(D*X),ct=o(S*X),ht=(dt=f.BASE.multiplyAndAddUnsafe(h,bt,ct))==null?void 0:dt.toAffine();return ht?o(ht.x)===S:!1}return{CURVE:t,getPublicKey:K,getSharedSecret:q,sign:ut,verify:A,ProjectivePoint:f,Signature:x,utils:U}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bh(n){return{hash:n,hmac:(t,...e)=>Wa(n,t,Hc(...e)),randomBytes:zo}}function Rh(n,t){const e=r=>_h({...n,...Bh(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),yo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Mh=BigInt(1),Qi=BigInt(2),mo=(n,t)=>(n+t/Qi)/t;function Th(n){const t=qa,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),u=BigInt(44),f=BigInt(88),w=n*n*n%t,p=w*w*n%t,I=Yt(p,e,t)*p%t,B=Yt(I,e,t)*p%t,_=Yt(B,Qi,t)*w%t,P=Yt(_,s,t)*_%t,M=Yt(P,i,t)*P%t,x=Yt(M,u,t)*M%t,U=Yt(x,f,t)*x%t,K=Yt(U,u,t)*M%t,O=Yt(K,e,t)*p%t,q=Yt(O,o,t)*P%t,Z=Yt(q,r,t)*w%t,$=Yt(Z,Qi,t);if(!ts.eql(ts.sqr($),n))throw new Error("Cannot find square root");return $}const ts=jn(qa,void 0,void 0,{sqrt:Th}),ei=Rh({a:BigInt(0),b:BigInt(7),Fp:ts,n:yo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=yo,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Mh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),u=mo(i*n,t),f=mo(-r*n,t);let w=Ht(n-u*e-f*s,t),p=Ht(-u*r-f*i,t);const I=w>o,B=p>o;if(I&&(w=t-w),B&&(p=t-p),w>o||p>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:I,k1:w,k2neg:B,k2:p}}}},Ji);BigInt(0);ei.ProjectivePoint;const Ph=rn.utils.randomPrivateKey,wo=()=>{const n=rn.utils.randomPrivateKey(),t=Wn(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Wn=rn.getPublicKey;function bo(n){try{return rn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Ts=(n,t)=>rn.sign(n,t.slice(0,32)),Lh=rn.verify,wt=n=>st.isBuffer(n)?n:n instanceof Uint8Array?st.from(n.buffer,n.byteOffset,n.byteLength):st.from(n);class Ps{constructor(t){Object.assign(this,t)}encode(){return st.from(aa(hn,this))}static decode(t){return ca(hn,this,t)}static decodeUnchecked(t){return ra(hn,this,t)}}class Ch extends Ps{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const hn=new Map;var Da;const $a=32,ir=32;function Uh(n){return n._bn!==void 0}let ko=1;class V extends Ps{constructor(t){if(super({}),this._bn=void 0,Uh(t))this._bn=t._bn;else{if(typeof t=="string"){const e=xe.decode(t);if(e.length!=ir)throw new Error("Invalid public key input");this._bn=new ao(e)}else this._bn=new ao(t);if(this._bn.byteLength()>ir)throw new Error("Invalid public key input")}}static unique(){const t=new V(ko);return ko+=1,new V(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return xe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(st);if(t.length===ir)return t;const e=st.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=st.concat([t.toBuffer(),st.from(e),r.toBuffer()]),i=Ji(s);return new V(i)}static createProgramAddressSync(t,e){let r=st.alloc(0);t.forEach(function(i){if(i.length>$a)throw new TypeError("Max seed length exceeded");r=st.concat([r,wt(i)])}),r=st.concat([r,e.toBuffer(),st.from("ProgramDerivedAddress")]);const s=Ji(r);if(bo(s))throw new Error("Invalid seeds, address must fall off the curve");return new V(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(st.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new V(t);return bo(e.toBytes())}}Da=V;V.default=new Da("11111111111111111111111111111111");hn.set(V,{kind:"struct",fields:[["_bn","u256"]]});class Oh{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=wt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=wt(Ph()),this._publicKey=wt(Wn(this._secretKey))}get publicKey(){return new V(this._publicKey)}get secretKey(){return st.concat([this._secretKey,this._publicKey],64)}}const Nh=new V("BPFLoader1111111111111111111111111111111111"),Er=1232,ri=127,gn=64;class Ls extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ls.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Cs extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Cs.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Hr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Hr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class yn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const kt=(n="publicKey")=>qt(32,n),zh=(n="signature")=>qt(64,n),Rr=(n="string")=>{const t=et([tt("length"),tt("lengthPadding"),qt(Ir(tt(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,u)=>{const f={chars:st.from(i,"utf8")};return r(f,o,u)},s.alloc=i=>tt().span+tt().span+st.from(i,"utf8").length,s},Kh=(n="authorized")=>et([kt("staker"),kt("withdrawer")],n),Fh=(n="lockup")=>et([Ke("unixTimestamp"),Ke("epoch"),kt("custodian")],n),Wh=(n="voteInit")=>et([kt("nodePubkey"),kt("authorizedVoter"),kt("authorizedWithdrawer"),St("commission")],n),qh=(n="voteAuthorizeWithSeedArgs")=>et([tt("voteAuthorizationType"),kt("currentAuthorityDerivedKeyOwnerPubkey"),Rr("currentAuthorityDerivedKeySeed"),kt("newAuthorized")],n);function Ha(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Ha({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function Ue(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Fe(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function It(n,t){if(!n)throw new Error(t||"Assertion failed")}class ni{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const u=o.toBase58();let f=r.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(u,f)),f},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const u of o.keys){const f=s(u.pubkey);f.isSigner||(f.isSigner=u.isSigner),f.isWritable||(f.isWritable=u.isWritable)}}return new ni(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];It(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,f])=>f.isSigner&&f.isWritable),r=t.filter(([,f])=>f.isSigner&&!f.isWritable),s=t.filter(([,f])=>!f.isSigner&&f.isWritable),i=t.filter(([,f])=>!f.isSigner&&!f.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{It(e.length>0,"Expected at least one writable signer key");const[f]=e[0];It(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...e.map(([f])=>new V(f)),...r.map(([f])=>new V(f)),...s.map(([f])=>new V(f)),...i.map(([f])=>new V(f))];return[o,u]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const u=new V(i),f=t.findIndex(w=>w.equals(u));f>=0&&(It(f<256,"Max lookup table index exceeded"),r.push(f),s.push(u),this.keyMetaMap.delete(i))}return[r,s]}}const Va="Reached end of buffer unexpectedly";function er(n){if(n.length===0)throw new Error(Va);return n.shift()}function Oe(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(Va);return n.splice(...t)}class Je{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new V(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:xe.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new yn(this.staticAccountKeys)}static compile(t){const e=ni.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new yn(s).compileInstructions(t.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:xe.encode(u.data)}));return new Je({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Fe(e,t);const r=this.instructions.map(I=>{const{accounts:B,programIdIndex:_}=I,P=Array.from(xe.decode(I.data));let M=[];Fe(M,B.length);let x=[];return Fe(x,P.length),{programIdIndex:_,keyIndicesCount:st.from(M),keyIndices:B,dataLength:st.from(x),data:P}});let s=[];Fe(s,r.length);let i=st.alloc(Er);st.from(s).copy(i);let o=s.length;r.forEach(I=>{const _=et([St("programIdIndex"),qt(I.keyIndicesCount.length,"keyIndicesCount"),Ae(St("keyIndex"),I.keyIndices.length,"keyIndices"),qt(I.dataLength.length,"dataLength"),Ae(St("userdatum"),I.data.length,"data")]).encode(I,i,o);o+=_}),i=i.slice(0,o);const u=et([qt(1,"numRequiredSignatures"),qt(1,"numReadonlySignedAccounts"),qt(1,"numReadonlyUnsignedAccounts"),qt(e.length,"keyCount"),Ae(kt("key"),t,"keys"),kt("recentBlockhash")]),f={numRequiredSignatures:st.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:st.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:st.from([this.header.numReadonlyUnsignedAccounts]),keyCount:st.from(e),keys:this.accountKeys.map(I=>wt(I.toBytes())),recentBlockhash:xe.decode(this.recentBlockhash)};let w=st.alloc(2048);const p=u.encode(f,w);return i.copy(w,p),w.slice(0,p+i.length)}static from(t){let e=[...t];const r=er(e);if(r!==(r&ri))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=er(e),i=er(e),o=Ue(e);let u=[];for(let B=0;B<o;B++){const _=Oe(e,0,ir);u.push(new V(st.from(_)))}const f=Oe(e,0,ir),w=Ue(e);let p=[];for(let B=0;B<w;B++){const _=er(e),P=Ue(e),M=Oe(e,0,P),x=Ue(e),U=Oe(e,0,x),K=xe.encode(st.from(U));p.push({programIdIndex:_,accounts:M,data:K})}const I={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:xe.encode(st.from(f)),accountKeys:u,instructions:p};return new Je(I)}}class Cr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new yn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,u)=>o+u.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=ni.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const p of i){const I=e.extractTableLookup(p);if(I!==void 0){const[B,{writable:_,readonly:P}]=I;r.push(B),s.writable.push(..._),s.readonly.push(...P)}}const[o,u]=e.getMessageComponents(),w=new yn(u,s).compileInstructions(t.instructions);return new Cr({header:o,staticAccountKeys:u,recentBlockhash:t.recentBlockhash,compiledInstructions:w,addressTableLookups:r})}serialize(){const t=Array();Fe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Fe(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Fe(i,this.addressTableLookups.length);const o=et([St("prefix"),et([St("numRequiredSignatures"),St("numReadonlySignedAccounts"),St("numReadonlyUnsignedAccounts")],"header"),qt(t.length,"staticAccountKeysLength"),Ae(kt(),this.staticAccountKeys.length,"staticAccountKeys"),kt("recentBlockhash"),qt(r.length,"instructionsLength"),qt(e.length,"serializedInstructions"),qt(i.length,"addressTableLookupsLength"),qt(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(Er),w=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(p=>p.toBytes()),recentBlockhash:xe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},u);return u.slice(0,w)}serializeInstructions(){let t=0;const e=new Uint8Array(Er);for(const r of this.compiledInstructions){const s=Array();Fe(s,r.accountKeyIndexes.length);const i=Array();Fe(i,r.data.length);const o=et([St("programIdIndex"),qt(s.length,"encodedAccountKeyIndexesLength"),Ae(St(),r.accountKeyIndexes.length,"accountKeyIndexes"),qt(i.length,"encodedDataLength"),qt(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Er);for(const r of this.addressTableLookups){const s=Array();Fe(s,r.writableIndexes.length);const i=Array();Fe(i,r.readonlyIndexes.length);const o=et([kt("accountKey"),qt(s.length,"encodedWritableIndexesLength"),Ae(St(),r.writableIndexes.length,"writableIndexes"),qt(i.length,"encodedReadonlyIndexesLength"),Ae(St(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=er(e),s=r&ri;It(r!==s,"Expected versioned message but received legacy message");const i=s;It(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:er(e),numReadonlySignedAccounts:er(e),numReadonlyUnsignedAccounts:er(e)},u=[],f=Ue(e);for(let P=0;P<f;P++)u.push(new V(Oe(e,0,ir)));const w=xe.encode(Oe(e,0,ir)),p=Ue(e),I=[];for(let P=0;P<p;P++){const M=er(e),x=Ue(e),U=Oe(e,0,x),K=Ue(e),O=new Uint8Array(Oe(e,0,K));I.push({programIdIndex:M,accountKeyIndexes:U,data:O})}const B=Ue(e),_=[];for(let P=0;P<B;P++){const M=new V(Oe(e,0,ir)),x=Ue(e),U=Oe(e,0,x),K=Ue(e),O=Oe(e,0,K);_.push({accountKey:M,writableIndexes:U,readonlyIndexes:O})}return new Cr({header:o,staticAccountKeys:u,recentBlockhash:w,compiledInstructions:I,addressTableLookups:_})}}const Us={deserializeMessageVersion(n){const t=n[0],e=t&ri;return e===t?"legacy":e},deserialize:n=>{const t=Us.deserializeMessageVersion(n);if(t==="legacy")return Je.from(n);if(t===0)return Cr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let lr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const Dh=st.alloc(gn).fill(0);class Ct{constructor(t){this.keys=void 0,this.programId=void 0,this.data=st.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class xt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ct(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let M=0;M<e.length;M++)if(e[M].programId===void 0)throw new Error(`Transaction instruction index ${M} has undefined program id`);const s=[],i=[];e.forEach(M=>{M.keys.forEach(U=>{i.push({...U})});const x=M.programId.toString();s.includes(x)||s.push(x)}),s.forEach(M=>{i.push({pubkey:new V(M),isSigner:!1,isWritable:!1})});const o=[];i.forEach(M=>{const x=M.pubkey.toString(),U=o.findIndex(K=>K.pubkey.toString()===x);U>-1?(o[U].isWritable=o[U].isWritable||M.isWritable,o[U].isSigner=o[U].isSigner||M.isSigner):o.push(M)}),o.sort(function(M,x){if(M.isSigner!==x.isSigner)return M.isSigner?-1:1;if(M.isWritable!==x.isWritable)return M.isWritable?-1:1;const U={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return M.pubkey.toBase58().localeCompare(x.pubkey.toBase58(),"en",U)});const u=o.findIndex(M=>M.pubkey.equals(r));if(u>-1){const[M]=o.splice(u,1);M.isSigner=!0,M.isWritable=!0,o.unshift(M)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const M of this.signatures){const x=o.findIndex(U=>U.pubkey.equals(M.publicKey));if(x>-1)o[x].isSigner||(o[x].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${M.publicKey.toString()}`)}let f=0,w=0,p=0;const I=[],B=[];o.forEach(({pubkey:M,isSigner:x,isWritable:U})=>{x?(I.push(M.toString()),f+=1,U||(w+=1)):(B.push(M.toString()),U||(p+=1))});const _=I.concat(B),P=e.map(M=>{const{data:x,programId:U}=M;return{programIdIndex:_.indexOf(U.toString()),accounts:M.keys.map(K=>_.indexOf(K.pubkey.toString())),data:xe.encode(x)}});return P.forEach(M=>{It(M.programIdIndex>=0),M.accounts.forEach(x=>It(x>=0))}),new Je({header:{numRequiredSignatures:f,numReadonlySignedAccounts:w,numReadonlyUnsignedAccounts:p},accountKeys:_,recentBlockhash:t,instructions:P})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=Ts(r,s.secretKey);this._addSignature(s.publicKey,wt(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){It(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=st.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||(r.missing=[])).push(i):Lh(s,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Fe(r,e.length);const s=r.length+e.length*64+t.length,i=st.alloc(s);return It(e.length<256),st.from(r).copy(i,0),e.forEach(({signature:o},u)=>{o!==null&&(It(o.length===64,"signature has invalid length"),st.from(o).copy(i,r.length+u*64))}),t.copy(i,r.length+e.length*64),It(i.length<=Er,`Transaction too large: ${i.length} > ${Er}`),i}get keys(){return It(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return It(this.instructions.length===1),this.instructions[0].programId}get data(){return It(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Ue(e);let s=[];for(let i=0;i<r;i++){const o=Oe(e,0,gn);s.push(xe.encode(st.from(o)))}return xt.populate(Je.from(e),s)}static populate(t,e=[]){const r=new xt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==xe.encode(Dh)?null:xe.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const u=t.accountKeys[o];return{pubkey:u,isSigner:r.signatures.some(f=>f.publicKey.toString()===u.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new Ct({keys:i,programId:t.accountKeys[s.programIdIndex],data:xe.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class Os{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=r,w=o-u;It(w>0,"Message header is invalid");const p=t.staticAccountKeys.length-o-f;It(p>=0,"Message header is invalid");const I=t.getAccountKeys(e),B=I.get(0);if(B===void 0)throw new Error("Failed to decompile message because no account keys were found");const _=[];for(const P of s){const M=[];for(const U of P.accountKeyIndexes){const K=I.get(U);if(K===void 0)throw new Error(`Failed to find key for account key index ${U}`);const O=U<o;let q;O?q=U<w:U<I.staticAccountKeys.length?q=U-o<p:q=U-I.staticAccountKeys.length<I.accountKeysFromLookups.writable.length,M.push({pubkey:K,isSigner:U<r.numRequiredSignatures,isWritable:q})}const x=I.get(P.programIdIndex);if(x===void 0)throw new Error(`Failed to find program id for program id index ${P.programIdIndex}`);_.push(new Ct({programId:x,data:wt(P.data),keys:M}))}return new Os({payerKey:B,instructions:_,recentBlockhash:i})}compileToLegacyMessage(){return Je.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Cr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Ns{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)It(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(gn));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Fe(e,this.signatures.length);const r=et([qt(e.length,"encodedSignaturesLength"),Ae(zh(),this.signatures.length,"signatures"),qt(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=Ue(e);for(let o=0;o<s;o++)r.push(new Uint8Array(Oe(e,0,gn)));const i=Us.deserialize(new Uint8Array(e));return new Ns(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(o=>o.equals(s.publicKey));It(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Ts(e,s.secretKey)}}addSignature(t,e){It(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));It(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const $h=160,Hh=64,Vh=$h/Hh,Ga=1e3/Vh,Qe=new V("SysvarC1ock11111111111111111111111111111111"),Gh=new V("SysvarEpochSchedu1e111111111111111111111111"),jh=new V("Sysvar1nstructions1111111111111111111111111"),Pn=new V("SysvarRecentB1ockHashes11111111111111111111"),Qr=new V("SysvarRent111111111111111111111111111111111"),Yh=new V("SysvarRewards111111111111111111111111111111"),Zh=new V("SysvarS1otHashes111111111111111111111111111"),Jh=new V("SysvarS1otHistory11111111111111111111111111"),Ln=new V("SysvarStakeHistory1111111111111111111111111");class mn extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(t){case"send":u=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":u=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:u=`Unknown action '${(f=>f)(t)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const Xh={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class rt extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function es(n,t,e,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,s);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:u}=t.nonceInfo,f=u.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(i,r&&r.commitment)).value;if(o.err)throw i!=null?new mn({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function Br(n){return new Promise(t=>setTimeout(t,n))}function vt(n,t){const e=n.layout.span>=0?n.layout.span:Ha(n,t),r=st.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}function At(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const ja=Ie("lamportsPerSignature"),Ya=et([tt("version"),tt("state"),kt("authorizedPubkey"),kt("nonce"),et([ja],"feeCalculator")]),rs=Ya.span;class ii{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ya.decode(wt(t),0);return new ii({authorizedPubkey:new V(e.authorizedPubkey),nonce:new V(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Qh=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},tf=n=>t=>{const e=qt(n,t),{encode:r,decode:s}=Qh(e),i=e;return i.decode=(o,u)=>{const f=s(o,u);return xl(st.from(f))},i.encode=(o,u,f)=>{const w=Aa(o,n);return r(w,u,f)},i},tn=tf(8);class ef{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=tt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(zt))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:s}=At(zt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new V(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=At(zt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:s}=At(zt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new V(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=At(zt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:s,programId:i}=At(zt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new V(e),seed:r,space:s,programId:new V(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=At(zt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new V(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:s}=At(zt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new V(e),seed:r,programId:new V(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:s,space:i,programId:o}=At(zt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new V(e),seed:r,lamports:s,space:i,programId:new V(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=At(zt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new V(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),At(zt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=At(zt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=At(zt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new V(e)}}static checkProgramId(t){if(!t.equals(be.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const zt=Object.freeze({Create:{index:0,layout:et([tt("instruction"),Ke("lamports"),Ke("space"),kt("programId")])},Assign:{index:1,layout:et([tt("instruction"),kt("programId")])},Transfer:{index:2,layout:et([tt("instruction"),tn("lamports")])},CreateWithSeed:{index:3,layout:et([tt("instruction"),kt("base"),Rr("seed"),Ke("lamports"),Ke("space"),kt("programId")])},AdvanceNonceAccount:{index:4,layout:et([tt("instruction")])},WithdrawNonceAccount:{index:5,layout:et([tt("instruction"),Ke("lamports")])},InitializeNonceAccount:{index:6,layout:et([tt("instruction"),kt("authorized")])},AuthorizeNonceAccount:{index:7,layout:et([tt("instruction"),kt("authorized")])},Allocate:{index:8,layout:et([tt("instruction"),Ke("space")])},AllocateWithSeed:{index:9,layout:et([tt("instruction"),kt("base"),Rr("seed"),Ke("space"),kt("programId")])},AssignWithSeed:{index:10,layout:et([tt("instruction"),kt("base"),Rr("seed"),kt("programId")])},TransferWithSeed:{index:11,layout:et([tt("instruction"),tn("lamports"),Rr("seed"),kt("programId")])},UpgradeNonceAccount:{index:12,layout:et([tt("instruction")])}});class be{constructor(){}static createAccount(t){const e=zt.Create,r=vt(e,{lamports:t.lamports,space:t.space,programId:wt(t.programId.toBuffer())});return new Ct({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=zt.TransferWithSeed;e=vt(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:wt(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=zt.Transfer;e=vt(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Ct({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=zt.AssignWithSeed;e=vt(s,{base:wt(t.basePubkey.toBuffer()),seed:t.seed,programId:wt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=zt.Assign;e=vt(s,{programId:wt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ct({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=zt.CreateWithSeed,r=vt(e,{base:wt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:wt(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Ct({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new xt;"basePubkey"in t&&"seed"in t?e.add(be.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:rs,programId:this.programId})):e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:rs,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=zt.InitializeNonceAccount,r=vt(e,{authorized:wt(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Pn,isSigner:!1,isWritable:!1},{pubkey:Qr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Ct(s)}static nonceAdvance(t){const e=zt.AdvanceNonceAccount,r=vt(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Pn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Ct(s)}static nonceWithdraw(t){const e=zt.WithdrawNonceAccount,r=vt(e,{lamports:t.lamports});return new Ct({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Pn,isSigner:!1,isWritable:!1},{pubkey:Qr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=zt.AuthorizeNonceAccount,r=vt(e,{authorized:wt(t.newAuthorizedPubkey.toBuffer())});return new Ct({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=zt.AllocateWithSeed;e=vt(s,{base:wt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:wt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=zt.Allocate;e=vt(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ct({keys:r,programId:this.programId,data:e})}}be.programId=new V("11111111111111111111111111111111");const rf=Er-300;class Ur{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Ur.chunkSize)+1+1)}static async load(t,e,r,s,i){{const I=await t.getMinimumBalanceForRentExemption(i.length),B=await t.getAccountInfo(r.publicKey,"confirmed");let _=null;if(B!==null){if(B.executable)return console.error("Program load failed, account is already executable"),!1;B.data.length!==i.length&&(_=_||new xt,_.add(be.allocate({accountPubkey:r.publicKey,space:i.length}))),B.owner.equals(s)||(_=_||new xt,_.add(be.assign({accountPubkey:r.publicKey,programId:s}))),B.lamports<I&&(_=_||new xt,_.add(be.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:I-B.lamports})))}else _=new xt().add(be.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:I>0?I:1,space:i.length,programId:s}));_!==null&&await es(t,_,[e,r],{commitment:"confirmed"})}const o=et([tt("instruction"),tt("offset"),tt("bytesLength"),tt("bytesLengthPadding"),Ae(St("byte"),Ir(tt(),-8),"bytes")]),u=Ur.chunkSize;let f=0,w=i,p=[];for(;w.length>0;){const I=w.slice(0,u),B=st.alloc(u+16);o.encode({instruction:0,offset:f,bytes:I,bytesLength:0,bytesLengthPadding:0},B);const _=new xt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:B});p.push(es(t,_,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await Br(1e3/4),f+=u,w=w.slice(u)}await Promise.all(p);{const I=et([tt("instruction")]),B=st.alloc(I.span);I.encode({instruction:1},B);const _=new xt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Qr,isSigner:!1,isWritable:!1}],programId:s,data:B}),P="processed",M=await t.sendTransaction(_,[e,r],{preflightCommitment:P}),{context:x,value:U}=await t.confirmTransaction({signature:M,lastValidBlockHeight:_.lastValidBlockHeight,blockhash:_.recentBlockhash},P);if(U.err)throw new Error(`Transaction ${M} failed (${JSON.stringify(U)})`);for(;;){try{if(await t.getSlot({commitment:P})>x.slot)break}catch{}await new Promise(K=>setTimeout(K,Math.round(Ga/2)))}}return!0}}Ur.chunkSize=rf;const nf=new V("BPFLoader2111111111111111111111111111111111");class sf{static getMinNumSignatures(t){return Ur.getMinNumSignatures(t)}static load(t,e,r,s,i){return Ur.load(t,e,r,i,s)}}function of(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wi,vo;function af(){if(vo)return Wi;vo=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,u,f,w,p,I;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(I=n.call(r),I==="[object Array]"){for(u="[",o=r.length-1,i=0;i<o;i++)u+=e(r[i],!0)+",";return o>-1&&(u+=e(r[i],!0)),u+"]"}else if(I==="[object Object]"){for(f=t(r).sort(),o=f.length,u="",i=0;i<o;)w=f[i],p=e(r[w],!1),p!==void 0&&(u&&(u+=","),u+=JSON.stringify(w)+":"+p),i++;return"{"+u+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Wi=function(r){var s=e(r,!1);if(s!==void 0)return""+s},Wi}var cf=af(),So=of(cf);const ln=32;function qi(n){let t=0;for(;n>1;)n/=2,t++;return t}function uf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Za{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=qi(uf(t+ln+1))-qi(ln)-1,r=this.getSlotsInEpoch(e),s=t-(r-ln);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*ln:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+qi(ln)):this.slotsPerEpoch}}var lf=globalThis.fetch;class hf extends fh{constructor(t,e,r){const s=i=>{const o=lh(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function ff(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Io=56;class ns{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=ff(df,t),r=t.length-Io;It(r>=0,"lookup table is invalid"),It(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=et([Ae(kt(),s,"addresses")]).decode(t.slice(Io));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new V(e.authority[0]):void 0,addresses:i.map(o=>new V(o))}}}const df={index:1,layout:et([tt("typeIndex"),tn("deactivationSlot"),Ie("lastExtendedSlot"),St("lastExtendedStartIndex"),St(),Ae(kt(),Ir(St(),-1),"authority")])},pf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function gf(n){const t=n.match(pf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",u=s==null?null:parseInt(s.slice(1),10),f=u==null?"":`:${u+1}`;return`${o}//${r}${f}${i}`}const jt=En(Bs(V),H(),n=>new V(n)),Ja=Rs([H(),Vt("base64")]),zs=En(Bs(st),Ja,n=>st.from(n[0],"base64")),Xa=30*1e3;function yf(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Nt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function Eo(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Qa(n){return Le([F({jsonrpc:Vt("2.0"),id:H(),result:n}),F({jsonrpc:Vt("2.0"),id:H(),error:F({code:on(),message:H(),data:ot(Cl())})})])}const mf=Qa(on());function mt(n){return En(Qa(n),mf,t=>"error"in t?t:{...t,result:j(t.result,n)})}function Zt(n){return mt(F({context:F({slot:C()}),value:n}))}function si(n){return F({context:F({slot:C()}),value:n})}function Di(n,t){return n===0?new Cr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new V(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:xe.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Je(t)}const wf=F({foundation:C(),foundationTerm:C(),initial:C(),taper:C(),terminal:C()}),bf=mt(Y(Q(F({epoch:C(),effectiveSlot:C(),amount:C(),postBalance:C(),commission:ot(Q(C()))})))),kf=Y(F({slot:C(),prioritizationFee:C()})),vf=F({total:C(),validator:C(),foundation:C(),epoch:C()}),Sf=F({epoch:C(),slotIndex:C(),slotsInEpoch:C(),absoluteSlot:C(),blockHeight:ot(C()),transactionCount:ot(C())}),If=F({slotsPerEpoch:C(),leaderScheduleSlotOffset:C(),warmup:sr(),firstNormalEpoch:C(),firstNormalSlot:C()}),Ef=Ra(H(),Y(C())),zr=Q(Le([F({}),H()])),xf=F({err:zr}),Af=Vt("receivedSignature"),_f=F({"solana-core":H(),"feature-set":ot(C())}),Bf=F({program:H(),programId:jt,parsed:on()}),Rf=F({programId:jt,accounts:Y(jt),data:H()}),xo=Zt(F({err:Q(Le([F({}),H()])),logs:Q(Y(H())),accounts:ot(Q(Y(Q(F({executable:sr(),owner:H(),lamports:C(),data:Y(H()),rentEpoch:ot(C())}))))),unitsConsumed:ot(C()),returnData:ot(Q(F({programId:H(),data:Rs([H(),Vt("base64")])}))),innerInstructions:ot(Q(Y(F({index:C(),instructions:Y(Le([Bf,Rf]))}))))})),Mf=Zt(F({byIdentity:Ra(H(),Y(C())),range:F({firstSlot:C(),lastSlot:C()})}));function Tf(n,t,e,r,s,i){const o=e||lf;let u;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return r&&(f=async(p,I)=>{const B=await new Promise((_,P)=>{try{r(p,I,(M,x)=>_([M,x]))}catch(M){P(M)}});return await o(...B)}),new ah(async(p,I)=>{const B={method:"POST",body:p,agent:u,headers:Object.assign({"Content-Type":"application/json"},t||{},Pd)};try{let _=5,P,M=500;for(;f?P=await f(n,B):P=await o(n,B),!(P.status!==429||s===!0||(_-=1,_===0));)console.error(`Server responded with ${P.status} ${P.statusText}.  Retrying after ${M}ms delay...`),await Br(M),M*=2;const x=await P.text();P.ok?I(null,x):I(new Error(`${P.status} ${P.statusText}: ${x}`))}catch(_){_ instanceof Error&&I(_)}},{})}function Pf(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function Lf(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const Cf=mt(wf),Uf=mt(vf),Of=mt(kf),Nf=mt(Sf),zf=mt(If),Kf=mt(Ef),Ff=mt(C()),Wf=Zt(F({total:C(),circulating:C(),nonCirculating:C(),nonCirculatingAccounts:Y(jt)})),is=F({amount:H(),uiAmount:Q(C()),decimals:C(),uiAmountString:ot(H())}),qf=Zt(Y(F({address:jt,amount:H(),uiAmount:Q(C()),decimals:C(),uiAmountString:ot(H())}))),Df=Zt(Y(F({pubkey:jt,account:F({executable:sr(),owner:jt,lamports:C(),data:zs,rentEpoch:C()})}))),ss=F({program:H(),parsed:on(),space:C()}),$f=Zt(Y(F({pubkey:jt,account:F({executable:sr(),owner:jt,lamports:C(),data:ss,rentEpoch:C()})}))),Hf=Zt(Y(F({lamports:C(),address:jt}))),wn=F({executable:sr(),owner:jt,lamports:C(),data:zs,rentEpoch:C()}),Vf=F({pubkey:jt,account:wn}),Gf=En(Le([Bs(st),ss]),Le([Ja,ss]),n=>Array.isArray(n)?j(n,zs):n),os=F({executable:sr(),owner:jt,lamports:C(),data:Gf,rentEpoch:C()}),jf=F({pubkey:jt,account:os}),Yf=F({state:Le([Vt("active"),Vt("inactive"),Vt("activating"),Vt("deactivating")]),active:C(),inactive:C()}),Zf=mt(Y(F({signature:H(),slot:C(),err:zr,memo:Q(H()),blockTime:ot(Q(C()))}))),Jf=mt(Y(F({signature:H(),slot:C(),err:zr,memo:Q(H()),blockTime:ot(Q(C()))}))),Xf=F({subscription:C(),result:si(wn)}),Qf=F({pubkey:jt,account:wn}),td=F({subscription:C(),result:si(Qf)}),ed=F({parent:C(),slot:C(),root:C()}),rd=F({subscription:C(),result:ed}),nd=Le([F({type:Le([Vt("firstShredReceived"),Vt("completed"),Vt("optimisticConfirmation"),Vt("root")]),slot:C(),timestamp:C()}),F({type:Vt("createdBank"),parent:C(),slot:C(),timestamp:C()}),F({type:Vt("frozen"),slot:C(),timestamp:C(),stats:F({numTransactionEntries:C(),numSuccessfulTransactions:C(),numFailedTransactions:C(),maxTransactionsPerEntry:C()})}),F({type:Vt("dead"),slot:C(),timestamp:C(),err:H()})]),id=F({subscription:C(),result:nd}),sd=F({subscription:C(),result:si(Le([xf,Af]))}),od=F({subscription:C(),result:C()}),ad=F({pubkey:H(),gossip:Q(H()),tpu:Q(H()),rpc:Q(H()),version:Q(H())}),Ao=F({votePubkey:H(),nodePubkey:H(),activatedStake:C(),epochVoteAccount:sr(),epochCredits:Y(Rs([C(),C(),C()])),commission:C(),lastVote:C(),rootSlot:Q(C())}),cd=mt(F({current:Y(Ao),delinquent:Y(Ao)})),ud=Le([Vt("processed"),Vt("confirmed"),Vt("finalized")]),ld=F({slot:C(),confirmations:Q(C()),err:zr,confirmationStatus:ot(ud)}),hd=Zt(Y(Q(ld))),fd=mt(C()),tc=F({accountKey:jt,writableIndexes:Y(C()),readonlyIndexes:Y(C())}),Ks=F({signatures:Y(H()),message:F({accountKeys:Y(H()),header:F({numRequiredSignatures:C(),numReadonlySignedAccounts:C(),numReadonlyUnsignedAccounts:C()}),instructions:Y(F({accounts:Y(C()),data:H(),programIdIndex:C()})),recentBlockhash:H(),addressTableLookups:ot(Y(tc))})}),ec=F({pubkey:jt,signer:sr(),writable:sr(),source:ot(Le([Vt("transaction"),Vt("lookupTable")]))}),rc=F({accountKeys:Y(ec),signatures:Y(H())}),nc=F({parsed:on(),program:H(),programId:jt}),ic=F({accounts:Y(jt),data:H(),programId:jt}),dd=Le([ic,nc]),pd=Le([F({parsed:on(),program:H(),programId:H()}),F({accounts:Y(H()),data:H(),programId:H()})]),sc=En(dd,pd,n=>"accounts"in n?j(n,ic):j(n,nc)),oc=F({signatures:Y(H()),message:F({accountKeys:Y(ec),instructions:Y(sc),recentBlockhash:H(),addressTableLookups:ot(Q(Y(tc)))})}),qn=F({accountIndex:C(),mint:H(),owner:ot(H()),programId:ot(H()),uiTokenAmount:is}),ac=F({writable:Y(jt),readonly:Y(jt)}),oi=F({err:zr,fee:C(),innerInstructions:ot(Q(Y(F({index:C(),instructions:Y(F({accounts:Y(C()),data:H(),programIdIndex:C()}))})))),preBalances:Y(C()),postBalances:Y(C()),logMessages:ot(Q(Y(H()))),preTokenBalances:ot(Q(Y(qn))),postTokenBalances:ot(Q(Y(qn))),loadedAddresses:ot(ac),computeUnitsConsumed:ot(C())}),Fs=F({err:zr,fee:C(),innerInstructions:ot(Q(Y(F({index:C(),instructions:Y(sc)})))),preBalances:Y(C()),postBalances:Y(C()),logMessages:ot(Q(Y(H()))),preTokenBalances:ot(Q(Y(qn))),postTokenBalances:ot(Q(Y(qn))),loadedAddresses:ot(ac),computeUnitsConsumed:ot(C())}),an=Le([Vt(0),Vt("legacy")]),Kr=F({pubkey:H(),lamports:C(),postBalance:Q(C()),rewardType:Q(H()),commission:ot(Q(C()))}),gd=mt(Q(F({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(F({transaction:Ks,meta:Q(oi),version:ot(an)})),rewards:ot(Y(Kr)),blockTime:Q(C()),blockHeight:Q(C())}))),yd=mt(Q(F({blockhash:H(),previousBlockhash:H(),parentSlot:C(),rewards:ot(Y(Kr)),blockTime:Q(C()),blockHeight:Q(C())}))),md=mt(Q(F({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(F({transaction:rc,meta:Q(oi),version:ot(an)})),rewards:ot(Y(Kr)),blockTime:Q(C()),blockHeight:Q(C())}))),wd=mt(Q(F({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(F({transaction:oc,meta:Q(Fs),version:ot(an)})),rewards:ot(Y(Kr)),blockTime:Q(C()),blockHeight:Q(C())}))),bd=mt(Q(F({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(F({transaction:rc,meta:Q(Fs),version:ot(an)})),rewards:ot(Y(Kr)),blockTime:Q(C()),blockHeight:Q(C())}))),kd=mt(Q(F({blockhash:H(),previousBlockhash:H(),parentSlot:C(),rewards:ot(Y(Kr)),blockTime:Q(C()),blockHeight:Q(C())}))),vd=mt(Q(F({blockhash:H(),previousBlockhash:H(),parentSlot:C(),transactions:Y(F({transaction:Ks,meta:Q(oi)})),rewards:ot(Y(Kr)),blockTime:Q(C())}))),_o=mt(Q(F({blockhash:H(),previousBlockhash:H(),parentSlot:C(),signatures:Y(H()),blockTime:Q(C())}))),$i=mt(Q(F({slot:C(),meta:Q(oi),blockTime:ot(Q(C())),transaction:Ks,version:ot(an)}))),Tn=mt(Q(F({slot:C(),transaction:oc,meta:Q(Fs),blockTime:ot(Q(C())),version:ot(an)}))),Sd=Zt(F({blockhash:H(),feeCalculator:F({lamportsPerSignature:C()})})),Id=Zt(F({blockhash:H(),lastValidBlockHeight:C()})),Ed=Zt(sr()),xd=F({slot:C(),numTransactions:C(),numSlots:C(),samplePeriodSecs:C()}),Ad=mt(Y(xd)),_d=Zt(Q(F({feeCalculator:F({lamportsPerSignature:C()})}))),Bd=mt(H()),Rd=mt(H()),Md=F({err:zr,logs:Y(H()),signature:H()}),Td=F({result:si(Md),subscription:C()}),Pd={"solana-client":"js/1.0.0-maintenance"};class Ld{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const w={};return async p=>{const{commitment:I,config:B}=Nt(p),_=this._buildArgs([],I,void 0,B),P=So(_);return w[P]=w[P]??(async()=>{try{const M=await this._rpcRequest("getBlockHeight",_),x=j(M,mt(C()));if("error"in x)throw new rt(x.error,"failed to get block height information");return x.result}finally{delete w[P]}})(),await w[P]}})();let r,s,i,o,u,f;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,u=e.disableRetryOnRateLimit,f=e.httpAgent),this._rpcEndpoint=yf(t),this._rpcWsEndpoint=r||gf(t),this._rpcClient=Tf(t,s,i,o,u,f),this._rpcRequest=Pf(this._rpcClient),this._rpcBatchRequest=Lf(this._rpcClient),this._rpcWebSocket=new hf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),u=j(o,Zt(C()));if("error"in u)throw new rt(u.error,`failed to get balance for ${t.toBase58()}`);return u.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=j(e,mt(Q(C())));if("error"in r)throw new rt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=j(t,mt(C()));if("error"in e)throw new rt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=j(t,Ff);if("error"in e)throw new rt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=j(r,Wf);if("error"in s)throw new rt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=j(s,Zt(is));if("error"in i)throw new rt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=j(s,Zt(is));if("error"in i)throw new rt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Nt(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const u=this._buildArgs(o,s,"base64",i),f=await this._rpcRequest("getTokenAccountsByOwner",u),w=j(f,Df);if("error"in w)throw new rt(w.error,`failed to get token accounts owned by account ${t.toBase58()}`);return w.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),u=j(o,$f);if("error"in u)throw new rt(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=j(s,Hf);if("error"in i)throw new rt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=j(s,qf);if("error"in i)throw new rt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),u=j(o,Zt(Q(wn)));if("error"in u)throw new rt(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),u=j(o,Zt(Q(os)));if("error"in u)throw new rt(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Nt(e),i=t.map(w=>w.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),u=await this._rpcRequest("getMultipleAccounts",o),f=j(u,Zt(Y(Q(os))));if("error"in f)throw new rt(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Nt(e),i=t.map(w=>w.toBase58()),o=this._buildArgs([i],r,"base64",s),u=await this._rpcRequest("getMultipleAccounts",o),f=j(u,Zt(Y(Q(wn))));if("error"in f)throw new rt(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Nt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),u=await this._rpcRequest("getStakeActivation",o),f=j(u,mt(Yf));if("error"in f)throw new rt(f.error,`failed to get Stake Activation ${t.toBase58()}`);return f.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Nt(e),{encoding:i,...o}=s||{},u=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:Eo(o.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",u),w=Y(Vf),p=o.withContext===!0?j(f,Zt(w)):j(f,mt(w));if("error"in p)throw new rt(p.error,`failed to get accounts owned by program ${t.toBase58()}`);return p.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),u=j(o,mt(Y(jf)));if("error"in u)throw new rt(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=xe.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return It(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((f,w)=>{try{r=this.onSignature(e,(I,B)=>{r=void 0;const _={context:B,value:I};f({__type:lr.PROCESSED,response:_})},t);const p=new Promise(I=>{r==null?I():s=this._onSubscriptionStateChange(r,B=>{B==="subscribed"&&I()})});(async()=>{if(await p,i)return;const I=await this.getSignatureStatus(e);if(i||I==null)return;const{context:B,value:_}=I;if(_!=null)if(_!=null&&_.err)w(_.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(_.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(_.confirmationStatus==="processed"||_.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,f({__type:lr.PROCESSED,response:{context:B,value:_}})}})()}catch(p){w(p)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(I=>{const B=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let _=await B();if(!i){for(;_<=r;)if(await Br(1e3),i||(_=await B(),i))return;I({__type:lr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),w=this.getCancellationPromise(e);let p;try{const I=await Promise.race([w,f,o]);if(I.__type===lr.PROCESSED)p=I.response;else throw new Ls(s)}finally{i=!0,u()}return p}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let u=!1;const f=new Promise(_=>{let P=i,M=null;const x=async()=>{try{const{context:U,value:K}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return M=U.slot,K==null?void 0:K.nonce}catch{return P}};(async()=>{if(P=await x(),!u)for(;;){if(i!==P){_({__type:lr.NONCE_INVALID,slotInWhichNonceDidAdvance:M});return}if(await Br(2e3),u||(P=await x(),u))return}})()}),{abortConfirmation:w,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),I=this.getCancellationPromise(e);let B;try{const _=await Promise.race([I,p,f]);if(_.__type===lr.PROCESSED)B=_.response;else{let P;for(;;){const M=await this.getSignatureStatus(o);if(M==null)break;if(M.context.slot<(_.slotInWhichNonceDidAdvance??r)){await Br(400);continue}P=M;break}if(P!=null&&P.value){const M=t||"finalized",{confirmationStatus:x}=P.value;switch(M){case"processed":case"recent":if(x!=="processed"&&x!=="confirmed"&&x!=="finalized")throw new Hr(o);break;case"confirmed":case"single":case"singleGossip":if(x!=="confirmed"&&x!=="finalized")throw new Hr(o);break;case"finalized":case"max":case"root":if(x!=="finalized")throw new Hr(o);break;default:}B={context:P.context,value:{err:P.value.err}}}else throw new Hr(o)}}finally{u=!0,w()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(f=>{let w=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{w=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>f({__type:lr.TIMED_OUT,timeoutMs:w}),w)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let u;try{const f=await Promise.race([o,s]);if(f.__type===lr.PROCESSED)u=f.response;else throw new Cs(e,f.timeoutMs/1e3)}finally{clearTimeout(r),i()}return u}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=j(t,mt(Y(ad)));if("error"in e)throw new rt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=j(r,cd);if("error"in s)throw new rt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Nt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=j(i,mt(C()));if("error"in o)throw new rt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=Nt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=j(i,mt(H()));if("error"in o)throw new rt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=j(s,mt(Y(jt)));if("error"in i)throw new rt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);It(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=j(s,hd);if("error"in i)throw new rt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Nt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=j(i,mt(C()));if("error"in o)throw new rt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=j(r,Cf);if("error"in s)throw new rt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Nt(r),o=this._buildArgs([t.map(w=>w.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),u=await this._rpcRequest("getInflationReward",o),f=j(u,bf);if("error"in f)throw new rt(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=j(t,Uf);if("error"in e)throw new rt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Nt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=j(i,Nf);if("error"in o)throw new rt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=j(t,zf);if("error"in e)throw new rt(e.error,"failed to get epoch schedule");const r=e.result;return new Za(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=j(t,Kf);if("error"in e)throw new rt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=j(s,fd);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),s=j(r,Sd);if("error"in s)throw new rt(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=j(e,Ad);if("error"in r)throw new rt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=j(s,_d);if("error"in i)throw new rt(i.error,"failed to get fee calculator");const{context:o,value:u}=i.result;return{context:o,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(t,e){const r=wt(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=j(i,Zt(Q(C())));if("error"in o)throw new rt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(u=>u.toBase58()),r=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=j(s,Of);if("error"in i)throw new rt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Nt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=j(i,Id);if("error"in o)throw new rt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),u=j(o,Ed);if("error"in u)throw new rt(u.error,"failed to determine if the blockhash `"+t+"`is valid");return u.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=j(t,mt(_f));if("error"in e)throw new rt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=j(t,mt(H()));if("error"in e)throw new rt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const u=j(o,md);if("error"in u)throw u.error;return u.result}case"none":{const u=j(o,yd);if("error"in u)throw u.error;return u.result}default:{const u=j(o,gd);if("error"in u)throw u.error;const{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:w,meta:p,version:I})=>({meta:p,transaction:{...w,message:Di(I,w.message)},version:I}))}:null}}}catch(u){throw new rt(u,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const u=j(o,bd);if("error"in u)throw u.error;return u.result}case"none":{const u=j(o,kd);if("error"in u)throw u.error;return u.result}default:{const u=j(o,wd);if("error"in u)throw u.error;return u.result}}}catch(u){throw new rt(u,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:u,...f}=t;r=u,e=f}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=j(i,Mf);if("error"in o)throw new rt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),u=j(o,$i);if("error"in u)throw new rt(u.error,"failed to get transaction");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:Di(f.version,f.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),u=j(o,Tn);if("error"in u)throw new rt(u.error,"failed to get transaction");return u.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Nt(e),i=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(f=>{const w=j(f,Tn);if("error"in w)throw new rt(w.error,"failed to get transactions");return w.result})}async getTransactions(t,e){const{commitment:r,config:s}=Nt(e),i=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(f=>{const w=j(f,$i);if("error"in w)throw new rt(w.error,"failed to get transactions");const p=w.result;return p&&{...p,transaction:{...p.transaction,message:Di(p.version,p.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedBlock",r),i=j(s,vd);if("error"in i)throw new rt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const u={...o,transactions:o.transactions.map(({transaction:f,meta:w})=>{const p=new Je(f.message);return{meta:w,transaction:{...f,message:p}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:w})=>({meta:w,transaction:xt.populate(f.message,f.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=j(i,mt(Y(C())));if("error"in o)throw new rt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=j(s,_o);if("error"in i)throw new rt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",r),i=j(s,_o);if("error"in i)throw new rt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedTransaction",r),i=j(s,$i);if("error"in i)throw new rt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const u=new Je(o.transaction.message),f=o.transaction.signatures;return{...o,transaction:xt.populate(u,f)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",r),i=j(s,Tn);if("error"in i)throw new rt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const u=j(o,Tn);if("error"in u)throw new rt(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const f=await this.getConfirmedBlockSignatures(e,"finalized");f.signatures.length>0&&(s.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const f=await this.getConfirmedBlockSignatures(r);f.signatures.length>0&&(s.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=j(i,Zf);if("error"in o)throw new rt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=j(i,Jf);if("error"in o)throw new rt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new ns({key:t,state:ns.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=ii.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=j(r,Bd);if("error"in s)throw new rt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Br(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Xa;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Br(Ga/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Nt(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=j(i,Zt(C()));if("error"in o)throw new rt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const M=t.serialize(),x=st.from(M).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const U=e||{};U.encoding="base64","commitment"in U||(U.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(U.innerInstructions=e.innerInstructions);const K=[x,U],O=await this._rpcRequest("simulateTransaction",K),q=j(O,xo);if("error"in q)throw new Error("failed to simulate transaction: "+q.error.message);return q.result}let s;if(t instanceof xt){let P=t;s=new xt,s.feePayer=P.feePayer,s.instructions=t.instructions,s.nonceInfo=P.nonceInfo,s.signatures=P.signatures}else s=xt.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let P=this._disableBlockhashCaching;for(;;){const M=await this._blockhashWithExpiryBlockHeight(P);if(s.lastValidBlockHeight=M.lastValidBlockHeight,s.recentBlockhash=M.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const x=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(x)&&!this._blockhashInfo.transactionSignatures.includes(x)){this._blockhashInfo.simulatedSignatures.push(x);break}else P=!0}}const o=s._compile(),u=o.serialize(),w=s._serialize(u).toString("base64"),p={encoding:"base64",commitment:this.commitment};if(r){const P=(Array.isArray(r)?r:o.nonProgramIds()).map(M=>M.toBase58());p.accounts={encoding:"base64",addresses:P}}i&&(p.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(p.innerInstructions=e.innerInstructions);const I=[w,p],B=await this._rpcRequest("simulateTransaction",I),_=j(B,xo);if("error"in _){let P;if("data"in _.error&&(P=_.error.data.logs,P&&Array.isArray(P))){const M=`
    `,x=M+P.join(M);console.error(_.error.message,x)}throw new mn({action:"simulate",signature:"",transactionMessage:_.error.message,logs:P})}return _.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=u.lastValidBlockHeight,t.recentBlockhash=u.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const f=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))o=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=wt(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],u=await this._rpcRequest("sendTransaction",o),f=j(u,Rd);if("error"in f){let w;throw"data"in f.error&&(w=f.error.data.logs),new mn({action:s?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:w})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var s;const r=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const u=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=s.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:u}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(u){if(u instanceof Error&&console.error(`${o} error:`,u.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=j(t,Xf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=So([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];It(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=Nt(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=j(t,td);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=Nt(r),u=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Eo(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=j(t,Td);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=j(t,rd);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=j(t,id);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=j(t,sd);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,u)=>{if(o.type==="status"){e(o.result,u);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),u=this._makeSubscription({callback:(f,w)=>{e(f,w);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return u}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=j(t,od);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Gr{constructor(t){this._keypair=void 0,this._keypair=t??wo()}static generate(){return new Gr(wo())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=Wn(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new Gr({publicKey:r,secretKey:t})}static fromSeed(t){const e=Wn(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Gr({publicKey:e,secretKey:r})}get publicKey(){return new V(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const pr=Object.freeze({CreateLookupTable:{index:0,layout:et([tt("instruction"),tn("recentSlot"),St("bumpSeed")])},FreezeLookupTable:{index:1,layout:et([tt("instruction")])},ExtendLookupTable:{index:2,layout:et([tt("instruction"),tn(),Ae(kt(),Ir(tt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:et([tt("instruction")])},CloseLookupTable:{index:4,layout:et([tt("instruction")])}});class Cd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=tt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(pr))if(o.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=At(pr.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=At(pr.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new V(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Ws.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class Ws{constructor(){}static createLookupTable(t){const[e,r]=V.findProgramAddressSync([t.authority.toBuffer(),Aa(BigInt(t.recentSlot),8)],this.programId),s=pr.CreateLookupTable,i=vt(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:be.programId,isSigner:!1,isWritable:!1}];return[new Ct({programId:this.programId,keys:o,data:i}),e]}static freezeLookupTable(t){const e=pr.FreezeLookupTable,r=vt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Ct({programId:this.programId,keys:s,data:r})}static extendLookupTable(t){const e=pr.ExtendLookupTable,r=vt(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:be.programId,isSigner:!1,isWritable:!1}),new Ct({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(t){const e=pr.DeactivateLookupTable,r=vt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Ct({programId:this.programId,keys:s,data:r})}static closeLookupTable(t){const e=pr.CloseLookupTable,r=vt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Ct({programId:this.programId,keys:s,data:r})}}Ws.programId=new V("AddressLookupTab1e1111111111111111111111111");class Ud{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=St("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(rr))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=At(rr.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=At(rr.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=At(rr.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=At(rr.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(qs.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const rr=Object.freeze({RequestUnits:{index:0,layout:et([St("instruction"),tt("units"),tt("additionalFee")])},RequestHeapFrame:{index:1,layout:et([St("instruction"),tt("bytes")])},SetComputeUnitLimit:{index:2,layout:et([St("instruction"),tt("units")])},SetComputeUnitPrice:{index:3,layout:et([St("instruction"),tn("microLamports")])}});class qs{constructor(){}static requestUnits(t){const e=rr.RequestUnits,r=vt(e,t);return new Ct({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=rr.RequestHeapFrame,r=vt(e,t);return new Ct({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=rr.SetComputeUnitLimit,r=vt(e,t);return new Ct({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=rr.SetComputeUnitPrice,r=vt(e,{microLamports:BigInt(t.microLamports)});return new Ct({keys:[],programId:this.programId,data:r})}}qs.programId=new V("ComputeBudget111111111111111111111111111111");const Bo=64,Ro=32,Mo=64,To=et([St("numSignatures"),St("padding"),De("signatureOffset"),De("signatureInstructionIndex"),De("publicKeyOffset"),De("publicKeyInstructionIndex"),De("messageDataOffset"),De("messageDataSize"),De("messageInstructionIndex")]);class ai{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,instructionIndex:i}=t;It(e.length===Ro,`Public Key must be ${Ro} bytes but received ${e.length} bytes`),It(s.length===Mo,`Signature must be ${Mo} bytes but received ${s.length} bytes`);const o=To.span,u=o+e.length,f=u+s.length,w=1,p=st.alloc(f+r.length),I=i??65535;return To.encode({numSignatures:w,padding:0,signatureOffset:u,signatureInstructionIndex:I,publicKeyOffset:o,publicKeyInstructionIndex:I,messageDataOffset:f,messageDataSize:r.length,messageInstructionIndex:I},p),p.fill(e,o),p.fill(s,u),p.fill(r,f),new Ct({keys:[],programId:ai.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;It(e.length===Bo,`Private key must be ${Bo} bytes but received ${e.length} bytes`);try{const i=Gr.fromSecretKey(e),o=i.publicKey.toBytes(),u=Ts(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:u,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}ai.programId=new V("Ed25519SigVerify111111111111111111111111111");const Od=(n,t)=>{const e=ei.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};ei.utils.isValidPrivateKey;const Nd=ei.getPublicKey,Po=32,Hi=20,Lo=64,zd=11,Vi=et([St("numSignatures"),De("signatureOffset"),St("signatureInstructionIndex"),De("ethAddressOffset"),St("ethAddressInstructionIndex"),De("messageDataOffset"),De("messageDataSize"),St("messageInstructionIndex"),qt(20,"ethAddress"),qt(64,"signature"),St("recoveryId")]);class jr{constructor(){}static publicKeyToEthAddress(t){It(t.length===Lo,`Public key must be ${Lo} bytes but received ${t.length} bytes`);try{return st.from(fo(wt(t))).slice(-Hi)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,recoveryId:i,instructionIndex:o}=t;return jr.createInstructionWithEthAddress({ethAddress:jr.publicKeyToEthAddress(e),message:r,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:s,recoveryId:i,instructionIndex:o=0}=t;let u;typeof e=="string"?e.startsWith("0x")?u=st.from(e.substr(2),"hex"):u=st.from(e,"hex"):u=e,It(u.length===Hi,`Address must be ${Hi} bytes but received ${u.length} bytes`);const f=1+zd,w=f,p=f+u.length,I=p+s.length+1,B=1,_=st.alloc(Vi.span+r.length);return Vi.encode({numSignatures:B,signatureOffset:p,signatureInstructionIndex:o,ethAddressOffset:w,ethAddressInstructionIndex:o,messageDataOffset:I,messageDataSize:r.length,messageInstructionIndex:o,signature:wt(s),ethAddress:wt(u),recoveryId:i},_),_.fill(wt(r),Vi.span),new Ct({keys:[],programId:jr.programId,data:_})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;It(e.length===Po,`Private key must be ${Po} bytes but received ${e.length} bytes`);try{const i=wt(e),o=Nd(i,!1).slice(1),u=st.from(fo(wt(r))),[f,w]=Od(u,i);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:f,recoveryId:w,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}jr.programId=new V("KeccakSecp256k11111111111111111111111111111");var cc;const uc=new V("StakeConfig11111111111111111111111111111111");class lc{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class xn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}cc=xn;xn.default=new cc(0,0,V.default);class Kd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=tt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(we))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=At(we.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new lc(new V(e.staker),new V(e.withdrawer)),lockup:new xn(r.unixTimestamp,r.epoch,new V(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),At(we.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=At(we.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new V(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=At(we.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new V(i),newAuthorizedPubkey:new V(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=At(we.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),At(we.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=At(we.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),At(we.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(ci.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const we=Object.freeze({Initialize:{index:0,layout:et([tt("instruction"),Kh(),Fh()])},Authorize:{index:1,layout:et([tt("instruction"),kt("newAuthorized"),tt("stakeAuthorizationType")])},Delegate:{index:2,layout:et([tt("instruction")])},Split:{index:3,layout:et([tt("instruction"),Ke("lamports")])},Withdraw:{index:4,layout:et([tt("instruction"),Ke("lamports")])},Deactivate:{index:5,layout:et([tt("instruction")])},Merge:{index:7,layout:et([tt("instruction")])},AuthorizeWithSeed:{index:8,layout:et([tt("instruction"),kt("newAuthorized"),tt("stakeAuthorizationType"),Rr("authoritySeed"),kt("authorityOwner")])}}),Fd=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ci{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:s}=t,i=s||xn.default,o=we.Initialize,u=vt(o,{authorized:{staker:wt(r.staker.toBuffer()),withdrawer:wt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:wt(i.custodian.toBuffer())}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Qr,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new Ct(f)}static createAccountWithSeed(t){const e=new xt;e.add(be.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(t){const e=new xt;e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:s}=t,i=we.Delegate,o=vt(i);return new xt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Qe,isSigner:!1,isWritable:!1},{pubkey:Ln,isSigner:!1,isWritable:!1},{pubkey:uc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=t,u=we.Authorize,f=vt(u,{newAuthorized:wt(s.toBuffer()),stakeAuthorizationType:i.index}),w=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Qe,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&w.push({pubkey:o,isSigner:!0,isWritable:!1}),new xt().add({keys:w,programId:this.programId,data:f})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:u,custodianPubkey:f}=t,w=we.AuthorizeWithSeed,p=vt(w,{newAuthorized:wt(o.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:s,authorityOwner:wt(i.toBuffer())}),I=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Qe,isSigner:!1,isWritable:!1}];return f&&I.push({pubkey:f,isSigner:!0,isWritable:!1}),new xt().add({keys:I,programId:this.programId,data:p})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=t,o=we.Split,u=vt(o,{lamports:i});return new Ct({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(t,e){const r=new xt;return r.add(be.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:u,lamports:f}=t,w=new xt;return w.add(be.allocate({accountPubkey:i,basePubkey:o,seed:u,space:this.space,programId:this.programId})),e&&e>0&&w.add(be.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),w.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:f}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:s}=t,i=we.Merge,o=vt(i);return new xt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Qe,isSigner:!1,isWritable:!1},{pubkey:Ln,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:o}=t,u=we.Withdraw,f=vt(u,{lamports:i}),w=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Qe,isSigner:!1,isWritable:!1},{pubkey:Ln,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&w.push({pubkey:o,isSigner:!0,isWritable:!1}),new xt().add({keys:w,programId:this.programId,data:f})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,s=we.Deactivate,i=vt(s);return new xt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Qe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}ci.programId=new V("Stake11111111111111111111111111111111111111");ci.space=200;class hc{constructor(t,e,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=s}}class Wd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=tt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(nr))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=At(nr.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new hc(new V(e.nodePubkey),new V(e.authorizedVoter),new V(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=At(nr.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new V(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=At(nr.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new V(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new V(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=At(nr.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(cn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const nr=Object.freeze({InitializeAccount:{index:0,layout:et([tt("instruction"),Wh()])},Authorize:{index:1,layout:et([tt("instruction"),kt("newAuthorized"),tt("voteAuthorizationType")])},Withdraw:{index:3,layout:et([tt("instruction"),Ke("lamports")])},UpdateValidatorIdentity:{index:4,layout:et([tt("instruction")])},AuthorizeWithSeed:{index:10,layout:et([tt("instruction"),qh()])}}),qd=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class cn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:s}=t,i=nr.InitializeAccount,o=vt(i,{voteInit:{nodePubkey:wt(s.nodePubkey.toBuffer()),authorizedVoter:wt(s.authorizedVoter.toBuffer()),authorizedWithdrawer:wt(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),u={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Qr,isSigner:!1,isWritable:!1},{pubkey:Qe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Ct(u)}static createAccount(t){const e=new xt;return e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,o=nr.Authorize,u=vt(o,{newAuthorized:wt(s.toBuffer()),voteAuthorizationType:i.index}),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Qe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new xt().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:u}=t,f=nr.AuthorizeWithSeed,w=vt(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:wt(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:wt(i.toBuffer()),voteAuthorizationType:o.index}}),p=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:Qe,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new xt().add({keys:p,programId:this.programId,data:w})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=t,o=nr.Withdraw,u=vt(o,{lamports:s}),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new xt().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return cn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:s}=t,i=nr.UpdateValidatorIdentity,o=vt(i),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new xt().add({keys:u,programId:this.programId,data:o})}}cn.programId=new V("Vote111111111111111111111111111111111111111");cn.space=3762;const fc=new V("Va1idator1nfo111111111111111111111111111111"),Dd=F({name:H(),website:ot(H()),details:ot(H()),iconUrl:ot(H()),keybaseUsername:ot(H())});class Ds{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(Ue(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new V(Oe(e,0,ir)),u=er(e)===1;s.push({publicKey:o,isSigner:u})}if(s[0].publicKey.equals(fc)&&s[1].isSigner){const i=Rr().decode(st.from(e)),o=JSON.parse(i);return _a(o,Dd),new Ds(s[1].publicKey,o)}return null}}const $d=new V("Vote111111111111111111111111111111111111111"),Hd=et([kt("nodePubkey"),kt("authorizedWithdrawer"),St("commission"),Ie(),Ae(et([Ie("slot"),tt("confirmationCount")]),Ir(tt(),-8),"votes"),St("rootSlotValid"),Ie("rootSlot"),Ie(),Ae(et([Ie("epoch"),kt("authorizedVoter")]),Ir(tt(),-8),"authorizedVoters"),et([Ae(et([kt("authorizedPubkey"),Ie("epochOfLastAuthorizedSwitch"),Ie("targetEpoch")]),32,"buf"),Ie("idx"),St("isEmpty")],"priorVoters"),Ie(),Ae(et([Ie("epoch"),Ie("credits"),Ie("prevCredits")]),Ir(tt(),-8),"epochCredits"),et([Ie("slot"),Ie("timestamp")],"lastTimestamp")]);class $s{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=Hd.decode(wt(t),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new $s({nodePubkey:new V(r.nodePubkey),authorizedWithdrawer:new V(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(Vd),priorVoters:Gd(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Vd({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new V(n)}}function Co({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new V(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function Gd({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(Co),...n.slice(0,t).map(Co)]}const Uo={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function jd(n,t){const e=t===!1?"http":"https";if(!n)return Uo[e].devnet;const r=Uo[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function Yd(n,t,e,r){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=r):i=e;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},u=await n.sendRawTransaction(t,o),f=i&&i.commitment,p=(await(s?n.confirmTransaction(s,f):n.confirmTransaction(u,f))).value;if(p.err)throw u!=null?new mn({action:o!=null&&o.skipPreflight?"send":"simulate",signature:u,transactionMessage:`Status: (${JSON.stringify(p)})`}):new Error(`Raw transaction ${u} failed (${JSON.stringify(p)})`);return u}const Zd=1e9,n0=Object.freeze(Object.defineProperty({__proto__:null,Account:Oh,AddressLookupTableAccount:ns,AddressLookupTableInstruction:Cd,AddressLookupTableProgram:Ws,Authorized:lc,BLOCKHASH_CACHE_TIMEOUT_MS:Xa,BPF_LOADER_DEPRECATED_PROGRAM_ID:Nh,BPF_LOADER_PROGRAM_ID:nf,BpfLoader:sf,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:rr,ComputeBudgetInstruction:Ud,ComputeBudgetProgram:qs,Connection:Ld,Ed25519Program:ai,Enum:Ch,EpochSchedule:Za,FeeCalculatorLayout:ja,Keypair:Gr,LAMPORTS_PER_SOL:Zd,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:pr,Loader:Ur,Lockup:xn,MAX_SEED_LENGTH:$a,Message:Je,MessageAccountKeys:yn,MessageV0:Cr,NONCE_ACCOUNT_LENGTH:rs,NonceAccount:ii,PACKET_DATA_SIZE:Er,PUBLIC_KEY_LENGTH:ir,PublicKey:V,SIGNATURE_LENGTH_IN_BYTES:gn,SOLANA_SCHEMA:hn,STAKE_CONFIG_ID:uc,STAKE_INSTRUCTION_LAYOUTS:we,SYSTEM_INSTRUCTION_LAYOUTS:zt,SYSVAR_CLOCK_PUBKEY:Qe,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Gh,SYSVAR_INSTRUCTIONS_PUBKEY:jh,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Pn,SYSVAR_RENT_PUBKEY:Qr,SYSVAR_REWARDS_PUBKEY:Yh,SYSVAR_SLOT_HASHES_PUBKEY:Zh,SYSVAR_SLOT_HISTORY_PUBKEY:Jh,SYSVAR_STAKE_HISTORY_PUBKEY:Ln,Secp256k1Program:jr,SendTransactionError:mn,SolanaJSONRPCError:rt,SolanaJSONRPCErrorCode:Xh,StakeAuthorizationLayout:Fd,StakeInstruction:Kd,StakeProgram:ci,Struct:Ps,SystemInstruction:ef,SystemProgram:be,Transaction:xt,TransactionExpiredBlockheightExceededError:Ls,TransactionExpiredNonceInvalidError:Hr,TransactionExpiredTimeoutError:Cs,TransactionInstruction:Ct,TransactionMessage:Os,TransactionStatus:lr,VALIDATOR_INFO_KEY:fc,VERSION_PREFIX_MASK:ri,VOTE_PROGRAM_ID:$d,ValidatorInfo:Ds,VersionedMessage:Us,VersionedTransaction:Ns,VoteAccount:$s,VoteAuthorizationLayout:qd,VoteInit:hc,VoteInstruction:Wd,VoteProgram:cn,clusterApiUrl:jd,sendAndConfirmRawTransaction:Yd,sendAndConfirmTransaction:es},Symbol.toStringTag,{value:"Module"}));export{ns as A,de as B,Ld as C,Gr as K,Zd as L,Je as M,V as P,gn as S,xt as T,Us as V,Ns as a,be as b,jd as c,Os as d,qt as e,Aa as f,et as g,Ct as h,n0 as i,Qo as j,ao as k,Qr as l,Qe as m,mn as n,st as o,Cr as p,rn as q,ms as r,ta as s,xl as t,St as u};
